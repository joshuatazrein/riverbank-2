{"version":3,"sources":["components/TaskList/TaskList.js","components/List/List.js","components/Task/Task.js","services/util.js","components/Frame/Frame.js","services/edit.js","services/display.js","services/keyComms.js","services/saving.js","assets/snd/pop.mp3","assets/snd/timer.mp3","assets/snd/start.mp3","components/StatusBar/StatusBar.js","components/App/App.js","index.js"],"names":["TaskList","this","subtaskObjects","tasksListed","props","subtasks","filter","x","window","data","tasks","util","map","index","push","React","createRef","id","info","title","parent","ref","length","reverse","join","className","Component","List","updateHeights","dropTask","ev","type","edit","draggedTask","listParent","selected","preventSelect","setTimeout","setState","taskDrop","subtaskDrop","stopPropagation","taskList","state","zoomed","target","value","ordered","currentTime","subtasksCurrent","task","thisTime","startDate","sortedList","currentSort","taskData","includes","sort","a","b","splice","flat","selectThis","changeTitle","bind","listInput","charAt","repeats","sortList","dragOver","preventDefault","dataTransfer","dropEffect","dragEnter","onClick","onContextMenu","onDragEnter","console","log","onDragLeave","onDrop","onChange","onDragOver","readOnly","deadlines","display","String","startdates","Task","hasRepeats","repeating","Object","keys","settings","repeat","dateRender","concat","endDate","end","padStart","string","toggleRepeat","dayInput","del","days","repeatId","app","current","river","day","findIndex","timeDrag","unit","addEventListener","mouseup","removeEventListener","changeTime","disableSelect","displayOptions","freeze","forceUpdate","pageY","screenY","updateTime","ev2","val","date","infoOrig","orig2","change","Date","getHours","shiftKey","updateRiverDate","Number","isNaN","getMonth","setMonth","getDate","setDate","setHours","setSeconds","setMilliseconds","today","getTime","isComplete","completed","complete","excludes","riverTask","minHeight","notes","collapsed","showHide","editBar","focus","$","hasClass","updateHeight","resizable","style","height","scrollHeight","action","deadlineData","dateString","toDateString","status","popSnd","prevState","important","maybe","removeData","confirm","currentTask","undoData","localStorage","getItem","toggleComplete","toggleImportant","toggleMaybe","deleteThis","optionsButton","infoInput","infoArea","headingClass","hasTimes","repeatsOn","startExtra","endExtra","getWeekday","list","getDay","hours","container","onKeyDown","key","hide","preventReturn","onDragStart","width","justifyContent","flexWrap","toggleCollapse","changeValue","onMouseDown","placeholder","marginLeft","show","attr","onMouseUp","spellCheck","flexDirection","marginRight","slice","getFrame","getList","stripR","getSubtasks","object","dateFormat","timeList","Frame","todayIndex","now","getFullYear","addList","lastDate","frames","addLists","i","changeIndex","set","newIndex","frame","finish","children","scrollIntoView","updatePosition","focused","undefined","scrollPos","Math","floor","frameContainer","scrollLeft","position","abs","shownIndex","shownLists","onScroll","deleteTask","newTask","copiedTask","pasteTask","selectTask","el","force","save","saveType","saveObject","err","setItem","JSON","stringify","undo","location","reload","saveSetting","setting","cutTask","copyTask","mirror","insertIndex","indentTask","unindent","lastSelected","here","taskAbove","theseSubtasks","previousSubtasks","parentSubtasks","moveTask","direction","selectedPlace","subtasksChopped","insertPlace","hideComplete","spliceTask","listEdit","incompleteTasks","addIncomplete","y","tomorrow","alert","checkTimes","getMinutes","find","todayList","taskEntry","Notification","requestPermission","newDate","setMinutes","switchView","updateAllSizes","toggleMode","mode","setTheme","theme","toggleSounds","sounds","focusSet","bank","focusView","processWidth","update","riverLists","bankLists","newTheme","themes","document","documentElement","setProperty","displayTable","playSound","sound","play","innerWidth","css","goToToday","searchDate","text","statusBar","search","goToFirst","zoom","zoomedSetting","keyComms","ctrlKey","activeElement","blur","reset","resetData","restore","textarea","append","on","parse","remove","backup","StatusBar","tutorial","myFunc","off","searchString","foundTasks","searches","RegExp","test","idList","buildParents","otherId","listIndex","foundTask","taskId","taskIndex","goToSearch","searchResults","searchBar","options","functions","move","upcoming","deadlineItems","functionsDict","saving","defaultValue","call","disabled","hidden","src","ListMenu","riverLister","bankLister","goToList","Timer","seconds","audio","Audio","timerSnd","start","startSnd","startTime","ended","endTime","stopwatch","backwards","clearInterval","interval","setInterval","ceil","timeReadout","startTimer","playPause","audioRef","App","contextMenu","SelectMenu","top","left","self","marginTop","TableDisplay","migrated","treeSearch","tasksMigrated","newData","removeDeadline","deadlineList","found","containerId","dates","prevWidth","ReactDOM","render","getElementById","getSelection","empty","removeAllRanges","min","innerHeight","pageX"],"mappings":"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","file":"static/js/main.db4ea38b.chunk.js","sourcesContent":["import React from 'react';\nimport './TaskList.css';\nimport * as util from '../../services/util';\nimport Task from '../Task/Task';\n\nexport default class TaskList extends React.Component {\n  render() {\n    this.subtaskObjects = [];\n    // subtasks are filtered for deleted tasks\n    const tasksListed = this.props.subtasks.filter(x =>\n      window.data.tasks[util.stripR(x)]).map((x, index) => {\n        this.subtaskObjects.push(React.createRef());\n        const task = (\n          <Task\n            key={x}\n            id={x}\n            info={window.data.tasks[util.stripR(x)].info}\n            title={window.data.tasks[util.stripR(x)].title}\n            subtasks={window.data.tasks[util.stripR(x)].subtasks}\n            parent={this.props.parent}\n            ref={this.subtaskObjects[this.subtaskObjects.length - 1]}\n            index={index}\n          />\n        )\n        return task;\n      })\n    let parent = this.props.parent;\n    let id = [];\n    while (parent) {\n      id.push(parent.props.id);\n      parent = parent.props.parent;\n    }\n    id = id.reverse().join('-');\n    return (\n      <ul className='listContent'>\n        {tasksListed}\n      </ul>\n    )\n  }\n}","import React from 'react';\nimport './List.css';\nimport * as display from '../../services/display';\nimport * as edit from '../../services/edit';\nimport * as util from '../../services/util';\nimport TaskList from '../TaskList/TaskList';\n\nexport default class List extends React.Component {\n  constructor(props) {\n    super(props);\n    this.taskList = React.createRef();\n    this.state = {\n      // filter subtasks here\n      subtasks: props.subtasks,\n      title: props.title,\n      info: {}, zoomed: ''\n    };\n  }\n  changeTitle(ev) {\n    this.setState({ title: ev.target.value });\n  }\n  sortList() {\n    // sort the given list by time\n    let ordered = true;\n    let currentTime = 0;\n    for (let x of this.subtasksCurrent) {\n      const task = window.data.tasks[util.stripR(x)];\n      const thisTime = util.getTime(task.info.startDate);\n      if (\n        task.info.type === 'event' &&\n        thisTime < currentTime\n      ) {\n        ordered = false;\n        break;\n      }\n      currentTime = thisTime;\n    }\n    if (ordered) return;\n    // sort the list\n    let sortedList = [];\n    let currentSort = ['start'];\n    for (let task of this.subtasksCurrent) {\n      const taskData = window.data.tasks[util.stripR(task)];\n      if (taskData.info.type === 'event' && \n        !taskData.info.startDate.includes('--')) {\n        sortedList.push(currentSort);\n        currentSort = [];\n        currentSort.push(task);\n      } else {\n        currentSort.push(task);\n      }\n    }\n    sortedList.push(currentSort); // add last thing\n    sortedList = sortedList.sort((a, b) => {\n      if (a[0] === 'start' || a.length === 0) {\n        a = a.splice(0, 1);\n        return -1;\n      } else if (b[0] === 'start' || b.length === 0) {\n        b = b.splice(0, 1);\n        return 1;\n      } else {\n        return util.getTime(window.data.tasks[util.stripR(a[0])].info.startDate) - \n          util.getTime(window.data.tasks[util.stripR(b[0])].info.startDate)\n      }\n    }).flat();\n    this.subtasksCurrent = sortedList;\n  }\n  updateHeights = () => {\n    return\n    if (!this.taskList.current) return;\n    const objects = this.taskList.current.subtaskObjects.filter(\n      x => x.current.isComplete() !== 'complete'\n    );\n    for (\n      let i = 0; i < objects.length - 1; i++\n    ) {\n      const thisObject = objects[i].current;\n      const nextObject = objects[i + 1].current;\n      let minHeight = 1;\n      if (\n        thisObject.state.info.type === 'event'\n      ) {\n        const endDate = thisObject.state.info.endDate;\n        if (!endDate.includes('--')) {\n          // rounded to 30 minutes\n          minHeight = (endDate[0] * 60 + endDate[1]) / 60;\n        } else if (nextObject.state.info.type === 'event') {\n          // no end date\n          const startDate = nextObject.state.info.startDate;\n          if (!startDate.includes('--')) {\n            const difference = \n              util.getTime(startDate) - util.getTime(thisObject.state.info.startDate);\n            minHeight = difference / 60;\n          }\n        }\n      }\n      thisObject.setState({ minHeight: minHeight });\n    }\n    if (objects.length > 0) {\n      let minHeight = 1;\n      const lastObject = objects[objects.length - 1].current;\n      const endDate = lastObject.state.info.endDate;\n      if (lastObject.state.info.type === 'event' &&\n        !endDate.includes('--')) {\n        // rounded to 30 minutes\n        minHeight = (endDate[0] * 60 + endDate[1]) / 60;\n      }\n      lastObject.setState({ minHeight: minHeight });\n    }\n  }\n  dropTask = (ev, type) => {\n    edit.selectTask(window.draggedTask);\n    const listParent = window.selected.props.parent;\n    edit.cutTask();\n    edit.save(listParent, 'list');\n    window.preventSelect = false;\n    setTimeout(() => {\n      edit.selectTask(this);\n      if (type === 'subtask') {\n        edit.pasteTask('task');\n      } else if (type === 'task') {\n        edit.pasteTask();\n      }\n    }, 100);\n    this.setState({\n      taskDrop: false,\n      subtaskDrop: false,\n    })\n    ev.stopPropagation();\n  }\n  render() {\n    var selectThis = () => {\n      edit.selectTask(this);\n    }\n    this.changeTitle = this.changeTitle.bind(this);\n    this.listInput = React.createRef();\n    this.subtasksCurrent = this.state.subtasks.filter(x =>\n      !(x.charAt(0) === 'R' && !this.props.repeats.includes(x)) &&\n      window.data.tasks[util.stripR(x)]);\n    if (this.props.parent.props.id === 'river') {\n      for (let task of this.props.repeats) {\n        if (!this.subtasksCurrent.includes(task) &&\n          !this.subtasksCurrent.includes(util.stripR(task))) {\n          this.subtasksCurrent.push(task);\n        }\n      }\n    }\n    if (util.getFrame(this).props.id === 'river') {\n      this.sortList();\n      setTimeout(this.updateHeights, 100);\n    }\n    const drop = (ev) => {\n      edit.selectTask(window.draggedTask);\n      const listParent = window.selected.props.parent;\n      edit.cutTask();\n      edit.save(listParent, 'list');\n      window.preventSelect = false;\n      setTimeout(() => {\n        edit.selectTask(this);\n        if (ev.metaKey) {\n          edit.pasteTask('task');\n        } else {\n          edit.pasteTask();\n        }\n      }, 100);\n      ev.stopPropagation();\n    }\n    const dragOver = (ev) => {\n      ev.preventDefault();\n      ev.dataTransfer.dropEffect = 'all';\n    }\n    const dragEnter = (ev) => {\n      ev.dataTransfer.dropEffect = 'all';\n    }\n    const dragLeave = (ev) => {\n      ev.dataTransfer.dropEffect = 'all';\n    }\n    return (\n      <div className={'list ' + this.state.zoomed} onClick={selectThis}\n        onContextMenu={selectThis}\n      >\n        <div className='listInputBackground'\n          onDragEnter={() => {\n            console.log(window.draggedTask.props.id);\n            if (window.draggedTask.props.id === this.props.id) return;\n            this.setState({taskDrop: true})\n          }}\n          onDragLeave={() => this.setState({taskDrop: false})}\n          onDrop={(ev) => this.dropTask(ev, 'subtask')}\n        >\n          {this.props.parent.props.id === 'bank' ?\n            <input className='listInput' value={this.state.title}\n              onChange={this.changeTitle} ref={this.listInput}\n              onDragOver={dragOver}\n              onDragEnter={dragEnter}\n              onDragLeave={dragLeave}\n            ></input> :\n            <input readOnly className='listInput listTitle'\n              value={util.dateFormat(this.state.title)} ref={this.listInput}\n              onDragOver={dragOver}\n              onDragEnter={dragEnter}\n            >\n            </input>\n          }\n        </div>\n        <div className='listFrame'>\n          {this.props.parent.props.id === 'river' &&\n            this.props.deadlines &&\n            <ul>\n              {this.props.deadlines.map(x => {\n                try {\n\n                return <li\n                  className='deadline' key={String(x)}\n                  onClick={() => display.searchDate(window.data.tasks[util.stripR(x)].title, 'start')}>\n                  {window.data.tasks[util.stripR(x)].title}</li>;\n                } catch {\n                  return undefined;\n                }\n              })}\n            </ul>}\n          {this.props.parent.props.id === 'river' &&\n            this.props.startdates &&\n            <ul>\n              {this.props.startdates.map(x => {\n                return (<li\n                  className='startdate' key={String(x)}\n                  onClick={() => display.searchDate(window.data.tasks[util.stripR(x)].title,\n                    'start')}>\n                  {window.data.tasks[util.stripR(x)].title}</li>);\n              })}\n            </ul>}\n          <div \n            className={`dropArea ${this.state.taskDrop ? 'droppable' : ''}`}\n            onDragOver={dragOver}\n          ></div>\n          {<TaskList ref={this.taskList} subtasks={this.subtasksCurrent}\n            parent={this} />}\n        </div>\n      </div>\n    )\n  }\n}","import React from 'react';\nimport './Task.css';\nimport $ from 'jquery';\nimport * as display from '../../services/display';\nimport * as edit from '../../services/edit';\nimport * as util from '../../services/util';\nimport TaskList from '../TaskList/TaskList';\nimport List from '../List/List';\n\nexport default class Task extends React.Component {\n  constructor(props) {\n    super();\n    this.state = {\n      info: props.info, title: props.title,\n      subtasks: props.subtasks.filter(x =>\n        window.data.tasks[util.stripR(x)]), parent: props.parent,\n      id: props.id, displayOptions: 'hide', riverTask: false,\n      zoomed: '', minHeight: 1\n    };\n    // TODO\n    if (!this.state.info.startDate) this.state.info.startDate = ['--', '--'];\n    if (!this.state.info.endDate) this.state.info.endDate = ['--', '--'];\n    if (!this.state.info.notes) this.state.info.notes = '';\n    if (!this.state.info.type) {\n      if (props.parent instanceof List &&\n        util.getFrame(props.parent).props.id === 'river') {\n        this.state.info.type = 'event';\n      } else {\n        this.state.info.type = 'date';\n      }\n    };\n    if (!this.state.info.collapsed) this.state.info.collapsed = '';\n    if (!this.state.info.excludes) this.state.info.excludes = [];\n  }\n  displayOptions(ev, showHide) {\n    edit.save(this);\n    if (this.freeze === true) return;\n    if (window.selected !== this) {\n      edit.selectTask(this);\n    }\n    if (this.editBar.current) {\n      this.editBar.current.focus();\n    }\n    if ($(ev.target).hasClass('options') ||\n      $(ev.target).parent().hasClass('options')) {\n      return\n    }\n    if (showHide === 'hide' || this.state.displayOptions === 'show') {\n      this.setState({ displayOptions: 'hide' });\n      if (\n        this.props.parent instanceof List && \n        util.getFrame(this).props.id === 'river'\n      ) {\n        this.props.parent.forceUpdate();\n      }\n    } else if (showHide === 'show' || this.state.displayOptions === 'hide') {\n      this.setState({ displayOptions: 'show' });\n    }\n  }\n  changeTitle(ev) {\n    this.setState({ title: ev.target.value });\n    this.updateHeight();\n  }\n  updateHeight() {\n    if (this.resizable !== false) {\n      this.editBar.current.style.height = '0px';\n      this.editBar.current.style.height =\n        (this.editBar.current.scrollHeight) + \"px\";\n      this.resizable = false;\n    }\n    setTimeout(() => this.resizable = true, 100);\n  }\n  updateRiverDate(type, action) {\n    // remove from startdates/deadlines\n    var date = new Date();\n    var deadlineData;\n    if (type === 'start') {\n      if (this.state.info.startDate.includes('--')) return;\n      deadlineData = window.app.current.state.startdates;\n      date.setMonth(this.state.info.startDate[0] - 1);\n      date.setDate(this.state.info.startDate[1]);\n    } else if (type === 'end') {\n      if (this.state.info.endDate.includes('--')) return;\n      deadlineData = window.app.current.state.deadlines;\n      date.setMonth(this.state.info.endDate[0] - 1);\n      date.setDate(this.state.info.endDate[1]);\n    }\n    var dateString = date.toDateString();\n    if (action === 'add') {\n      if (!deadlineData[dateString]) {\n        deadlineData[dateString] = [this.props.id]\n      }\n      else { deadlineData[dateString].push(this.props.id) }\n    } else if (action === 'remove') {\n      if (!deadlineData[dateString]) return\n      else {\n        deadlineData[dateString].splice(deadlineData[dateString].findIndex(\n          x => x === this.props.id), 1)\n      };\n    }\n    // add to the things\n    if (type === 'start') {\n      window.app.current.setState({ startdates: { ...deadlineData } });\n      edit.saveSetting('startdates', deadlineData);\n    } else if (type === 'end') {\n      window.app.current.setState({ deadlines: { ...deadlineData } });\n      edit.saveSetting('deadlines', deadlineData);\n    }\n  }\n  toggleComplete(change) {\n    let status = this.state.info.complete\n    if (status === 'complete') { \n      status = '';\n      if (this.state.info.type === 'date') {\n        this.updateRiverDate('start', 'add');\n        this.updateRiverDate('end', 'add');\n      }\n    }\n    else {\n      status = 'complete';\n      if (this.state.info.type === 'date') {\n        this.updateRiverDate('start', 'remove');\n        this.updateRiverDate('end', 'remove');\n      }\n      display.playSound(window.app.current.state.popSnd);\n    }\n    // excludes lets it put it in complete\n    const repeats = window.app.current.state.river.current.state.repeats;\n    let repeating = false;\n    let parent = this.props.parent; /// find list it's in\n    while (!parent instanceof List) {\n      parent = parent.props.parent;\n    }\n    const excludes = this.state.info.excludes;\n    for (let x of ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']) {\n      if (repeats[x].includes('R' + util.stripR(this.props.id))) {\n        repeating = true;\n        if (!excludes.includes(parent.state.title)) {\n          excludes.push(parent.state.title);\n          break;\n        } else {\n          excludes.splice(excludes\n            .findIndex(x => x === parent.state.title), 1);\n          break;\n        }\n      }\n    }\n    if (repeating === true) {\n      this.setState({ info: { ...this.state.info, excludes: excludes } })\n    } else {\n      this.setState(prevState => ({\n        info: { ...prevState.info, complete: status }\n      }));\n    }\n    if (change !== false) {\n      this.displayOptions('hide');\n    }\n  }\n  toggleImportant(change) {\n    let status = this.state.info.important\n    if (status === 'important') { status = '' }\n    else { status = 'important' }\n    this.setState(prevState => ({\n      info: { ...prevState.info, important: status, maybe: '' }\n    }));\n    if (change !== false) {\n      this.displayOptions('hide');\n    }\n  }\n  toggleMaybe(change) {\n    let status = this.state.info.maybe\n    if (status === 'maybe') { status = '' }\n    else { status = 'maybe' }\n    this.setState(prevState => ({\n      info: { ...prevState.info, maybe: status, important: '' }\n    }));\n    if (change !== false) {\n      this.displayOptions('hide');\n    }\n  }\n  toggleCollapse() {\n    let status = this.state.info.collapsed\n    if (status === 'collapsed') { status = '' }\n    else { status = 'collapsed' }\n    this.setState(prevState => ({\n      info: { ...prevState.info, collapsed: status }\n    }), display.updateAllSizes);\n    this.displayOptions('hide');\n  }\n  hasRepeats = () => {\n    let repeating = false;\n    for (let repeat of Object.keys(window.data.settings.repeats)) {\n      if (window.data.settings.repeats[repeat].includes('R' +\n        util.stripR(this.props.id))) {\n        repeating = true;\n        break;\n      }\n    }\n    return repeating;\n  }\n  deleteThis(removeData) {\n    if (this.hasRepeats()) {\n      const permission = window.confirm(\n        'This will delete all repeats.\\n(Complete task to hide only this one)');\n      if (!permission) { return; }\n    }\n    // TODO: remove deadline, repeat & startdate \n    // [[don't use global variable]]\n    let parent = this.props.parent;\n    while (parent.props.parent) {\n      parent = parent.props.parent;\n    }\n    const subtasks = this.state.parent.state.subtasks;\n    const currentTask = subtasks.findIndex(x => x === this.props.id);\n    subtasks.splice(currentTask, 1);\n    window.selected = this.state.parent;\n    window.preventSelect = true;\n    this.state.parent.setState({ subtasks: subtasks });\n    if (removeData !== false) {\n      this.updateRiverDate('start', 'remove');\n      this.updateRiverDate('end', 'remove');\n      this.toggleRepeat('all', true);\n      delete window.data.tasks[util.stripR(this.props.id)];\n    }\n    setTimeout(() => {\n      window.undoData = localStorage.getItem('data');\n      window.preventSelect = false\n      edit.save(this.props.parent, 'list');\n    }, 200);\n  }\n  componentDidMount() {\n    this.editBar.current.focus();\n    setTimeout(\n      () => {\n        if (this.editBar.current) this.updateHeight();\n      }, 50\n    )\n    edit.selectTask(this);\n    this.resizable = true;\n  }\n  dateRender = (type) => {\n    var info;\n    if (type === 'start') {\n      info = this.state.info.startDate.concat();\n    } else if (type === 'end') {\n      info = this.state.info.endDate.concat();\n    }\n    if (this.state.info.type === 'event') {\n      if (type === 'start') {\n        let end;\n        if (info[0] >= 12) end = 'p';\n        else end = 'a';\n        if (info[0] > 12) { info[0] -= 12 }\n        return info[0] + ':' + String(info[1]).padStart(2, 0) + end;\n      } else if (type === 'end') {\n        let string = '';\n        if (info[0] !== 0) string += info[0] + 'h';\n        if (info[1] !== 0) string += info[1] + 'm';\n        return string;\n      }\n    } else if (this.state.info.type === 'date') {\n      return info[0] + '-' + info[1];\n    }\n  }\n  toggleRepeat = (dayInput, del) => {\n    var days;\n    if (dayInput === 'all') {\n      days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n    } else {\n      days = [dayInput];\n    }\n    let repeatId;\n    if (this.props.id.charAt(0) === 'R') {\n      repeatId = this.props.id;\n    } else {\n      repeatId = 'R' + this.props.id;\n    }\n    const repeats = { ...window.app.current.state.river.current.state.repeats };\n    for (let day of days) {\n      if (repeats[day].includes(repeatId) || del === true) {\n        if (repeats[day].includes(repeatId)) {\n          repeats[day].splice(repeats[day]\n            .findIndex(x => x === repeatId), 1);\n        }\n      } else {\n        repeats[day].push(repeatId);\n      }\n    }\n    window.app.current.state.river.current.setState({\n      repeats: repeats\n    });\n    edit.saveSetting('repeats', repeats);\n  }\n  timeDrag = (ev, unit, type) => {\n    var mouseup = () => {\n      window.removeEventListener('mousemove', changeTime);\n      window.app.current.setState({ disableSelect: '' });\n      if (unit === 'e' || this.state.info.type === 'event') {\n        this.displayOptions('hide');\n      } else if (unit === 's') {\n        this.setState({ displayOptions: 'show' });\n      } \n      this.freeze = true;\n      setTimeout(() => this.freeze = false, 200);\n      window.removeEventListener('mouseup', mouseup);\n      this.props.parent.forceUpdate();\n    }\n    window.addEventListener('mouseup', mouseup);\n    var change = 10;\n    var pageY = ev.screenY;\n    var updateTime = (ev2, value, unit) => {\n      let val;\n      let date;\n      let infoOrig;\n      let orig2;\n      if (this.state.info.type === 'event') {\n        if (type === 'start') {\n          infoOrig = this.state.info.startDate[1];\n          orig2 = this.state.info.startDate[0];\n        } else if (type === 'end') {\n          infoOrig = this.state.info.endDate[1];\n          orig2 = this.state.info.endDate[0];\n        }\n        if (infoOrig === '--') {\n          infoOrig = 0;\n        }\n        if (orig2 === '--' && type === 'end') {\n          orig2 = 0;\n        } else if (orig2 === '--' && type === 'start') {\n          orig2 = new Date().getHours();\n        }\n        let change;\n        if (ev2.shiftKey) {\n          change = value * 5;\n        } else {\n          change = value * 30;\n        }\n        val = infoOrig + change;\n        if (val >= 60) {\n          val = 0;\n          orig2 += 1;\n        } else if (val < 0) {\n          val = 60 + change;\n          orig2 -= 1;\n        }\n        if (type === 'end') {\n          if (orig2 >= 24 || orig2 < 0) {\n            val = '--';\n            orig2 = '--';\n            window.removeEventListener('mousemove', changeTime);\n          }\n        } else if (type === 'start') {\n          if (orig2 == 3) {\n            val = '--';\n            orig2 = '--';\n            window.removeEventListener('mousemove', changeTime);\n          }\n        }\n        if (type === 'start') {\n          this.setState({\n            info: {\n              ...this.state.info,\n              startDate: [orig2, val]\n            }\n          });\n        } else if (type === 'end') {\n          this.setState({\n            info: {\n              ...this.state.info,\n              endDate: [orig2, val]\n            }\n          });\n        }\n      } else {\n        // dates\n        this.updateRiverDate(type, 'remove');\n        if (unit === 's') {\n          if (type === 'start') {\n            infoOrig = this.state.info.startDate[0];\n            orig2 = this.state.info.startDate[1];\n          } else if (type === 'end') {\n            infoOrig = this.state.info.endDate[0];\n            orig2 = this.state.info.endDate[1];\n          }\n          if (infoOrig === '--' || Number.isNaN(infoOrig)) {\n            infoOrig = new Date().getMonth() + 1;\n          }\n          if (orig2 === '--' || Number.isNaN(orig2)) {\n            orig2 = 1;\n          }\n          val = infoOrig + value;\n          if (val === new Date().getMonth() && value < 0) {\n            val = '--';\n            orig2 = '--';\n          } else {\n            date = new Date();\n            date.setMonth(val - 1);\n            val = date.getMonth() + 1;\n          }\n          if (type === 'start') {\n            this.setState({\n              info: {\n                ...this.state.info,\n                startDate: [val, orig2]\n              }\n            });\n          } else if (type === 'end') {\n            this.setState({\n              info: {\n                ...this.state.info,\n                endDate: [val, orig2]\n              }\n            });\n          }\n        } else if (unit === 'e') {\n          if (type === 'start') {\n            infoOrig = this.state.info.startDate[1];\n            orig2 = this.state.info.startDate[0];\n          } else if (type === 'end') {\n            infoOrig = this.state.info.endDate[1];\n            orig2 = this.state.info.endDate[0];\n          }\n          if (infoOrig === '--' || Number.isNaN(infoOrig)) {\n            infoOrig = new Date().getDate();\n          }\n          if (orig2 === '--' || Number.isNaN(orig2)) {\n            orig2 = new Date().getMonth() + 1;\n          }\n          val = infoOrig + value;\n          date = new Date();\n          date.setMonth(orig2 - 1);\n          date.setDate(val);\n          date.setHours(0); date.setSeconds(0); date.setMilliseconds(0);\n          const today = new Date();\n          today.setDate(today.getDate() - 1);\n          today.setHours(0); today.setSeconds(0); today.setMilliseconds(0);\n          if (date.getTime() === today.getTime() && value < 0) {\n            if (type === 'start') {\n              this.setState({\n                info: {\n                  ...this.state.info,\n                  startDate: ['--', '--']\n                }\n              });\n            } else if (type === 'end') {\n              this.setState({\n                info: {\n                  ...this.state.info,\n                  endDate: ['--', '--']\n                }\n              });\n            }\n            return;\n          }\n          if (type === 'start') {\n            this.setState({\n              info: {\n                ...this.state.info,\n                startDate: [date.getMonth() + 1, date.getDate()]\n              }\n            });\n          } else if (type === 'end') {\n            this.setState({\n              info: {\n                ...this.state.info,\n                endDate: [date.getMonth() + 1, date.getDate()]\n              }\n            });\n          }\n        }\n        if (type === 'start' && !this.state.info.startDate.includes('--')) {\n          this.updateRiverDate(type, 'add');\n        } else if (type === 'end' && !this.state.info.endDate.includes('--')) {\n          this.updateRiverDate(type, 'add');\n        }\n      }\n    }\n    var changeTime = (ev) => {\n      var changeTime = false;\n      if (ev.screenY < pageY - change) {\n        pageY -= change;\n        changeTime = -1;\n      } else if (ev.screenY > pageY + change) {\n        pageY += change;\n        changeTime = 1;\n      }\n      if (changeTime !== false) {\n        updateTime(ev, changeTime, unit);\n      }\n    }\n    window.app.current.setState({ disableSelect: 'disable-select' });\n    window.addEventListener('mousemove', changeTime);\n  }\n  isComplete = () => {\n    let completed = this.state.info.complete;\n    let parent = this.props.parent;\n    // hacking completed for repeats\n    while (!parent instanceof List) {\n      parent = parent.props.parent;\n    }\n    if (this.state.info.excludes.includes(parent.state.title)) {\n      completed = 'complete';\n    }\n    return completed;\n  }\n  dropTask = (ev, type) => {\n    if (window.draggedTask.props.id === this.props.id) return;\n    edit.selectTask(window.draggedTask);\n    const listParent = window.selected.props.parent;\n    edit.cutTask();\n    edit.save(listParent, 'list');\n    window.preventSelect = false;\n    setTimeout(() => {\n      edit.selectTask(this);\n      if (type === 'subtask') {\n        edit.pasteTask('task');\n      } else if (type === 'task') {\n        edit.pasteTask();\n      }\n    }, 100);\n    this.setState({\n      taskDrop: false,\n      subtaskDrop: false,\n    })\n    ev.stopPropagation();\n  }\n  render() {\n    // fuck react\n    this.displayOptions = this.displayOptions.bind(this);\n    this.toggleComplete = this.toggleComplete.bind(this);\n    this.toggleImportant = this.toggleImportant.bind(this);\n    this.toggleMaybe = this.toggleMaybe.bind(this);\n    this.deleteThis = this.deleteThis.bind(this);\n    this.updateHeight = this.updateHeight.bind(this);\n    this.taskList = React.createRef();\n    this.optionsButton = React.createRef();\n    this.editBar = React.createRef();\n    this.infoInput = React.createRef();\n    this.infoArea = React.createRef();\n    const headingClass = this.state.subtasks.length > 0 ?\n      'heading' : '';\n    if (this.editBar.current) {\n      this.editBar.current.style.height = '0px';\n      this.editBar.current.style.height =\n        (this.editBar.current.scrollHeight) + \"px\";\n    }\n    let parent = this;\n    let id = [];\n    while (parent) {\n      id.push(parent.props.id);\n      parent = parent.props.parent;\n    }\n    id = id.reverse().join('-');\n    const hasTimes = this.state.info.type === 'event' &&\n      !this.state.info.startDate.includes('--');\n    let repeatsOn = {};\n    for (let day of ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']) {\n      if (window.data.settings.repeats[day].map(x => util.stripR(x)).includes(\n        util.stripR(this.props.id))) {\n        repeatsOn[day] = 'repeatOn';\n      } else {\n        repeatsOn[day] = '';\n      }\n    }\n    let completed = this.isComplete();\n    const amPmFormat = (hours) => {\n      if (hours === '--') return hours;\n      if (hours > 12) return hours - 12;\n      else return hours;\n    }\n    let startExtra;\n    let endExtra;\n    if (this.state.info.type === 'event') {\n      // am/pm\n      if (!this.state.info.startDate.includes('--')) {\n        if (this.state.info.startDate[0] >= 12) startExtra = 'p';\n        else startExtra = 'a';\n      }\n    }\n    else {\n      // date\n      const getWeekday = (list) => {\n        const weekdaysDict = {\n          1: 'M', 2: 'T', 3: 'W', 4: 'R', 5: 'F', 6: 'S', 0: 'U'\n        };\n        const date = new Date();\n        date.setMonth(list[[0]] - 1);\n        date.setDate(list[1]);\n        return weekdaysDict[date.getDay()];\n      }\n      if (!this.state.info.startDate.includes('--')) {\n        startExtra = getWeekday(this.state.info.startDate);\n      }\n      if (!this.state.info.endDate.includes('--')) {\n        endExtra = getWeekday(this.state.info.endDate);\n      }\n    } \n    const openDrag = (ev) => {\n      $(container.current).attr('draggable', 'true');\n    }\n    const closeDrag = (ev) => {\n      $(container.current).attr('draggable', 'false');\n    }\n    const startDrag = (ev) => {\n      // enabling drag & drop: only select target with matching title\n      // const dragId = $(ev.target).attr('dragid');\n      // if (this.props.id === dragId) {\n      // }\n      // only drag it if it's possible to be dragged\n      console.log('startDrag');\n      window.draggedTask = this;\n      ev.stopPropagation();\n    }\n    const dragOver = (ev) => {\n      ev.preventDefault();\n      ev.dataTransfer.dropEffect = 'all';\n    }\n    const container = React.createRef();\n    return (\n      <>\n      <li className={'task ' + this.state.info.important +\n        ' ' + completed +\n        ' ' + this.state.info.maybe +\n        ' ' + headingClass +\n        ' ' + this.state.info.type +\n        ' ' + this.state.info.collapsed +\n        ' ' + this.state.zoomed}\n        onClick={() => { edit.selectTask(this) }} \n        onContextMenu={() => edit.selectTask(this) }\n        style={{minHeight: this.state.minHeight * 1.15 * 30}}\n        onDragOver={dragOver}\n      >\n        <textarea className='infoArea' \n        ref={this.infoArea}\n        onKeyDown={(ev) => {\n          if (ev.key === 'Escape') {\n            $(this.infoArea.current).hide();\n            setTimeout(() => window.preventReturn = false, 100);\n          }\n        }}\n        onChange={() => {\n          this.setState({\n            info: {\n              ...this.state.info,\n              notes: this.infoArea.current.value\n            }\n          })\n        }}\n        value={this.state.info.notes}\n        ></textarea>\n        <div className='taskContent' ref={container}\n          onDragStart={startDrag}>\n          <div className={'options ' + this.state.displayOptions}>\n            <div className='buttonBar' style={{\n              width: '100%',\n              justifyContent: 'space-around',\n              flexWrap: 'nowrap',\n            }}>\n              <div className='buttonBar'>\n                <button\n                  title='toggle complete'\n                  className={'button ' + this.state.info.complete}\n                  onClick={this.toggleComplete}>\n                  √</button>\n                <button\n                  title='toggle important'\n                  className={'button ' + this.state.info.important}\n                  onClick={this.toggleImportant}>\n                  !</button>\n                <button\n                  title='toggle maybe'\n                  className={'button ' + this.state.info.maybe}\n                  onClick={this.toggleMaybe}>\n                  ?</button>\n                <button\n                  title='toggle fold'\n                  className={'button'}\n                  onClick={() => this.toggleCollapse()}>\n                  {'[]'}</button>\n              </div>\n              <div className='buttonBar'>\n                <button className={'button ' + repeatsOn['Mon']}\n                  onClick={() => { this.toggleRepeat('Mon'); }}>M</button>\n                <button className={'button ' + repeatsOn['Tue']}\n                  onClick={() => {\n                    this.toggleRepeat('Tue');\n                  }}>T</button>\n                <button className={'button ' + repeatsOn['Wed']}\n                  onClick={() => {\n                    this.toggleRepeat('Wed');\n                  }}>W</button>\n                <button className={'button ' + repeatsOn['Thu']}\n                  onClick={() => {\n                    this.toggleRepeat('Thu');\n                  }}>R</button>\n                <button className={'button ' + repeatsOn['Fri']}\n                  onClick={() => {\n                    this.toggleRepeat('Fri');\n                  }}>F</button>\n                <button className={'button ' + repeatsOn['Sat']}\n                  onClick={() => {\n                    this.toggleRepeat('Sat');\n                  }}>S</button>\n                <button className={'button ' + repeatsOn['Sun']}\n                  onClick={() => {\n                    this.toggleRepeat('Sun');\n                  }}>U</button>\n              </div>\n            </div>\n              <div className='timeDiv buttonBar' style={{\n                flexWrap: 'nowrap',\n              }}>\n                <button className='button timeSwitch'\n                  onClick={() => {\n                    var changeValue = this.state.info.type === 'event' ?\n                      'date' : 'event';\n                    this.setState({\n                      info: {\n                        ...this.state.info,\n                        type: changeValue,\n                        startDate: ['--', '--'],\n                        endDate: ['--', '--'],\n                      }\n                    })\n                  }}>\n                  {this.state.info.type}\n                </button>\n                <span className='startSpan start'>\n                  <span className='s' onMouseDown={(ev) => {\n                    this.timeDrag(ev, 's', 'start');\n                  }}>{\n                    this.state.info.type === 'event' ?\n                      amPmFormat(this.state.info.startDate[0]) :\n                      this.state.info.startDate[0]\n                  }</span>\n                  <span className='m'>{\n                    this.state.info.type === 'event' ? ':' : '/'\n                  }</span>\n                  <span \n                    className='e' \n                    onMouseDown={(ev) => {\n                      this.timeDrag(ev, 'e', 'start');\n                    }}\n                  >\n                    {this.state.info.type === 'event' ?\n                      String(this.state.info.startDate[1]).padStart(2, 0) :\n                      this.state.info.startDate[1]\n                    }\n                  </span>\n                  {startExtra && \n                  <span className='startSpan extraInfo'>\n                    {startExtra}\n                  </span>}\n                </span>\n                <span className='startSpan end'>\n                  <span className='s' onMouseDown={(ev) => {\n                    this.timeDrag(ev, 's', 'end');\n                  }}>{this.state.info.endDate[0]}</span>\n                  <span className='m'>{\n                    this.state.info.type === 'event' ? 'h' : '/'\n                  }</span>\n                  <span className='e' onMouseDown={(ev) => {\n                    this.timeDrag(ev, 'e', 'end');\n                  }}>{this.state.info.endDate[1]}</span>\n                  <span>{this.state.info.type === 'event' ?\n                    'm' : ''}</span>\n                  {endExtra && \n                  <span className='startSpan extraInfo'>\n                    {endExtra}\n                  </span>}\n                </span>\n                <input ref={this.infoInput} className='infoSpan' placeholder='notes'\n                  style={{ marginLeft: '5px' }}\n                  value={this.state.info.notes}\n                  onChange={() => {\n                    this.setState({\n                      info: {\n                        ...this.state.info,\n                        notes: this.infoInput.current.value\n                      }\n                    })\n                  }}></input>\n                <button className='button' onClick={() => {\n                  $(this.infoArea.current).show();\n                  window.preventReturn = true;\n                }} title='expand notes to paragraph'>+</button>\n              </div>\n          </div>\n          {!hasTimes ? \n            <span className='info'\n              onClick={(ev) => this.displayOptions(ev)}\n              ref={this.optionsButton}\n              onMouseDown={openDrag}\n              onMouseUp={closeDrag}>\n            </span> :\n            <span className='startDate'\n              onClick={(ev) => this.displayOptions(ev)}\n              ref={this.optionsButton}\n              onMouseDown={(ev) => {\n                this.timeDrag(ev, 's', 'start')\n              }}>\n              {this.dateRender('start')}\n            </span>}\n          <textarea className='editBar' value={this.state.title}\n            onChange={(ev) => this.changeTitle(ev)} ref={this.editBar}\n            spellCheck='false' onClick={(ev) => this.displayOptions(ev, 'hide')}></textarea>\n          {this.state.info.notes.length === 0 &&\n            <div style={{\n              display: 'flex', flexDirection: 'column',\n              marginRight: '5px'\n            }}>\n              {!hasTimes &&\n                !this.state.info.startDate.includes('--') &&\n                <span className='startDate'>\n                  {this.dateRender('start')}\n                </span>}\n              {!this.state.info.endDate.includes('--') &&\n                <span className='endDate'>\n                  {this.dateRender('end')}\n                </span>}\n            </div>\n          }\n        </div>\n        {this.state.info.notes.length > 0 &&\n        <div className='taskInfo'>\n          {this.state.info.notes.length > 0 &&\n            <span className='notesSpan'>\n              {this.state.info.notes.length > 50 ?\n                this.state.info.notes.slice(0, 50) + '...' :\n                this.state.info.notes}\n            </span>}\n          {!hasTimes &&\n            !this.state.info.startDate.includes('--') &&\n            <span className='startDate'>\n              {this.dateRender('start')}\n            </span>}\n          {!this.state.info.endDate.includes('--') &&\n            <span className='endDate'>\n              {this.dateRender('end')}\n            </span>}\n        </div>}\n        <div \n          className={`dropArea ${this.state.subtaskDrop ? 'droppable' : ''}`}\n          onDragEnter={() => {\n            console.log(window.draggedTask.props.id);\n            if (window.draggedTask.props.id === this.props.id) return;\n            this.setState({subtaskDrop: true})\n          }}\n          onDragLeave={() => this.setState({subtaskDrop: false})}\n          onDrop={(ev) => this.dropTask(ev, 'subtask')}\n        ></div>\n        <TaskList \n          ref={this.taskList} \n          subtasks={this.state.subtasks}\n          parent={this} \n        />\n      </li>\n      <div \n        className={`dropArea ${this.state.taskDrop ? 'droppable' : ''}\n          ${completed}`}\n        onDragEnter={() => {\n          console.log(window.draggedTask.props.id);\n          if (window.draggedTask.props.id === this.props.id) return;\n          this.setState({taskDrop: true})\n        }}\n        onDragLeave={() => this.setState({taskDrop: false})}\n        onDrop={(ev) => this.dropTask(ev, 'task')}\n        onDragOver={dragOver}\n      ></div>\n      </>\n    )\n  }\n}","import Task from '../components/Task/Task';\n\nexport function getFrame(task) {\n  let parent = task;\n  while (parent.props.parent) {\n    parent = parent.props.parent;\n  }\n  return parent;\n}\n\nexport function getList(task) {\n  let parent = task;\n  while (parent instanceof Task) {\n    parent = parent.props.parent;\n  }\n  return parent;\n}\n\nexport function stripR(x) {\n  if (x.charAt(0) === 'R') {\n    return x.slice(1);\n  } else {\n    return x;\n  }\n}\n\nexport function consoleLog(x) {\n  console.log(x);\n}\n\nexport function getSubtasks(object) {\n  if (object.subtasksCurrent) return object.subtasksCurrent;\n  else return object.state.subtasks;\n}\n\nexport function dateFormat(title) {\n  // reformat dateString (Day Mon -- ----) to usable title\n  return title.slice(0, 4) +\n    title.slice(8, 10);\n}\n\nexport function getTime(timeList) {\n  let currentTime = timeList[0] * 60 + timeList[1];\n  if (currentTime <= 180) currentTime += 1440;\n  return currentTime;\n}","import React from 'react';\nimport './Frame.css';\nimport * as display from '../../services/display';\nimport * as util from '../../services/util';\nimport List from '../List/List';\nimport $ from 'jquery';\n\nexport default class Frame extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subtasks: props.subtasks, info: props.info,\n      width: display.processWidth(props.info.focused),\n      zoomed: '',\n    };\n    if (props.id === 'river') {\n      this.state.repeats = window.data.settings.repeats;\n      this.state.shownIndex = this.todayIndex();\n    } else if (props.id === 'bank') {\n      this.state.shownIndex = 0;\n    }\n  }\n\n  // find index of today in shownLists\n  todayIndex = () => {\n    const today = new Date();\n    return this.state.subtasks.findIndex(x => {\n      const now = new Date(window.data.tasks[x].title);\n      return now.getDate() === today.getDate() &&\n        now.getMonth() === today.getMonth() &&\n        now.getFullYear() === today.getFullYear()\n    })\n  }\n\n  // create a new list\n  addList = (id) => {\n    // add a new list\n    var title;\n    if (this.props.id === 'river') {\n      const lastDate = new Date(\n        window.data.tasks[this.state.subtasks[this.state.subtasks.length - 1]].title);\n      lastDate.setDate(lastDate.getDate() + 1);\n      title = lastDate.toDateString();\n    } else {\n      title = '';\n    }\n\n    const subtasks = this.state.subtasks;\n    if (!id) id = String(new Date().getTime());\n    else id = String(id);\n    window.data.tasks[id] = {\n      title: title, subtasks: [], info: {}\n    }\n    subtasks.push(id);\n    this.setState({subtasks: subtasks});\n    setTimeout(() => {\n      this.frames[this.frames.length - 1].current.listInput.current.focus();\n    }, 100);\n  }\n\n  addLists = () => {\n    if (this.props.id === 'river') {\n      const id = new Date().getTime();\n      for (let i = 0; i < 7; i ++) {\n        this.addList(String(id + i));\n      }\n    } else {\n      this.addList();\n    }\n  }\n\n  changeIndex = async (val, set) => {\n    var newIndex;\n    if (set === true) {\n      newIndex = val;\n    } else {\n      newIndex = this.state.info.index + val;\n    }\n    if (!this.frame) return;\n\n    const finish = () => {\n      const children = $(this.frame.current).children();\n      if (children[newIndex]) {\n        children[newIndex].scrollIntoView();\n      }\n    }\n\n    this.setState({\n      info: {...this.state.info, index: newIndex}\n    }, finish);\n  }\n\n  updatePosition = () => {\n    if (this.state.focused === 'focused') return;\n    if (this.props.id !== 'river') return;\n    if (this.scrollPos === undefined) this.scrollPos = \n      Math.floor($(this.frameContainer.current).scrollLeft() / 300) * 300;\n    let position = $(this.frameContainer.current).scrollLeft();\n    if (position < 0) position = 0;\n    if (Math.abs(position - this.scrollPos) > 300) {\n      this.scrollPos = Math.floor(position / 300) * 300;\n      // this.setState({ index: this.state.shownIndex + \n      //   Math.floor(scrollPos / 300) });\n      this.setState({ info: \n        {\n          ...this.state.info, \n          index: this.state.shownIndex + Math.floor(this.scrollPos / 300)\n        }\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.updatePosition();\n  }\n\n  render() {\n    var resizeCheck = () => {\n      if (this.state.width !== display.processWidth(this.state.info.focused)) {\n        this.setState({ width: display.processWidth(this.state.info.focused) });\n      }\n    }\n    let endIndex = this.state.info.index + this.state.width;\n    this.frames = [];\n    window.addEventListener('resize', resizeCheck);\n    const shownLists = this.state.subtasks.slice(\n      this.state.shownIndex\n    );\n    this.frame = React.createRef();\n    this.frameContainer = React.createRef();\n    return (\n      <div className={`frameContainer \n        ${this.state.info.focused} ${this.state.zoomed} ${this.props.id}`}\n        onScroll={this.updatePosition} ref={this.frameContainer}>\n        {this.props.id === 'river' &&\n        this.state.info.focused !== 'focused' &&\n        <div className='monthYear'>\n          <span>{\n            window.data.tasks[this.state.subtasks[this.state.info.index]]\n              .title.slice(4, 8)}</span>\n          <span>{\n            window.data.tasks[this.state.subtasks[this.state.info.index]]\n              .title.slice(11)}</span>\n        </div>}\n        <div id={this.props.id}\n          className={'frame'} ref={this.frame}>\n          {shownLists.map(x => {\n            this.frames.push(React.createRef());\n            const task = window.data.tasks[x];\n            if (this.props.id === 'river') {\n              // render state correctly in original lists\n              return (\n                <List key={x} id={x} title={task.title}\n                  subtasks={task.subtasks} parent={this}\n                  deadlines={this.props.deadlines[task.title]}\n                  startdates={this.props.startdates[task.title]}\n                  repeats={this.state.repeats[util.dateFormat(task.title)\n                    .slice(0, 3)]}\n                  ref={this.frames[this.frames.length - 1]} />\n              )\n            } else {\n              return (\n                <List key={x} id={x} title={task.title}\n                  subtasks={task.subtasks} parent={this}\n                  ref={this.frames[this.frames.length - 1]} />\n              )\n            }\n          })}\n          <button className='changeButton' title='add list or date'\n            onClick={() => this.addLists()}>+</button>\n        </div>\n      </div>\n    );\n  }\n}","import * as display from './display';\nimport * as util from './util';\nimport Task from '../components/Task/Task';\nimport List from '../components/List/List';\nimport TaskList from '../components/TaskList/TaskList';\nimport Frame from '../components/Frame/Frame';\n\nexport function deleteTask() {\n  if (window.selected && window.selected instanceof Task) {\n    window.undoData = localStorage.getItem('data');\n    window.selected.deleteThis();\n  }\n}\n\nexport function newTask(type) {\n  // create new task after window.selected\n  if (!window.selected || window.preventReturn) return;\n\n  const today = new Date();\n  const now = today.getTime();\n  const newTask = String(now);\n  window.data.tasks[newTask] = {\n    info: { complete: '', startDate: '', endDate: '' },\n    title: '',\n    subtasks: [],\n  };\n  window.copiedTask = newTask;\n  pasteTask(type);\n}\n\nexport function selectTask(el, force) {\n  // make this task window.selected\n  if (window.preventSelect) return\n  if (el instanceof TaskList) {\n    return\n  }\n  window.preventSelect = true;\n  setTimeout(function () { window.preventSelect = false }, 100);\n  if (window.selected) {\n    save(window.selected, 'task');\n  }\n  if (window.selected === el && !force) {\n    return;\n  }\n  if (window.selected instanceof Task && window.selected !== el) {\n    window.selected.displayOptions({ target: undefined }, 'hide');\n  }\n  window.selected = el;\n  if (el instanceof Task) {\n    el.editBar.current.focus();\n  } else if (el instanceof List) {\n    el.listInput.current.focus();\n  }\n}\n\nexport function save(task, saveType) {\n  // save the new window.data\n  var saveObject;\n  if (saveType === 'list') {\n    saveObject = task.props.parent;\n  } else {\n    saveObject = task;\n  }\n  var subtasks;\n  if (saveObject.subtasksCurrent) subtasks = saveObject.subtasksCurrent;\n  else subtasks = saveObject.state.subtasks;\n  try {\n    window.data.tasks[util.stripR(saveObject.props.id)] = {\n      title: saveObject.state.title,\n      info: saveObject.state.info, subtasks: subtasks\n    };\n  } catch (err) {\n    return;\n  }\n  localStorage.setItem('data', JSON.stringify(window.data));\n}\n\nexport function undo() {\n  localStorage.setItem('data', window.undoData);\n  setTimeout(() => window.location.reload(), 500);\n}\n\nexport function saveSetting(setting, value) {\n  window.data.settings[setting] = value;\n  localStorage.setItem('data', JSON.stringify(window.data));\n}\n\nexport function cutTask() {\n  if (!window.selected || window.selected instanceof List) return;\n  copyTask();\n  window.selected.deleteThis(false);\n  window.undoData = localStorage.getItem('data');\n}\n\nexport function copyTask(mirror) {\n  if (!window.selected || window.selected instanceof List) return;\n  save(window.selected);\n  if (mirror) {\n    window.copiedTask = window.selected.props.id;\n  } else {\n    // only copy window.data\n    const today = new Date();\n    const now = today.getTime();\n    const newTask = String(now);\n    window.data.tasks[newTask] = { ...window.data.tasks[util.stripR(window.selected.props.id)] };\n    window.copiedTask = newTask;\n  }\n}\n\nexport function pasteTask(type) {\n  if (!window.selected || !window.copiedTask) return;\n  window.undoData = localStorage.getItem('data');\n  if (window.selected instanceof List || type === 'task') {\n    const subtasks = window.selected.state.subtasks;\n    subtasks.splice(0, 0, window.copiedTask);\n    window.selected.setState({ subtasks: subtasks });\n    save(window.selected, 'task');\n  } else if (window.selected instanceof Task || type === 'list') {\n    const subtasks = window.selected.state.parent.state.subtasks;\n    const insertIndex = subtasks.findIndex(x => x === window.selected.props.id) + 1;\n    subtasks.splice(insertIndex, 0, window.copiedTask);\n    window.selected.state.parent.setState({ subtasks: subtasks });\n    save(window.selected, 'list');\n  }\n}\n\nexport function indentTask(unindent) {\n  // umm fix sometime\n  if (!window.selected) return;\n  const lastSelected = window.selected;\n  save(window.selected);\n  const subtasks =\n    window.selected.props.parent.taskList.current.subtaskObjects;\n  const here = subtasks\n    .findIndex(x => \n    util.stripR(x.current.props.id) === util.stripR(window.selected.props.id));\n    if (unindent !== true) {\n    if (here === 0) return;\n    const taskAbove = subtasks[here - 1].current;\n    const theseSubtasks = util.getSubtasks(taskAbove);\n    theseSubtasks.push(window.selected.props.id);\n    const previousSubtasks = util.getSubtasks(window.selected.props.parent);\n    previousSubtasks.splice(here, 1);\n        taskAbove.setState( { subtasks: theseSubtasks });\n        lastSelected.props.parent.setState({ subtasks: previousSubtasks });\n        save(taskAbove);\n        save(lastSelected.props.parent);\n      } else {\n    if (window.selected.props.parent.props.parent instanceof Frame) return;\n    const subtasks = window.selected.props.parent.props.parent\n      .taskList.current.subtaskObjects;\n    const here = subtasks.findIndex(\n      x => x.current.props.id === window.selected.props.parent.props.id);\n    const theseSubtasks = window.selected.props.parent.props.parent.state.subtasks;\n    theseSubtasks.splice(here + 1, 0, window.selected.props.id);\n        window.selected.props.parent.props.parent.setState({ subtasks: theseSubtasks });\n    save(window.selected.props.parent.props.parent);\n    const parentSubtasks = util.getSubtasks(lastSelected.props.parent);\n    parentSubtasks.splice(parentSubtasks.findIndex(x => \n      x === lastSelected.props.id), 1);\n    lastSelected.props.parent.setState({ subtasks: parentSubtasks });\n    save(lastSelected.props.parent);\n  }\n}\n\nexport function moveTask(direction) {\n  if (!window.selected) return;\n  var subtasks;\n  if (window.selected.props.parent.subtasksCurrent) {\n    subtasks = window.selected.props.parent.subtasksCurrent.concat();\n  } else {\n    subtasks = window.selected.props.parent.state.subtasks;\n  }\n  let selectedPlace =\n    subtasks.findIndex(x => x === window.selected.props.id);\n  if (selectedPlace === 0 && direction === -1) return;\n  else if (selectedPlace === subtasks.length\n    && direction === 1) return;\n  var subtasksChopped;\n  if (direction === -1) {\n    subtasksChopped = subtasks.slice(0, selectedPlace).reverse();\n  } else {\n    subtasksChopped = subtasks.slice(selectedPlace + 1);\n  }\n  var insertPlace;\n  if (window.data.settings.hideComplete === 'hideComplete') {\n    insertPlace = (subtasksChopped.findIndex(x =>\n      window.data.tasks[util.stripR(x)].info.complete !== 'complete') + 1) * direction;\n  } else {\n    insertPlace = 1 * direction;\n  }\n  const spliceTask = subtasks.splice(selectedPlace, 1)[0];\n  subtasks.splice(selectedPlace + insertPlace, 0, spliceTask);\n  window.selected.props.parent.setState({ subtasks: subtasks });\n  save(window.selected.props.parent, 'task');\n}\n\nexport function listEdit(type) {\n  if (!window.selected) {\n    alert('select a list');\n    return;\n  }\n  if (type === 'migrate' && util.getFrame(window.selected).props.id === 'bank') {\n    alert('select a date');\n    return;\n  }\n  var incompleteTasks = [];\n  var subtasksCurrent = util.getList(window.selected).subtasksCurrent;\n  function addIncomplete(task) {\n    for (let x of task.taskList.current.subtaskObjects) {\n      addIncomplete(x.current);\n      if (x.current.state.info.complete !== 'complete') {\n        if (type === 'clear') {\n          x.current.toggleComplete();\n          x.current.displayOptions({target: undefined}, 'hide');\n          save(x.current);\n        } else if (type === 'migrate' && \n          x.current.props.id.charAt(0) !== 'R') {\n          incompleteTasks.push(x.current.props.id);\n          subtasksCurrent.splice(subtasksCurrent\n            .findIndex(y => y === x.current.props.id), 1);\n        }\n      }\n    }\n  }\n  addIncomplete(util.getList(window.selected));\n  if (type === 'migrate') {\n    const tomorrow = new Date(util.getList(window.selected).state.title);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    util.getList(window.selected).setState({\n      subtasks: subtasksCurrent\n    });\n    save(util.getList(window.selected));\n    display.searchDate(tomorrow.toDateString());\n    setTimeout(() => {\n      window.selected.setState(\n        { subtasks: window.selected.subtasksCurrent.concat(incompleteTasks) });\n      save(window.selected);\n    }, 500);\n  }\n}","import $ from 'jquery';\nimport * as edit from './edit';\nimport * as util from './util';\nimport Task from '../components/Task/Task';\n\nexport function checkTimes() {\n  const today = new Date();\n  const now = [today.getHours(), today.getMinutes()];\n  const dateString = today.toDateString();\n  const list = window.data.tasks[Object.keys(window.data.tasks)\n    .find(x => window.data.tasks[x].title === dateString)];\n  if (!list) return;\n  const todayList = list.subtasks;\n  for (let task of todayList) {\n    const taskEntry = window.data.tasks[util.stripR(task)];\n    if (taskEntry.info.type === 'event' &&\n      taskEntry.info.complete !== 'complete' &&\n      !taskEntry.info.startDate.includes('--')) {\n      if (\n        taskEntry.info.startDate[0] === now[0] &&\n        taskEntry.info.startDate[1] === now[1]\n      ) {\n        Notification.requestPermission();\n        new Notification('Event: ' + taskEntry.title);\n        break;\n      } else {\n        const newDate = new Date();\n        newDate.setHours(taskEntry.info.startDate[0]);\n        newDate.setMinutes(taskEntry.info.startDate[1]);\n        newDate.setMinutes(newDate.getMinutes() - 15);\n        if (\n          taskEntry.info.type === 'event' && \n          newDate.getHours() === now[0] &&\n          newDate.getMinutes() === now[1]\n        ) {\n          Notification.requestPermission();\n          new Notification('in 15: ' + taskEntry.title);\n        }\n      }\n    }\n  }\n}\n\nexport function switchView(direction) {\n  if (!window.selected) return;\n  let parent = window.selected;\n  while (parent instanceof Task) {\n    parent = parent.props.parent;\n  }\n  parent.props.parent.changeIndex(direction);\n  updateAllSizes();\n}\n\nexport function toggleMode() {\n  if (window.data.settings.mode === 'night') {\n    window.data.settings.mode = 'day';\n  } else {\n    window.data.settings.mode = 'night';\n  }\n  setTheme(window.data.settings.theme);\n  localStorage.setItem('data', JSON.stringify(window.data));\n}\n\nexport function toggleSounds() {\n  if (window.data.settings.sounds === 'false') {\n    window.data.settings.sounds = 'true';\n    alert('sounds on');\n  } else {\n    window.data.settings.sounds = 'false';\n    alert('sounds off');\n  }\n}\n\nexport function focus(set) {\n  var focusSet;\n  if (set !== undefined) {\n    focusSet = set;\n  } else {\n    if (window.app.current.state.bank.current.state.info.focused === 'focused') {\n      focusSet = '';\n    } else {\n      focusSet = 'focused';\n    }\n  }\n  if (window.selected) {\n    // set the index of the focused list to the window.selected list\n    let focusView = window.selected\n    while (focusView instanceof Task) {\n      focusView = focusView.props.parent;\n    }\n    focusView.props.parent.changeIndex(focusView.props.parent.frames\n      .findIndex(x => x.current.props.id === focusView.props.id));\n  }\n  window.app.current.state.bank.current.setState(prevState => (\n    {\n      info: {\n        ...prevState.info,\n        focused: focusSet,\n      },\n      width: processWidth(focusSet)\n    }));\n  window.app.current.state.river.current.setState(prevState => (\n    {\n      info: {\n        ...prevState.info,\n        focused: focusSet,\n      },\n      width: processWidth(focusSet),\n    }));\n  edit.saveSetting('focused', focusSet);\n  updateAllSizes();\n}\n\nexport function updateAllSizes() {\n  function update(list) {\n    if (list.current instanceof Task) { list.current.updateHeight(); }\n    for (let task of list.current.taskList.current.subtaskObjects) {\n      update(task);\n    }\n  }\n  const riverLists = window.app.current.state.river.current.frames;\n  const bankLists = window.app.current.state.bank.current.frames;\n  for (let list of riverLists.concat(bankLists)) {\n    update(list);\n  }\n}\n\nexport function setTheme(theme) {\n  const newTheme = window.themes[theme + '-' +\n    window.data.settings.mode];\n  for (let key of Object.keys(newTheme)) {\n    document.documentElement.style.setProperty(\n      key, newTheme[key]\n    );\n  }\n  window.data.settings.theme = theme;\n  localStorage.setItem('data', JSON.stringify(window.data));\n  setTimeout(updateAllSizes, 100);\n}\n\nexport function displayTable() {\n  if (window.app.current.state.displayTable === 'none' && window.selected) {\n    window.app.current.setState({displayTable: 'true'});\n  } else {\n    window.app.current.setState({displayTable: 'none'});\n  }\n}\n\nexport function playSound(sound) {\n  if (window.data.settings.sounds === 'true') {\n    sound.play();\n  }\n}\n\nexport function processWidth(focused) {\n  var width;\n  if (focused !== 'focused') {\n    width = Math.floor(window.innerWidth / 250);\n    $(':root').css('--frameWidth',\n      ((window.innerWidth - 40) / width) + 'px');\n  } else {\n    // focus mode\n    width = 1;\n    $(':root').css('--frameWidth', 'calc(100% - 24px)');\n  }\n  return width;\n}\n\nexport function goToToday() {\n  searchDate(new Date().toDateString());\n}\n\nexport function searchDate(text, type) {\n  setTimeout(() => {\n    window.app.current.statusBar.current.search({ target: { value: text } });\n    window.app.current.statusBar.current.goToFirst();\n  }, 100);\n}\n\nexport function zoom() {\n  // zoom everything upwards\n  var zoomedSetting;\n  if (window.app.current.state.zoomed === 'zoomed') {\n    zoomedSetting = '';\n  } else {\n    zoomedSetting = 'zoomed';\n    if (!window.selected) { return }; // no zoomie\n  }\n  var zoomFrame = util.getFrame(window.selected);\n  zoomFrame.setState({ zoomed: zoomedSetting });\n  window.app.current.setState({ zoomed: zoomedSetting });\n  if (!window.zoomed) {\n    // unzoom\n    window.zoomed = window.selected;\n  } else {\n    window.zoomed = undefined;\n  }\n  setTimeout(\n    updateAllSizes, 200\n  )\n}","import * as display from './display';\nimport * as edit from './edit';\nimport $ from 'jquery';\nimport Task from '../components/Task/Task';\nimport List from '../components/List/List';\n\nexport function keyComms(ev) {\n  if (!ev.ctrlKey) {\n    if (ev.key === 'Enter' && !window.preventReturn) {\n      ev.preventDefault();\n      if (ev.shiftKey) {\n        edit.newTask('task');\n      } else {\n        edit.newTask();\n      }\n      return;\n    } else if (ev.key === 'Escape' && !window.preventReturn) {\n      ev.preventDefault();\n      if (window.app.current.state.displayTable !== 'none') display.displayTable();\n      document.activeElement.blur();\n      if (window.selected) {\n        edit.save(window.selected, 'task');\n        if (window.selected instanceof Task &&\n          window.selected.state.displayOptions === 'show') {\n          window.selected.displayOptions('hide');\n        } else {\n          window.selected = undefined;\n        }\n      }\n      return;\n    }\n  }\n  if (ev.ctrlKey && ev.shiftKey) {\n    switch (ev.key) {\n      case 'V':\n        edit.pasteTask('task');\n        break;\n      case 'N':\n        edit.newTask('task');\n        break;\n      case 'F':\n        ev.preventDefault();\n        display.zoom();\n        break;\n      case 'C':\n        // mirror task\n        edit.copyTask(true);\n        break;\n      default:\n        break;\n    }\n  } else if (ev.ctrlKey) {\n    switch (ev.key) {\n      case 'x':\n        ev.preventDefault();\n        edit.cutTask();\n        break;\n      case 'c':\n        ev.preventDefault();\n        edit.copyTask();\n        break;\n      case 'v':\n        ev.preventDefault();\n        edit.pasteTask();\n        break;\n      case 'n':\n        ev.preventDefault();\n        edit.newTask();\n        break;\n      case ']':\n        ev.preventDefault();\n        edit.indentTask();\n        break;\n      case '[':\n        ev.preventDefault();\n        edit.indentTask(true);\n        break;\n      case 'f':\n        ev.preventDefault();\n        display.focus();\n        break;\n      case 'z':\n        ev.preventDefault();\n        edit.undo();\n        break;\n      case 'r':\n        ev.preventDefault();\n        display.updateAllSizes();\n        break;\n      case 'Backspace':\n        ev.preventDefault();\n        if (window.selected && window.selected instanceof Task) {\n          window.selected.deleteThis();\n        } else if (window.selected && window.selected instanceof List &&\n          window.selected.props.parent.props.id === 'bank') {\n          const confirm = window.confirm('delete this list?');\n          if (confirm) {\n            const subtasks = window.selected.props.parent.state.subtasks;\n            window.undoData = localStorage.getItem('data');\n            subtasks.splice(\n              subtasks.findIndex(x => x === window.selected.props.id), 1);\n            window.selected.props.parent.setState({ subtasks: subtasks });\n          }\n        }\n        break;\n      case 'w':\n        ev.preventDefault();\n        if (window.selected.props.parent.props.id !== 'river') {\n          edit.moveTask(-1);\n        }\n        break;\n      case 's':\n        ev.preventDefault();\n        if (window.selected.props.parent.props.id !== 'river') {\n          edit.moveTask(1);\n        }\n        break;\n      case 'a':\n        ev.preventDefault();\n        display.switchView(-1);\n        break;\n      case 'd':\n        ev.preventDefault();\n        display.switchView(1);\n        break;\n      case 'h':\n        ev.preventDefault();\n        window.app.current.toggleComplete();\n        break;\n      case 't':\n        ev.preventDefault();\n        if (window.app.current.state.zoomed === 'zoomed') return;\n        display.goToToday();\n        break;\n      case '1':\n        ev.preventDefault();\n        if (window.selected instanceof Task) {\n          window.selected.toggleComplete(false);\n        }\n        break;\n      case '2':\n        ev.preventDefault();\n        if (window.selected instanceof Task) {\n          window.selected.toggleImportant(false);\n        }\n        break;\n      case '3':\n        ev.preventDefault();\n        if (window.selected instanceof Task) {\n          window.selected.toggleMaybe(false);\n        }\n        break;\n      case 'i':\n        ev.preventDefault();\n        if (window.selected && window.selected instanceof Task) {\n          window.selected.displayOptions({ target: $('<p></p>') });\n          if (window.selected.state.displayOptions === 'hide') {\n            window.selected.editBar.current.focus();\n          }\n        };\n        break;\n      default:\n        break;\n    }\n  }\n}","import $ from 'jquery';\nimport * as util from './util';\n\nexport function reset() {\n  var accept = window.confirm('Are you sure you want to reset all window.data?');\n  if (accept) {\n    window.data = window.resetData;\n    localStorage.setItem('data', JSON.stringify(window.resetData));\n    setTimeout(function () { window.location.reload() }, 200);\n  }\n}\n\nexport function restore() {\n  window.preventReturn = true;\n  const textarea = $('<textarea class=\"restore\"></textarea>');\n  $('#root').append(textarea);\n  textarea.on('keydown', ev => {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n      window.data = JSON.parse(textarea.val());\n      localStorage.setItem('data', JSON.stringify(window.data));\n      window.location.reload();\n    } else if (ev.key === 'Escape') {\n      textarea.remove();\n      setTimeout(() => window.preventReturn = false, 100);\n    }\n  })\n}\n\nexport function backup() {\n  alert('open console to copy window.data (file download option will be added soon)');\n  util.consoleLog(JSON.stringify(window.data));\n}\n\nexport function clean() {\n  function removeDeadline(list, id) {\n    for (let x of Object.keys(list)) {\n      // switch it out of things\n      let deadlineList = list[x];\n      if (deadlineList.includes(id)) {\n        deadlineList =\n          deadlineList.splice(deadlineList.findIndex(x => x === id), 1);\n      }\n    }\n  }\n  // clean out tasks which aren't in lists\n  for (let id of Object.keys(window.data.tasks).filter(x =>\n    !['river', 'bank'].includes(x))) {\n    let found = false;\n    for (let containerId of Object.keys(window.data.tasks)) {\n      if (window.data.tasks[containerId].subtasks.map(x =>\n        util.stripR(x)).includes(id)) {\n        found = true;\n        break;\n      }\n    }\n    if (found === false) {\n      delete window.data.tasks[id];\n      removeDeadline(window.data.settings.deadlines, id);\n      removeDeadline(window.data.settings.startdates, id);\n    }\n  }\n\n  // clean out empty dates in the river view\n  const dates = window.data.tasks['river'].subtasks;\n  let i = dates.length - 1;\n  const today = new Date().toDateString();\n\n  while(window.data.tasks[dates[i]].subtasks.length === 0) {\n    i --;\n    const now = window.data.tasks[dates[i]].title;\n    if (i == 0 || now === today) break;\n  }\n  if (i < dates.length - 1) {\n    window.data.tasks['river'].subtasks = dates.slice(0, i + 1);\n  }\n}","export default __webpack_public_path__ + \"static/media/pop.c3c0b051.mp3\";","export default __webpack_public_path__ + \"static/media/timer.77f48c79.mp3\";","export default __webpack_public_path__ + \"static/media/start.63a8d98e.mp3\";","import React from 'react';\nimport './StatusBar.css';\nimport timerSnd from '../../assets/snd/timer.mp3';\nimport startSnd from '../../assets/snd/start.mp3';\nimport * as display from '../../services/display';\nimport * as edit from '../../services/edit';\nimport * as util from '../../services/util';\nimport * as saving from '../../services/saving';\nimport $ from 'jquery';\n\nexport default class StatusBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { searchString: '', foundTasks: {} };\n  }\n  search(ev) {\n    if (this.state.searchString === '') {\n      this.searches = { ...window.data.tasks };\n    }\n    this.setState({ searchString: ev.target.value });\n    for (let x of Object.keys(this.searches)) {\n      if (!new RegExp(this.state.searchString, 'i').test(\n        this.searches[x].title) ||\n        this.searches[x].info.complete === 'complete') {\n        delete this.searches[x];\n      }\n    }\n    // id : {title, subtasks, info}\n    this.setState({ foundTasks: this.searches });\n  }\n  goToSearch(id) {\n    window.preventReturn = true;\n    window.preventSelect = true;\n    var idList = [id];\n    function buildParents(otherId) {\n      for (let x of Object.keys(window.data.tasks)) {\n        if (window.data.tasks[util.stripR(x)].subtasks.includes(otherId)) {\n          idList.splice(0, 0, x);\n          buildParents(x);\n          return;\n        }\n      }\n    }\n    buildParents(id);\n    const frame = window.app.current.state[idList[0]].current;\n    const listIndex = frame.state.subtasks.slice(frame.state.shownIndex)\n      .findIndex(x => x === idList[1]);\n    frame.changeIndex(frame.state.shownIndex + listIndex, true);\n    this.setState({ searchString: '', foundTasks: {} });\n    \n    setTimeout(() => {\n      const list = frame.frames[listIndex].current;\n      let foundTask = list;\n      let i = 2;\n      while (idList.length > i) {\n        // find in tasks starting at index 2 (if it's there)\n        let taskId = idList[i];\n        let taskIndex;\n        if (foundTask.subtasksCurrent &&\n          foundTask.subtasksCurrent.length > 0) {\n          taskIndex = foundTask.subtasksCurrent\n            .findIndex(x => x === taskId);\n        } else {\n          taskIndex = foundTask.state.subtasks\n            .findIndex(x => x === taskId);\n        }\n        foundTask = foundTask.taskList.current\n          .subtaskObjects[taskIndex].current;\n        i++;\n      }\n      window.preventSelect = false;\n      edit.selectTask(foundTask);\n      \n      // go through IDs and find the trace paths\n      setTimeout(() => {\n        window.preventReturn = false;\n      }, 100);\n    }, 100);\n  }\n  componentDidMount() {\n    setTimeout(display.goToToday, 200);\n  }\n  goToFirst() {\n    this.goToSearch($($(this.searchResults.current)\n      .children()[0]).attr('value'));\n  }\n  tutorial = () => {\n    this.setState({ tutorial: true });\n    const myFunc = (ev) => {\n      if (!$(ev.target).hasClass('tutorialShow')) {\n        this.setState({ tutorial: false });\n        $(window).off('click', myFunc);\n      }\n    }\n    setTimeout(() => {\n      $(window).on('click', myFunc)\n    }, 100);\n  }\n  render() {\n    this.search = this.search.bind(this);\n    this.goToSearch = this.goToSearch.bind(this);\n    this.goToFirst = this.goToFirst.bind(this);\n    this.searchResults = React.createRef();\n    this.searchBar = React.createRef();\n    this.options = React.createRef();\n    this.functions = React.createRef();\n    this.move = React.createRef();\n    this.upcoming = React.createRef();\n    let deadlineItems = Object.keys(this.props.deadlines).filter(\n      x => new Date(x).getTime() >= new Date().getTime()\n    )\n    deadlineItems = deadlineItems.map(x => (\n      this.props.deadlines[x].map(y => [x, y])\n    )).flat().filter(x => x.length > 0);\n    this.functionsDict = {\n      'newTask': edit.newTask,\n      'newSubtask': () => edit.newTask(\"task\"),\n      'cutTask': edit.cutTask,\n      'copyTask': edit.copyTask,\n      'copyTaskTrue': () => edit.copyTask(true),\n      'pasteTask': edit.pasteTask,\n      'pasteTaskTask': () => edit.pasteTask('task'),\n      'deleteTask': edit.deleteTask,\n      'moveTaskUp': () => edit.moveTask(-1),\n      'moveTaskDown': () => edit.moveTask(1),\n      'switchView': () => display.switchView(1),\n      'listEditMigrate': () => edit.listEdit('migrate'),\n      'listEditClear': () => edit.listEdit('clear'),\n      'displayTable': display.displayTable,\n      'focus': display.focus,\n      'zoom': display.zoom,\n      'undo': edit.undo,\n      'toggleComplete': () => window.app.current.toggleComplete(),\n      'backup': saving.backup,\n      'restore': saving.restore,\n      'reset': saving.reset,\n      'toggleSounds': display.toggleSounds,\n      'toggleMode': display.toggleMode,\n      'setThemeSpace': () => display.setTheme(\"space\"),\n      'setThemeSky': () => display.setTheme(\"sky\"),\n      'setThemeWater': () => display.setTheme(\"water\"),\n      'setThemeEarth': () => display.setTheme(\"earth\"),\n      'setThemeFire': () => display.setTheme(\"fire\"),\n      'indent': edit.indentTask,\n      'unindent': () => edit.indentTask(true),\n      'togglePast': () => {\n        if (window.app.current.state.river.current.state.shownIndex !== 0) {\n          window.app.current.state.river.current.setState({\n            shownIndex: 0\n          });\n        } else {\n          window.app.current.state.river.current.setState({\n            shownIndex: window.app.current.state.river.current.todayIndex()\n          });\n        }\n        display.goToToday();\n      } \n    }\n    return (\n      <>\n      <div className='statusBar'>\n        <span className='title'><span className='r'>River</span>\n          <span className='b'>Bank</span></span>\n        <div style={{\n          display: 'flex', flexDirection: 'column',\n          position: 'relative'\n        }}>\n          <input\n            ref={this.searchBar}\n            className='searchBar' onChange={(ev) => this.search(ev)}\n            value={this.state.searchString}\n            onKeyDown={(ev) => {\n              if (ev.key === 'Backspace') {\n                ev.preventDefault();\n                this.setState({ searchString: '', foundTasks: {} });\n              } else if (ev.key === 'Enter') {\n                ev.preventDefault();\n                if ($(this.searchResults.current).children().length > 0) {\n                  this.goToFirst();\n                }\n              }\n            }}\n            placeholder='search'></input>\n          {this.state.searchString.length > 0 &&\n            <select ref={this.searchResults}\n              style={{ width: '5em' }}\n              onChange={() => {\n                this.goToSearch(this.searchResults.current.value)\n              }}>\n              {Object.keys(this.state.foundTasks).map(x =>\n                <option key={x} value={x}>\n                  {this.state.foundTasks[x].title}\n                </option>)}\n            </select>\n          }\n        </div>\n        <Timer />\n        <div className='buttonBar nowrap'>\n          <select defaultValue='' ref={this.functions} style={{ width: '35px' }}\n            onChange={() => {\n              this.functionsDict[this.functions.current.value].call();\n              this.functions.current.value = '';\n            }}>\n            <option value=\"\" disabled hidden>edit</option>\n            <option value='newTask'>\n              new task (return)</option>\n            <option value='newSubtask'>\n              new subtask (shift-return)</option>\n            <option value='cutTask'>\n              cut (ctrl-x)</option>\n            <option value='copyTask'>\n              copy (ctrl-c)</option>\n            <option value='copyTaskTrue'>\n              mirror (ctrl-shift-C)</option>\n            <option value='pasteTask'>\n              paste (ctrl-v)</option>\n            <option value='pasteTaskTask'>\n              paste as subtask (ctrl-shift-V)</option>\n            <option value=\"deleteTask\">\n              delete (ctrl-delete)</option>\n          </select>\n          <select defaultValue='' ref={this.move} style={{ width: '45px' }}\n            onChange={() => {\n              this.functionsDict[this.move.current.value].call();\n              this.move.current.value = '';\n            }}>\n            <option value=\"\" disabled hidden>move</option>\n            <option value=\"moveTaskUp\">\n              move up (ctrl-w)</option>\n            <option value=\"moveTaskDown\">\n              move down (ctrl-s)</option>\n            <option value=\"indent\">\n              indent (ctrl-])</option>\n            <option value='unindent'>\n              unindent (ctrl-[)</option>\n            <option value=\"switchView\">\n              following week/lists (ctrl-d)</option>\n            <option value=\"switchView(-1)\">\n              previous week/lists (ctrl-a)</option>\n            <option value=\"listEditMigrate\">\n              migrate date</option>\n            <option value=\"listEditClear\">\n              clear list</option>\n            <option value=\"displayTable\">\n              display as table</option>\n            <option value=\"togglePast\">\n              show/hide past dates</option>\n          </select>\n          <select defaultValue='' ref={this.options} onChange={() => {\n            this.functionsDict[this.options.current.value].call();\n            this.options.current.value = '';\n          }}\n            style={{ width: '60px' }}>\n            <option value=\"\" disabled hidden>settings</option>\n            <option value='focus'>focus on list (ctrl-f)</option>\n            <option value='zoom'>focus on view (ctrl-shift-F)</option>\n            <option value='toggleComplete'>\n              show/hide complete (ctrl-h)</option>\n            <option value='undo'>undo (ctrl-z)</option>\n            <option value='backup'>backup</option>\n            <option value='restore'>restore</option>\n            <option value='reset'>reset</option>\n            <option value='toggleSounds'>toggle sounds</option>\n            <option value='toggleMode'>toggle day/night</option>\n            <option value='setThemeSpace'>theme: space</option>\n            <option value='setThemeSky'>theme: sky</option>\n            <option value='setThemeWater'>theme: water</option>\n            <option value='setThemeEarth'>theme: earth</option>\n            <option value='setThemeFire'>theme: fire</option>\n          </select>\n          <ListMenu />\n          <select defaultValue='' ref={this.upcoming} onChange={() => {\n            this.goToSearch(this.upcoming.current.value);\n            this.upcoming.current.value = '';\n          }} style={{width: '75px'}}>\n            <option value=\"\" disabled hidden>upcoming</option>\n            {deadlineItems.map(x => (\n              <option value={util.stripR(x[1])}>\n                {x[0].slice(0, x[0].length - 5)}: {\n                window.data.tasks[util.stripR(x[1])].title}\n              </option>\n            ))}\n          </select>\n        </div>\n        <span className='tutorialLink' onClick={this.tutorial}>help</span>\n      </div>\n      {this.state.tutorial && \n        <div className='tutorial tutorialShow'>\n          <iframe src='https://www.youtube.com/embed/AcfqM2exBu0'>\n          </iframe>\n        </div>\n      }\n      </>\n    )\n  }\n}\n\nclass ListMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { bankLists: props.bankLists, riverLists: props.riverLists };\n  }\n  goToList(type) {\n    if (type === 'river') {\n      display.searchDate(this.riverLister.current.value);\n    } else if (type === 'bank') {\n      var parent = window.app.current.state.bank.current;\n      var list = this.bankLister;\n      parent.changeIndex(Number(list.current.value), true);\n    }\n\n    if (type === 'river') {\n      this.riverLister.current.value = '';\n    } else if (type === 'bank') {\n      this.bankLister.current.value = '';\n    }\n  }\n  render() {\n    this.riverLister = React.createRef();\n    this.bankLister = React.createRef();\n    return (\n      <>\n        <select defaultValue='' ref={this.bankLister} onChange={() => this.goToList('bank')}\n          style={{ width: '35px' }}>\n          <option value=\"\" disabled hidden>lists</option>\n          {window.data.tasks['bank'].subtasks.filter(\n            x => window.data.tasks[x].title !== '--')\n            .map((x, index) =>\n              <option key={x} value={index}>{window.data.tasks[x].title}</option>)}\n        </select>\n        <select defaultValue='' ref={this.riverLister} onChange={() => {\n          if (this.riverLister.current.value === 'today') {\n            display.goToToday();\n            this.riverLister.current.value = '';\n          } else {\n            this.goToList('river')\n          }\n        }}\n          style={{ width: '45px' }}>\n          <option value=\"\" disabled hidden>dates</option>\n          <option value='today'>today (ctrl-t)</option>\n          {window.data.tasks['river'].subtasks.filter(x => new Date(\n            window.data.tasks[x].title).getTime() >=\n            new Date().getTime())\n            .map((x) =>\n              <option key={x} value={window.data.tasks[x].title}>\n                {window.data.tasks[x].title}</option>)}\n        </select>\n      </>\n    )\n  }\n}\n\nclass Timer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      seconds: 0,\n      audio: new Audio(timerSnd),\n      start: new Audio(startSnd),\n      startTime: undefined,\n      ended: false,\n    };\n\n  }\n  startTimer(val) {\n    const endTime =\n      new Date(new Date().getTime() + val * 60 * 1000).getTime();\n    this.setState({ endTime: endTime, seconds: val * 60 });\n    display.playSound(this.state.start);\n    this.play();\n  }\n  play(stopwatch, backwards) {\n    Notification.requestPermission();\n    clearInterval(this.interval);\n    this.setState({ ended: false });\n    if (stopwatch === 'stopwatch') {\n      display.playSound(this.state.start);\n      this.interval = setInterval(() => {\n        this.setState({ seconds: this.state.seconds + 1 });\n      }, 1000);\n    } else {\n      this.interval = setInterval(() => {\n        this.setState({\n          seconds: Math.ceil((this.state.endTime -\n            new Date().getTime()) / 1000)\n        });\n        if (this.state.seconds <= 0 && this.state.ended === false) {\n          this.end();\n        }\n      }, 1000);\n    }\n  }\n  end() {\n    this.setState({ play: true, ended: true });\n    display.playSound(this.state.audio);\n    this.options.current.value = '';\n    new Notification('timer complete');\n  }\n  playPause() {\n    clearInterval(this.interval);\n    this.setState({ seconds: 0 });\n    this.options.current.value = '';\n  }\n  render() {\n    this.startTimer = this.startTimer.bind(this);\n    this.playPause = this.playPause.bind(this);\n    this.play = this.play.bind(this);\n    this.audioRef = React.createRef();\n    this.options = React.createRef();\n    var timeReadout;\n    if (this.state.seconds >= 0) {\n      timeReadout = Math.floor(this.state.seconds / 60) + ':' +\n        String(this.state.seconds -\n          (Math.floor(this.state.seconds / 60) * 60))\n          .padStart(2, '0')\n    } else {\n      if ((this.state.seconds / 60) === Math.floor(this.state.seconds / 60)\n        && this.state.seconds !== 0) {\n        // right on minute\n        timeReadout = '-' +\n          (-1 * (Math.floor(this.state.seconds / 60))) + ':00'\n      } else {\n        timeReadout = '-' +\n          (-1 * (Math.floor(this.state.seconds / 60) + 1)) + ':' +\n          String(60 - (this.state.seconds -\n            (Math.floor(this.state.seconds / 60) * 60)))\n            .padStart(2, '0')\n      }\n    }\n    return (\n      <>\n        <input className='timerBar' readOnly={true}\n          value={timeReadout}></input>\n        <select value='' ref={this.options} onChange={() => {\n          if (this.options.current.value === 'clear') {\n            this.playPause();\n            this.options.current.value = '';\n          } else if (this.options.current.value === 'stopwatch') {\n            this.setState({ seconds: 0 });\n            this.play('stopwatch');\n            this.options.current.value = '';\n          } else {\n            this.startTimer(this.options.current.value);\n            this.options.current.value = '';\n          }\n        }}\n          style={{ width: '45px' }}>\n          <option value=\"\" disabled hidden>timer</option>\n          <option value={'clear'}>--:--</option>\n          <option value={50}>50:00</option>\n          <option value={25}>25:00</option>\n          <option value={15}>15:00</option>\n          <option value={10}>10:00</option>\n          <option value={5}>5:00</option>\n          <option value={'stopwatch'} title='stopwatch'>&infin;</option>\n        </select>\n      </>\n    )\n  }\n}","import React from 'react';\nimport './App.css';\nimport popSnd from '../../assets/snd/pop.mp3';\nimport * as edit from '../../services/edit';\nimport * as display from '../../services/display';\nimport * as util from '../../services/util';\nimport Frame from '../Frame/Frame';\nimport StatusBar from '../StatusBar/StatusBar';\nimport Task from '../Task/Task';\nimport List from '../List/List';\n\n// main app, governs everything\nexport default class App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideComplete: window.data.settings.hideComplete,\n      bank: React.createRef(),\n      river: React.createRef(),\n      theme: window.data.settings.theme,\n      mode: window.data.settings.mode,\n      focused: window.data.settings.focused,\n      popSnd: new Audio(popSnd),\n      zoomed: '',\n      disableSelect: '',\n      contextMenu: React.createRef(),\n      deadlines: window.data.settings.deadlines,\n      startdates: window.data.settings.startdates,\n      displayTable: 'none',\n    };\n  }\n\n  // hide/show completes\n  toggleComplete() {\n    var hideComplete;\n    if (this.state.hideComplete === '') {\n      hideComplete = 'hideComplete';\n    } else {\n      hideComplete = '';\n    }\n    this.setState({ hideComplete: hideComplete });\n    edit.saveSetting('hideComplete', hideComplete);\n    display.updateAllSizes();\n  }\n\n  render() {\n    this.statusBar = React.createRef();\n    return (\n      <>\n        <StatusBar parent={this} ref={this.statusBar} \n          deadlines={this.state.deadlines} \n          startdates={this.state.startdates} />\n        <div className={'container ' + this.state.hideComplete + ' ' +\n          this.state.zoomed + ' ' + this.state.disableSelect}>\n          <Frame id='bank' info={{\n            ...window.data.tasks['bank'].info,\n            focused: window.data.settings.focused\n          }}\n            subtasks={window.data.tasks['bank'].subtasks} ref={this.state.bank} />\n          <Frame id='river' info={{\n            ...window.data.tasks['river'].info,\n            focused: window.data.settings.focused,\n          }}\n            deadlines={this.state.deadlines}\n            startdates={this.state.startdates}\n            subtasks={window.data.tasks['river'].subtasks} ref={this.state.river} />\n        </div>\n        <SelectMenu ref={this.state.contextMenu}/>\n        {window.selected && this.state.displayTable !== 'none' &&\n          <TableDisplay />}\n      </>\n    )\n  }\n}\n\n// extra function menu tacked on after the drag/drop context\nclass SelectMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { display: 'none', top: '0', left: '0' };\n  }\n  render() {\n    this.self = React.createRef();\n    return (\n      <div className='selectMenu' ref={this.self} style={{ display: this.state.display,\n        top: this.state.top, left: this.state.left }}>\n        <p className='centerAlign'><b>edit</b></p>\n        <p onClick={() => edit.newTask()}>\n          new task<span className='rightAlign'>(return)</span></p>\n        <p onClick={() => edit.newTask('task')}>\n          new subtask <span className='rightAlign'>(shift-return)</span></p>\n        <p onClick={() => edit.cutTask()}>\n          cut <span className='rightAlign'>(ctrl-x)</span></p>\n        <p onClick={() => edit.copyTask()}>\n          copy <span className='rightAlign'>(ctrl-c)</span></p>\n        <p onClick={() => edit.copyTask(true)}>\n          mirror <span className='rightAlign'>(ctrl-shift-C)</span></p>\n        <p onClick={() => edit.pasteTask()}>\n          paste <span className='rightAlign'>(ctrl-v)</span></p>\n        <p onClick={() => edit.pasteTask(\"task\")}>\n          paste as subtask (ctrl-shift-V)</p>\n        <p onClick={() => {\n          if (window.selected && window.selected instanceof Task) {\n            window.selected.deleteThis();\n          } else if (window.selected && window.selected instanceof List &&\n            window.selected.props.parent.props.id === 'bank') {\n            const confirm = window.confirm('delete this list?');\n            if (confirm) {\n              const subtasks = window.selected.props.parent.state.subtasks;\n              window.undoData = localStorage.getItem('data');\n              subtasks.splice(\n                subtasks.findIndex(x => x === window.selected.props.id), 1);\n              window.selected.props.parent.setState({ subtasks: subtasks });\n            }\n          }\n        }}>\n          delete <span className='rightAlign'>(ctrl-delete)</span></p>\n        <p  className='centerAlign' style={{marginTop:'5px'}}><b>move</b></p>\n        <p onClick={() => edit.moveTask(1)}>\n          move down <span className='rightAlign'>(ctrl-s)</span></p>\n        <p onClick={() => edit.moveTask(-1)}>\n          move up <span className='rightAlign'>(ctrl-w)</span></p>\n        <p onClick={() => display.switchView(1)}>\n          following week/lists <span className='rightAlign'>(ctrl-d)</span></p>\n        <p onClick={() => display.switchView(-1)}>\n          previous week/lists <span className='rightAlign'>(ctrl-a)</span></p>\n        <p onClick={() => edit.listEdit('migrate')}>\n          migrate date</p>\n        <p onClick={() => edit.listEdit('clear')}>\n          clear list</p>\n        <p onClick={() => display.displayTable()}>\n          display as table</p>\n      </div>\n    )\n  } \n}\n\nclass TableDisplay extends React.Component {\n  render() {\n    return (\n      <table className='table'>\n        <thead></thead>\n        <tbody>\n          {window.data.tasks[util.stripR(window.selected.props.id)].subtasks.map(x => (\n            <tr key={x}>\n              <td>{\n                window.data.tasks[util.stripR(x)].title\n              }</td>\n              {window.data.tasks[x].subtasks.map(y => (\n                <td key={y}>\n                  {window.data.tasks[util.stripR(y)].title\n                  }\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    )\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport $ from 'jquery';\nimport * as display from './services/display';\nimport * as keyComms from './services/keyComms';\nimport * as saving from './services/saving';\nimport * as util from './services/util';\nimport App from './components/App/App.js';\nimport './style.css';\n\nwindow.themes = {\n  'earth-day': {\n    \"--font\": \"var(--fontSize) 'Quicksand', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"300\",\n    \"--bold\": \"400\",\n    \"--background\": \"rgb(218, 221, 216)\",\n    \"--border\": \"rgba(60, 52, 31, 0.3)\",\n    \"--select\": \"rgb(85, 107, 47)\",\n    \"--event\": \"rgba(85, 107, 47, 0.3)\",\n    \"--foreground\": \"rgb(59, 60, 54)\",\n    \"--midground\": \"rgba(59, 60, 54, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(85, 107, 47, 0.5)\",\n    \"--important\": \"rgba(59, 60, 54, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(14, 41, 48, 0.8)\",\n    \"--endDate\": \"rgb(14, 41, 48)\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(59, 60, 54, 0.1)\",\n    \"--river\": \"rgba(85, 107, 47, 0.1)\",\n  },\n  'earth-night': {\n    \"--font\": \"var(--fontSize) 'Quicksand', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"300\",\n    \"--bold\": \"400\",\n    \"--background\": \"rgb(35, 38, 33)\",\n    \"--border\": \"rgba(224, 223, 225, 0.3)\",\n    \"--select\": \"rgb(186, 208, 149)\",\n    \"--event\": \"rgba(186, 208, 149, 0.3)\",\n    \"--foreground\": \"rgb(218, 222, 200)\",\n    \"--midground\": \"rgba(59, 60, 54, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(186, 208, 149, 0.5)\",\n    \"--important\": \"rgba(218, 222, 200, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(85, 107, 47, 0.8)\",\n    \"--endDate\": \"rgb(85, 107, 47)\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(218, 222, 200, 0.1)\",\n    \"--river\": \"rgba(186, 208, 149, 0.1)\",\n  },\n  'fire-day': {\n    \"--font\": \"var(--fontSize) 'Josefin Sans', Cochin, sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--bold\": \"300\",\n    \"--background\": \"rgb(230, 230, 250)\",\n    \"--border\": \"rgba(53, 3, 58, 0.3)\",\n    \"--select\": \"rgb(242, 172, 229)\",\n    \"--event\": \"rgba(251, 217, 253, 0.3)\",\n    \"--foreground\": \"rgb(53, 3, 58)\",\n    \"--midground\": \"rgba(200, 200, 230, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(242, 172, 229, 0.5)\",\n    \"--important\": \"rgba(53, 3, 58, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(226, 156, 210, 0.8)\",\n    \"--endDate\": \"rgb(226, 156, 210)\",\n    \"--headingSize\": \"120%\",\n    \"--lineSpacing\": \"10px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(53, 3, 58, 0.1)\",\n    \"--river\": \"rgba(242, 172, 229, 0.1)\",\n  },\n  'fire-night': {\n    \"--font\": \"var(--fontSize) 'Josefin Sans', Cochin, sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--bold\": \"300\",\n    \"--background\": \"rgb(5, 5, 26)\",\n    \"--border\": \"rgba(212, 112, 162, 0.3)\",\n    \"--select\": \"rgb(183, 104, 162)\",\n    \"--event\": \"rgba(183, 104, 162, 0.3)\",\n    \"--foreground\": \"rgb(248, 197, 252)\",\n    \"--midground\": \"rgba(40, 6, 34, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(183, 104, 162, 0.5)\",\n    \"--important\": \"rgba(248, 197, 252, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(226, 156, 210, 0.8)\",\n    \"--endDate\": \"rgb(226, 156, 210)\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"10px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(248, 197, 252, 0.1)\",\n    \"--river\": \"rgba(183, 104, 162, 0.1)\",\n  },\n  'sky-day': {\n    \"--font\": \"var(--fontSize) 'Pilo Thin', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--bold\": \"300\",\n    \"--background\": \"#E4EDF1\",\n    \"--border\": \"rgba(21, 35, 40, 0.3)\",\n    \"--select\": \"rgb(119, 152, 171)\",\n    \"--event\": \"rgba(119, 152, 171, 0.3)\",\n    \"--foreground\": \"rgb(52, 64, 85)\",\n    \"--midground\": \"rgba(128, 128, 128, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(119, 152, 171, 0.5)\",\n    \"--important\": \"rgba(52, 64, 85, 0.2)\",\n    \"--maybe\": \"rgba(29, 41, 81, 0.5)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(29, 41, 81, 0.8)\",\n    \"--endDate\": \"rgb(29, 41, 81)\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"3em\",\n    \"--bank\": \"rgba(52, 64, 85, 0.1)\",\n    \"--river\": \"rgba(119, 152, 171, 0.1)\",\n  },\n  'sky-night': {\n    \"--font\": \"var(--fontSize) 'Pilo Thin', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--bold\": \"300\",\n    \"--background\": \"rgb(14, 23, 27)\",\n    \"--border\": \"rgba(36, 40, 43, 0.3)\",\n    \"--select\": \"rgb(83, 117, 136)\",\n    \"--event\": \"rgba(59, 75, 84, 0.3)\",\n    \"--foreground\": \"rgb(170, 182, 203)\",\n    \"--midground\": \"rgba(128, 128, 128, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(83, 117, 136, 0.5)\",\n    \"--important\": \"rgba(170, 182, 203, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(173, 185, 225, 0.8)\",\n    \"--endDate\": \"rgb(173, 185, 225)\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"3em\",\n    \"--bank\": \"rgba(170, 182, 203, 0.1)\",\n    \"--river\": \"rgba(83, 117, 136, 0.1)\",\n  },\n  'space-day': {\n    \"--font\": \"var(--fontSize) 'Adam', Cochin, sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"300\",\n    \"--background\": \"rgb(201, 192, 187)\",\n    \"--border\": \"rgba(128, 128, 128, 0.3)\",\n    \"--select\": \"rgb(165, 113, 100)\",\n    \"--event\": \"rgba(165, 113, 100, 0.3)\",\n    \"--foreground\": \"rgba(59, 47, 47)\",\n    \"--midground\": \"rgba(165, 113, 100, 0.5)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(165, 113, 100, 0.5)\",\n    \"--important\": \"rgba(59, 47, 47, 0.2)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(161, 122, 116, 0.8)\",\n    \"--endDate\": \"rgb(161, 122, 116)\",\n    \"--bold\": \"400\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(59, 47, 47, 0.1)\",\n    \"--river\": \"rgba(165, 113, 100, 0.1)\",\n  },\n  'space-night': {\n    \"--font\": \"var(--fontSize) 'Adam', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"300\",\n    \"--background\": \"rgb(0, 0, 0)\",\n    \"--border\": \"rgb(128, 128, 128, 0.3)\",\n    \"--select\": \"rgb(101, 138, 149)\",\n    \"--event\": \"rgba(101, 138, 149, 0.3)\",\n    \"--foreground\": \"rgb(191, 193, 194)\",\n    \"--midground\": \"rgba(101, 138, 149, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(101, 138, 149, 0.5)\",\n    \"--important\": \"rgba(191, 193, 194, 0.2)\",\n    \"--maybe\": \"darkblue\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(135,206,235, 0.8)\",\n    \"--endDate\": \"rgb(135,206,235)\",\n    \"--bold\": \"400\",\n    \"--headingSize\": \"125%\",\n    \"--lineSpacing\": \"5px\",\n    \"--frontWidth\": \"2.5em\",\n    \"--bank\": \"rgba(191, 193, 194, 0.1)\",\n    \"--river\": \"rgba(101, 138, 149, 0.1)\",\n  },\n  'water-day': {\n    \"--font\": \"var(--fontSize) 'Kirvy', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--background\": \"rgb(188, 212, 230)\",\n    \"--border\": \"rgba(36, 40, 43, 0.3)\",\n    \"--select\": \"rgb(64, 71, 77)\",\n    \"--event\": \"rgba(64, 71, 77, 0.3)\",\n    \"--foreground\": \"rgb(10, 10, 10)\",\n    \"--midground\": \"rgba(64, 71, 77, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(64, 71, 77, 0.5)\",\n    \"--important\": \"rgba(10, 10, 10, 0.2)\",\n    \"--maybe\": \"rgba(41, 74, 112, 0.5)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgb(41, 74, 112, 0.8)\",\n    \"--endDate\": \"rgb(41, 74, 112)\",\n    \"--bold\": \"300\",\n    \"--headingSize\": \"1.15em\",\n    \"--lineSpacing\": \"7px\",\n    \"--frontWidth\": \"3.5em\",\n    \"--bank\": \"rgba(10, 10, 10, 0.1)\",\n    \"--river\": \"rgba(64, 71, 77, 0.1)\",\n  },\n  'water-night': {\n    \"--font\": \"var(--fontSize) 'Kirvy', sans-serif\",\n    \"--fontSize\": \"30px\",\n    \"--fontWeight\": \"100\",\n    \"--background\": \"rgb(31, 40, 52)\",\n    \"--border\": \"rgba(176, 194, 212, 0.3)\",\n    \"--select\": \"rgb(145, 163, 176)\",\n    \"--event\": \"rgba(145, 163, 176, 0.3)\",\n    \"--foreground\": \"whitesmoke\",\n    \"--midground\": \"rgba(145, 163, 176, 0.1)\",\n    \"--padding\": \"14px\",\n    \"--importantE\": \"rgba(145, 163, 176, 0.5)\",\n    \"--important\": \"rgba(245, 245, 245, 0.1)\",\n    \"--maybe\": \"rgba(143, 176, 214, 0.5)\",\n    \"--menufont\": \"24px Dosis\",\n    \"--startDate\": \"rgba(143, 176, 214, 0.8)\",\n    \"--endDate\": \"rgb(143, 176, 214)\",\n    \"--bold\": \"300\",\n    \"--headingSize\": \"1.15em\",\n    \"--lineSpacing\": \"7px\",\n    \"--frontWidth\": \"3.5em\",\n    \"--bank\": \"rgba(245, 245, 245, 0.1)\",\n    \"--river\": \"rgba(145, 163, 176, 0.1)\",\n  }\n}\n\nwindow.resetData = {\"settings\":{\"repeats\":{\"Mon\":[],\"Tue\":[],\"Wed\":[],\"Thu\":[],\"Fri\":[],\"Sat\":[],\"Sun\":[]},\"deadlines\":{},\"startdates\":{},\"theme\":\"space\",\"mode\":\"night\",\"focused\":\"\",\"hideComplete\":\"\",\"migrated\":[\"12/1\",\"12/2\",\"12/3\",\"12/24\"],\"sounds\":\"true\"},\"tasks\":{\"1\":{\"title\":\"Tutorial\",\"info\":{},\"subtasks\":[\"1645101238483\",\"1645101243036\",\"1645101372574\"]},\"river\":{\"info\":{\"index\":0,\"focused\":\"\"},\"subtasks\":[\"1645101218234\"]},\"1645101218234\":{\"title\":\"Thu Feb 17 2022\",\"info\":{},\"subtasks\":[\"1645101261275\",\"1645101293836\"]},\"bank\":{\"info\":{\"index\":0,\"focused\":\"\"},\"subtasks\":[\"1\"]},\"1645101238483\":{\"title\":\"Welcome to RiverBank!\",\"info\":{\"complete\":\"\",\"startDate\":[\"--\",\"--\"],\"endDate\":[\"--\",\"--\"],\"notes\":\"\",\"type\":\"date\",\"collapsed\":\"\",\"excludes\":[]},\"subtasks\":[\"1645101279492\"]},\"1645101243036\":{\"title\":\"Add unscheduled tasks in the Bank view here\",\"info\":{\"complete\":\"\",\"startDate\":[\"--\",\"--\"],\"endDate\":[\"--\",\"--\"],\"notes\":\"\",\"type\":\"date\",\"collapsed\":\"\",\"excludes\":[]},\"subtasks\":[\"1645101270452\"]},\"1645101261275\":{\"title\":\"Add events in the River view here\",\"info\":{\"complete\":\"\",\"startDate\":[\"--\",\"--\"],\"endDate\":[\"--\",\"--\"],\"notes\":\"\",\"type\":\"event\",\"collapsed\":\"\",\"excludes\":[]},\"subtasks\":[]},\"1645101270452\":{\"title\":\"Add subtasks\",\"info\":{\"complete\":\"\",\"startDate\":[\"--\",\"--\"],\"endDate\":[\"--\",\"--\"],\"notes\":\"\",\"type\":\"date\",\"collapsed\":\"\",\"excludes\":[]},\"subtasks\":[]},\"1645101279492\":{\"title\":\"Right-click to view the menu.\",\"info\":{\"complete\":\"\",\"startDate\":[\"--\",\"--\"],\"endDate\":[\"--\",\"--\"],\"notes\":\"\",\"type\":\"date\",\"collapsed\":\"\",\"excludes\":[]},\"subtasks\":[]},\"1645101293836\":{\"title\":\"Create times by clicking the green dot\",\"info\":{\"complete\":\"\",\"startDate\":[8,30],\"endDate\":[\"--\",\"--\"],\"notes\":\"\",\"type\":\"event\",\"collapsed\":\"\",\"excludes\":[]},\"subtasks\":[\"1645101351484\",\"1645101355973\"]},\"1645101344435\":{\"title\":\"Reorder tasks by dragging the dot\",\"info\":{\"complete\":\"\",\"startDate\":[\"--\",\"--\"],\"endDate\":[\"--\",\"--\"],\"notes\":\"\",\"type\":\"event\",\"collapsed\":\"\",\"excludes\":[]},\"subtasks\":[]},\"1645101351484\":{\"title\":\"Reorder tasks by dragging the dot\",\"info\":{\"complete\":\"\",\"startDate\":[\"--\",\"--\"],\"endDate\":[\"--\",\"--\"],\"notes\":\"\",\"type\":\"date\",\"collapsed\":\"\",\"excludes\":[]},\"subtasks\":[]},\"1645101355973\":{\"title\":\"Hold \\\"Command\\\" then drag to drop as a subtask\",\"info\":{\"complete\":\"\",\"startDate\":[\"--\",\"--\"],\"endDate\":[\"--\",\"--\"],\"notes\":\"\",\"type\":\"date\",\"collapsed\":\"\",\"excludes\":[]},\"subtasks\":[]},\"1645101372574\":{\"title\":\"View the tutorial by clicking the \\\"help\\\" menu\",\"info\":{\"complete\":\"\",\"startDate\":[\"--\",\"--\"],\"endDate\":[\"--\",\"--\"],\"notes\":\"\",\"type\":\"date\",\"collapsed\":\"\",\"excludes\":[]},\"subtasks\":[]}}};\n\nwindow.data = undefined;\nwindow.selected = undefined;\nwindow.preventSelect = undefined;\nwindow.copiedTask = undefined;\nwindow.app = undefined;\nwindow.preventReturn = undefined;\nwindow.undoData = localStorage.getItem('data');\n\ntry {\n  window.data = !localStorage.getItem('data') ? window.resetData :\n    JSON.parse(localStorage.getItem('data'));\n} catch (err) {\n  window.data = window.resetData;\n}\n\nfunction init() {\n\n  window.selected = undefined;\n  window.width = Math.floor(window.innerWidth / 200);\n  window.prevWidth = Math.floor(window.innerWidth / 200);\n  window.app = React.createRef();\n  ReactDOM.render(<App ref={window.app} />, document.getElementById('root'));\n  $(document).on('keydown', keyComms.keyComms);\n  display.focus(window.data.settings.focused);\n  display.setTheme(window.data.settings.theme);\n  window.addEventListener('resize', () => {\n    if (window.innerWidth / 10 !== Math.floor(window.innerWidth / 10)) return;\n    display.updateAllSizes();\n  });\n  display.checkTimes();\n  window.setInterval(display.checkTimes, 60000);\n  window.addEventListener('contextmenu', (ev) => {\n    ev.preventDefault();\n    if (window.getSelection) {\n      if (window.getSelection().empty) {  // Chrome\n        window.getSelection().empty();\n      } else if (window.getSelection().removeAllRanges) {  // Firefox\n        window.getSelection().removeAllRanges();\n      }\n    }\n    const contextMenu = window.app.current.state.contextMenu.current.self.current;\n    window.app.current.state.contextMenu.current.setState({ \n      top: Math.min(ev.pageY, \n        window.innerHeight - $(contextMenu).height()), \n      left: Math.min(ev.pageX, \n        window.innerWidth - $(contextMenu).width()),\n      display: 'block' });\n  })\n  window.addEventListener('click', () => \n    window.app.current.state.contextMenu.current.setState({ display: 'none' }))\n  document.addEventListener('fullscreenchange', display.updateAllSizes);\n}\n\n// MIGRATION PROTOCOLS\n\nif (!window.data.settings.migrated) {\n  window.data.settings.migrated = [];\n}\n\nif (!window.data.settings.migrated.includes('12/1')) {\n  window.data.settings.migrated.push('12/1');\n  var tasksMigrated = {};\n  var newData = JSON.parse(JSON.stringify(window.data));\n  function treeSearch(task) {\n    tasksMigrated[task.id] = {\n      info: task.info, title: task.title,\n      subtasks: task.subtasks.map(x => x.id)\n    };\n    for (let subtask of task.subtasks) {\n      treeSearch(subtask, task);\n    }\n    delete task.subtasks;\n  }\n  newData.river.id = 'river';\n  newData.bank.id = 'bank';\n  treeSearch(newData.river);\n  treeSearch(newData.bank);\n  delete newData.river;\n  delete newData.bank;\n  newData.tasks = tasksMigrated;\n  window.data = newData;\n}\n\nif (!window.data.settings.migrated.includes('12/2')) {\n  window.data.settings.migrated.push('12/2');\n  for (let task of Object.keys(window.data.tasks)) {\n    const foundTask = window.data.tasks[util.stripR(task)];\n    delete foundTask.info.startDate;\n    delete foundTask.info.endDate;\n  }\n}\n\nif (!window.data.settings.migrated.includes('12/3')) {\n  window.data.settings.migrated.push('12/3');\n  window.data.settings.startdates = {};\n  window.data.settings.deadlines = {};\n}\n\nif (!window.data.settings.migrated.includes('12/24')) {\n  window.data.settings.migrated.push('12/24');\n  window.data.settings.sounds = 'true';\n}\n\nsaving.clean();\n\ninit();"],"sourceRoot":""}