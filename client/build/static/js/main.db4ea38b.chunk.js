(this["webpackJsonpriverbank-2"]=this["webpackJsonpriverbank-2"]||[]).push([[0],{18:function(t,e,n){},19:function(t,e,n){},21:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){"use strict";n.r(e);var s=n(7),a=n(2),i=n.n(a),r=n(12),o=n.n(r),d=n(3),c=n.n(d),l=n(1),u=n(4),p=n(5),f=n(9),h=n(8),w=n(6),b=(n(18),n(19),n(0)),g=function(t){Object(h.a)(n,t);var e=Object(w.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var t=this;this.subtaskObjects=[];for(var e=this.props.subtasks.filter((function(t){return window.data.tasks[O(t)]})).map((function(e,n){return t.subtaskObjects.push(i.a.createRef()),Object(b.jsx)(m,{id:e,info:window.data.tasks[O(e)].info,title:window.data.tasks[O(e)].title,subtasks:window.data.tasks[O(e)].subtasks,parent:t.props.parent,ref:t.subtaskObjects[t.subtaskObjects.length-1],index:n},e)})),n=this.props.parent,s=[];n;)s.push(n.props.id),n=n.props.parent;return s=s.reverse().join("-"),Object(b.jsx)("ul",{className:"listContent",children:e})}}]),n}(i.a.Component),v=(n(21),function(t){Object(h.a)(n,t);var e=Object(w.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).updateHeights=function(){},s.dropTask=function(t,e){M(window.draggedTask);var n=window.selected.props.parent;W(),z(n,"list"),window.preventSelect=!1,setTimeout((function(){M(Object(f.a)(s)),"subtask"===e?A("task"):"task"===e&&A()}),100),s.setState({taskDrop:!1,subtaskDrop:!1}),t.stopPropagation()},s.taskList=i.a.createRef(),s.state={subtasks:t.subtasks,title:t.title,info:{},zoomed:""},s}return Object(p.a)(n,[{key:"changeTitle",value:function(t){this.setState({title:t.target.value})}},{key:"sortList",value:function(){var t,e=!0,n=0,a=Object(s.a)(this.subtasksCurrent);try{for(a.s();!(t=a.n()).done;){var i=t.value,r=window.data.tasks[O(i)],o=y(r.info.startDate);if("event"===r.info.type&&o<n){e=!1;break}n=o}}catch(h){a.e(h)}finally{a.f()}if(!e){var d,c=[],l=["start"],u=Object(s.a)(this.subtasksCurrent);try{for(u.s();!(d=u.n()).done;){var p=d.value,f=window.data.tasks[O(p)];"event"!==f.info.type||f.info.startDate.includes("--")?l.push(p):(c.push(l),(l=[]).push(p))}}catch(h){u.e(h)}finally{u.f()}c.push(l),c=c.sort((function(t,e){return"start"===t[0]||0===t.length?(t=t.splice(0,1),-1):"start"===e[0]||0===e.length?(e=e.splice(0,1),1):y(window.data.tasks[O(t[0])].info.startDate)-y(window.data.tasks[O(e[0])].info.startDate)})).flat(),this.subtasksCurrent=c}}},{key:"render",value:function(){var t=this,e=function(){M(t)};if(this.changeTitle=this.changeTitle.bind(this),this.listInput=i.a.createRef(),this.subtasksCurrent=this.state.subtasks.filter((function(e){return!("R"===e.charAt(0)&&!t.props.repeats.includes(e))&&window.data.tasks[O(e)]})),"river"===this.props.parent.props.id){var n,a=Object(s.a)(this.props.repeats);try{for(a.s();!(n=a.n()).done;){var r=n.value;this.subtasksCurrent.includes(r)||this.subtasksCurrent.includes(O(r))||this.subtasksCurrent.push(r)}}catch(c){a.e(c)}finally{a.f()}}"river"===j(this).props.id&&(this.sortList(),setTimeout(this.updateHeights,100));var o=function(t){t.preventDefault(),t.dataTransfer.dropEffect="all"},d=function(t){t.dataTransfer.dropEffect="all"};return Object(b.jsxs)("div",{className:"list "+this.state.zoomed,onClick:e,onContextMenu:e,children:[Object(b.jsx)("div",{className:"listInputBackground",onDragEnter:function(){console.log(window.draggedTask.props.id),window.draggedTask.props.id!==t.props.id&&t.setState({taskDrop:!0})},onDragLeave:function(){return t.setState({taskDrop:!1})},onDrop:function(e){return t.dropTask(e,"subtask")},children:"bank"===this.props.parent.props.id?Object(b.jsx)("input",{className:"listInput",value:this.state.title,onChange:this.changeTitle,ref:this.listInput,onDragOver:o,onDragEnter:d,onDragLeave:function(t){t.dataTransfer.dropEffect="all"}}):Object(b.jsx)("input",{readOnly:!0,className:"listInput listTitle",value:D(this.state.title),ref:this.listInput,onDragOver:o,onDragEnter:d})}),Object(b.jsxs)("div",{className:"listFrame",children:["river"===this.props.parent.props.id&&this.props.deadlines&&Object(b.jsx)("ul",{children:this.props.deadlines.map((function(t){try{return Object(b.jsx)("li",{className:"deadline",onClick:function(){return _(window.data.tasks[O(t)].title,"start")},children:window.data.tasks[O(t)].title},String(t))}catch(e){return}}))}),"river"===this.props.parent.props.id&&this.props.startdates&&Object(b.jsx)("ul",{children:this.props.startdates.map((function(t){return Object(b.jsx)("li",{className:"startdate",onClick:function(){return _(window.data.tasks[O(t)].title,"start")},children:window.data.tasks[O(t)].title},String(t))}))}),Object(b.jsx)("div",{className:"dropArea ".concat(this.state.taskDrop?"droppable":""),onDragOver:o}),Object(b.jsx)(g,{ref:this.taskList,subtasks:this.subtasksCurrent,parent:this})]})]})}}]),n}(i.a.Component)),m=function(t){Object(h.a)(n,t);var e=Object(w.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this)).hasRepeats=function(){for(var t=!1,e=0,n=Object.keys(window.data.settings.repeats);e<n.length;e++){var s=n[e];if(window.data.settings.repeats[s].includes("R"+O(a.props.id))){t=!0;break}}return t},a.dateRender=function(t){var e;if("start"===t?e=a.state.info.startDate.concat():"end"===t&&(e=a.state.info.endDate.concat()),"event"===a.state.info.type){var n;if("start"===t)return n=e[0]>=12?"p":"a",e[0]>12&&(e[0]-=12),e[0]+":"+String(e[1]).padStart(2,0)+n;if("end"===t){var s="";return 0!==e[0]&&(s+=e[0]+"h"),0!==e[1]&&(s+=e[1]+"m"),s}}else if("date"===a.state.info.type)return e[0]+"-"+e[1]},a.toggleRepeat=function(t,e){var n,i;n="all"===t?["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:[t],i="R"===a.props.id.charAt(0)?a.props.id:"R"+a.props.id;var r,o=Object(l.a)({},window.app.current.state.river.current.state.repeats),d=Object(s.a)(n);try{for(d.s();!(r=d.n()).done;){var c=r.value;o[c].includes(i)||!0===e?o[c].includes(i)&&o[c].splice(o[c].findIndex((function(t){return t===i})),1):o[c].push(i)}}catch(u){d.e(u)}finally{d.f()}window.app.current.state.river.current.setState({repeats:o}),E("repeats",o)},a.timeDrag=function(t,e,n){window.addEventListener("mouseup",(function t(){window.removeEventListener("mousemove",r),window.app.current.setState({disableSelect:""}),"e"===e||"event"===a.state.info.type?a.displayOptions("hide"):"s"===e&&a.setState({displayOptions:"show"}),a.freeze=!0,setTimeout((function(){return a.freeze=!1}),200),window.removeEventListener("mouseup",t),a.props.parent.forceUpdate()}));var s=t.screenY,i=function(t,e,s){var i,o,d,c;if("event"===a.state.info.type){var u;"start"===n?(d=a.state.info.startDate[1],c=a.state.info.startDate[0]):"end"===n&&(d=a.state.info.endDate[1],c=a.state.info.endDate[0]),"--"===d&&(d=0),"--"===c&&"end"===n?c=0:"--"===c&&"start"===n&&(c=(new Date).getHours()),(i=d+(u=t.shiftKey?5*e:30*e))>=60?(i=0,c+=1):i<0&&(i=60+u,c-=1),"end"===n?(c>=24||c<0)&&(i="--",c="--",window.removeEventListener("mousemove",r)):"start"===n&&3==c&&(i="--",c="--",window.removeEventListener("mousemove",r)),"start"===n?a.setState({info:Object(l.a)(Object(l.a)({},a.state.info),{},{startDate:[c,i]})}):"end"===n&&a.setState({info:Object(l.a)(Object(l.a)({},a.state.info),{},{endDate:[c,i]})})}else{if(a.updateRiverDate(n,"remove"),"s"===s)"start"===n?(d=a.state.info.startDate[0],c=a.state.info.startDate[1]):"end"===n&&(d=a.state.info.endDate[0],c=a.state.info.endDate[1]),("--"===d||Number.isNaN(d))&&(d=(new Date).getMonth()+1),("--"===c||Number.isNaN(c))&&(c=1),(i=d+e)===(new Date).getMonth()&&e<0?(i="--",c="--"):((o=new Date).setMonth(i-1),i=o.getMonth()+1),"start"===n?a.setState({info:Object(l.a)(Object(l.a)({},a.state.info),{},{startDate:[i,c]})}):"end"===n&&a.setState({info:Object(l.a)(Object(l.a)({},a.state.info),{},{endDate:[i,c]})});else if("e"===s){"start"===n?(d=a.state.info.startDate[1],c=a.state.info.startDate[0]):"end"===n&&(d=a.state.info.endDate[1],c=a.state.info.endDate[0]),("--"===d||Number.isNaN(d))&&(d=(new Date).getDate()),("--"===c||Number.isNaN(c))&&(c=(new Date).getMonth()+1),i=d+e,(o=new Date).setMonth(c-1),o.setDate(i),o.setHours(0),o.setSeconds(0),o.setMilliseconds(0);var p=new Date;if(p.setDate(p.getDate()-1),p.setHours(0),p.setSeconds(0),p.setMilliseconds(0),o.getTime()===p.getTime()&&e<0)return void("start"===n?a.setState({info:Object(l.a)(Object(l.a)({},a.state.info),{},{startDate:["--","--"]})}):"end"===n&&a.setState({info:Object(l.a)(Object(l.a)({},a.state.info),{},{endDate:["--","--"]})}));"start"===n?a.setState({info:Object(l.a)(Object(l.a)({},a.state.info),{},{startDate:[o.getMonth()+1,o.getDate()]})}):"end"===n&&a.setState({info:Object(l.a)(Object(l.a)({},a.state.info),{},{endDate:[o.getMonth()+1,o.getDate()]})})}("start"!==n||a.state.info.startDate.includes("--"))&&("end"!==n||a.state.info.endDate.includes("--"))||a.updateRiverDate(n,"add")}},r=function(t){var n=!1;t.screenY<s-10?(s-=10,n=-1):t.screenY>s+10&&(s+=10,n=1),!1!==n&&i(t,n,e)};window.app.current.setState({disableSelect:"disable-select"}),window.addEventListener("mousemove",r)},a.isComplete=function(){for(var t=a.state.info.complete,e=a.props.parent;!e instanceof v;)e=e.props.parent;return a.state.info.excludes.includes(e.state.title)&&(t="complete"),t},a.dropTask=function(t,e){if(window.draggedTask.props.id!==a.props.id){M(window.draggedTask);var n=window.selected.props.parent;W(),z(n,"list"),window.preventSelect=!1,setTimeout((function(){M(Object(f.a)(a)),"subtask"===e?A("task"):"task"===e&&A()}),100),a.setState({taskDrop:!1,subtaskDrop:!1}),t.stopPropagation()}},a.state={info:t.info,title:t.title,subtasks:t.subtasks.filter((function(t){return window.data.tasks[O(t)]})),parent:t.parent,id:t.id,displayOptions:"hide",riverTask:!1,zoomed:"",minHeight:1},a.state.info.startDate||(a.state.info.startDate=["--","--"]),a.state.info.endDate||(a.state.info.endDate=["--","--"]),a.state.info.notes||(a.state.info.notes=""),a.state.info.type||(t.parent instanceof v&&"river"===j(t.parent).props.id?a.state.info.type="event":a.state.info.type="date"),a.state.info.collapsed||(a.state.info.collapsed=""),a.state.info.excludes||(a.state.info.excludes=[]),a}return Object(p.a)(n,[{key:"displayOptions",value:function(t,e){z(this),!0!==this.freeze&&(window.selected!==this&&M(this),this.editBar.current&&this.editBar.current.focus(),c()(t.target).hasClass("options")||c()(t.target).parent().hasClass("options")||("hide"===e||"show"===this.state.displayOptions?(this.setState({displayOptions:"hide"}),this.props.parent instanceof v&&"river"===j(this).props.id&&this.props.parent.forceUpdate()):"show"!==e&&"hide"!==this.state.displayOptions||this.setState({displayOptions:"show"})))}},{key:"changeTitle",value:function(t){this.setState({title:t.target.value}),this.updateHeight()}},{key:"updateHeight",value:function(){var t=this;!1!==this.resizable&&(this.editBar.current.style.height="0px",this.editBar.current.style.height=this.editBar.current.scrollHeight+"px",this.resizable=!1),setTimeout((function(){return t.resizable=!0}),100)}},{key:"updateRiverDate",value:function(t,e){var n,s=this,a=new Date;if("start"===t){if(this.state.info.startDate.includes("--"))return;n=window.app.current.state.startdates,a.setMonth(this.state.info.startDate[0]-1),a.setDate(this.state.info.startDate[1])}else if("end"===t){if(this.state.info.endDate.includes("--"))return;n=window.app.current.state.deadlines,a.setMonth(this.state.info.endDate[0]-1),a.setDate(this.state.info.endDate[1])}var i=a.toDateString();if("add"===e)n[i]?n[i].push(this.props.id):n[i]=[this.props.id];else if("remove"===e){if(!n[i])return;n[i].splice(n[i].findIndex((function(t){return t===s.props.id})),1)}"start"===t?(window.app.current.setState({startdates:Object(l.a)({},n)}),E("startdates",n)):"end"===t&&(window.app.current.setState({deadlines:Object(l.a)({},n)}),E("deadlines",n))}},{key:"toggleComplete",value:function(t){var e=this.state.info.complete;"complete"===e?(e="","date"===this.state.info.type&&(this.updateRiverDate("start","add"),this.updateRiverDate("end","add"))):(e="complete","date"===this.state.info.type&&(this.updateRiverDate("start","remove"),this.updateRiverDate("end","remove")),G(window.app.current.state.popSnd));for(var n=window.app.current.state.river.current.state.repeats,s=!1,a=this.props.parent;!a instanceof v;)a=a.props.parent;for(var i=this.state.info.excludes,r=0,o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];r<o.length;r++){if(n[o[r]].includes("R"+O(this.props.id))){if(s=!0,i.includes(a.state.title)){i.splice(i.findIndex((function(t){return t===a.state.title})),1);break}i.push(a.state.title);break}}!0===s?this.setState({info:Object(l.a)(Object(l.a)({},this.state.info),{},{excludes:i})}):this.setState((function(t){return{info:Object(l.a)(Object(l.a)({},t.info),{},{complete:e})}})),!1!==t&&this.displayOptions("hide")}},{key:"toggleImportant",value:function(t){var e=this.state.info.important;e="important"===e?"":"important",this.setState((function(t){return{info:Object(l.a)(Object(l.a)({},t.info),{},{important:e,maybe:""})}})),!1!==t&&this.displayOptions("hide")}},{key:"toggleMaybe",value:function(t){var e=this.state.info.maybe;e="maybe"===e?"":"maybe",this.setState((function(t){return{info:Object(l.a)(Object(l.a)({},t.info),{},{maybe:e,important:""})}})),!1!==t&&this.displayOptions("hide")}},{key:"toggleCollapse",value:function(){var t=this.state.info.collapsed;t="collapsed"===t?"":"collapsed",this.setState((function(e){return{info:Object(l.a)(Object(l.a)({},e.info),{},{collapsed:t})}}),q),this.displayOptions("hide")}},{key:"deleteThis",value:function(t){var e=this;if(this.hasRepeats()&&!window.confirm("This will delete all repeats.\n(Complete task to hide only this one)"))return;for(var n=this.props.parent;n.props.parent;)n=n.props.parent;var s=this.state.parent.state.subtasks,a=s.findIndex((function(t){return t===e.props.id}));s.splice(a,1),window.selected=this.state.parent,window.preventSelect=!0,this.state.parent.setState({subtasks:s}),!1!==t&&(this.updateRiverDate("start","remove"),this.updateRiverDate("end","remove"),this.toggleRepeat("all",!0),delete window.data.tasks[O(this.props.id)]),setTimeout((function(){window.undoData=localStorage.getItem("data"),window.preventSelect=!1,z(e.props.parent,"list")}),200)}},{key:"componentDidMount",value:function(){var t=this;this.editBar.current.focus(),setTimeout((function(){t.editBar.current&&t.updateHeight()}),50),M(this),this.resizable=!0}},{key:"render",value:function(){var t=this;this.displayOptions=this.displayOptions.bind(this),this.toggleComplete=this.toggleComplete.bind(this),this.toggleImportant=this.toggleImportant.bind(this),this.toggleMaybe=this.toggleMaybe.bind(this),this.deleteThis=this.deleteThis.bind(this),this.updateHeight=this.updateHeight.bind(this),this.taskList=i.a.createRef(),this.optionsButton=i.a.createRef(),this.editBar=i.a.createRef(),this.infoInput=i.a.createRef(),this.infoArea=i.a.createRef();var e=this.state.subtasks.length>0?"heading":"";this.editBar.current&&(this.editBar.current.style.height="0px",this.editBar.current.style.height=this.editBar.current.scrollHeight+"px");for(var n=this,s=[];n;)s.push(n.props.id),n=n.props.parent;s=s.reverse().join("-");for(var a="event"===this.state.info.type&&!this.state.info.startDate.includes("--"),r={},o=0,d=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];o<d.length;o++){var u=d[o];window.data.settings.repeats[u].map((function(t){return O(t)})).includes(O(this.props.id))?r[u]="repeatOn":r[u]=""}var p,f,h=this.isComplete();if("event"===this.state.info.type)this.state.info.startDate.includes("--")||(p=this.state.info.startDate[0]>=12?"p":"a");else{var w=function(t){var e=new Date;return e.setMonth(t[[0]]-1),e.setDate(t[1]),{1:"M",2:"T",3:"W",4:"R",5:"F",6:"S",0:"U"}[e.getDay()]};this.state.info.startDate.includes("--")||(p=w(this.state.info.startDate)),this.state.info.endDate.includes("--")||(f=w(this.state.info.endDate))}var v,m=function(t){t.preventDefault(),t.dataTransfer.dropEffect="all"},j=i.a.createRef();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("li",{className:"task "+this.state.info.important+" "+h+" "+this.state.info.maybe+" "+e+" "+this.state.info.type+" "+this.state.info.collapsed+" "+this.state.zoomed,onClick:function(){M(t)},onContextMenu:function(){return M(t)},style:{minHeight:1.15*this.state.minHeight*30},onDragOver:m,children:[Object(b.jsx)("textarea",{className:"infoArea",ref:this.infoArea,onKeyDown:function(e){"Escape"===e.key&&(c()(t.infoArea.current).hide(),setTimeout((function(){return window.preventReturn=!1}),100))},onChange:function(){t.setState({info:Object(l.a)(Object(l.a)({},t.state.info),{},{notes:t.infoArea.current.value})})},value:this.state.info.notes}),Object(b.jsxs)("div",{className:"taskContent",ref:j,onDragStart:function(e){console.log("startDrag"),window.draggedTask=t,e.stopPropagation()},children:[Object(b.jsxs)("div",{className:"options "+this.state.displayOptions,children:[Object(b.jsxs)("div",{className:"buttonBar",style:{width:"100%",justifyContent:"space-around",flexWrap:"nowrap"},children:[Object(b.jsxs)("div",{className:"buttonBar",children:[Object(b.jsx)("button",{title:"toggle complete",className:"button "+this.state.info.complete,onClick:this.toggleComplete,children:"\u221a"}),Object(b.jsx)("button",{title:"toggle important",className:"button "+this.state.info.important,onClick:this.toggleImportant,children:"!"}),Object(b.jsx)("button",{title:"toggle maybe",className:"button "+this.state.info.maybe,onClick:this.toggleMaybe,children:"?"}),Object(b.jsx)("button",{title:"toggle fold",className:"button",onClick:function(){return t.toggleCollapse()},children:"[]"})]}),Object(b.jsxs)("div",{className:"buttonBar",children:[Object(b.jsx)("button",{className:"button "+r.Mon,onClick:function(){t.toggleRepeat("Mon")},children:"M"}),Object(b.jsx)("button",{className:"button "+r.Tue,onClick:function(){t.toggleRepeat("Tue")},children:"T"}),Object(b.jsx)("button",{className:"button "+r.Wed,onClick:function(){t.toggleRepeat("Wed")},children:"W"}),Object(b.jsx)("button",{className:"button "+r.Thu,onClick:function(){t.toggleRepeat("Thu")},children:"R"}),Object(b.jsx)("button",{className:"button "+r.Fri,onClick:function(){t.toggleRepeat("Fri")},children:"F"}),Object(b.jsx)("button",{className:"button "+r.Sat,onClick:function(){t.toggleRepeat("Sat")},children:"S"}),Object(b.jsx)("button",{className:"button "+r.Sun,onClick:function(){t.toggleRepeat("Sun")},children:"U"})]})]}),Object(b.jsxs)("div",{className:"timeDiv buttonBar",style:{flexWrap:"nowrap"},children:[Object(b.jsx)("button",{className:"button timeSwitch",onClick:function(){var e="event"===t.state.info.type?"date":"event";t.setState({info:Object(l.a)(Object(l.a)({},t.state.info),{},{type:e,startDate:["--","--"],endDate:["--","--"]})})},children:this.state.info.type}),Object(b.jsxs)("span",{className:"startSpan start",children:[Object(b.jsx)("span",{className:"s",onMouseDown:function(e){t.timeDrag(e,"s","start")},children:"event"===this.state.info.type?(v=this.state.info.startDate[0],"--"===v?v:v>12?v-12:v):this.state.info.startDate[0]}),Object(b.jsx)("span",{className:"m",children:"event"===this.state.info.type?":":"/"}),Object(b.jsx)("span",{className:"e",onMouseDown:function(e){t.timeDrag(e,"e","start")},children:"event"===this.state.info.type?String(this.state.info.startDate[1]).padStart(2,0):this.state.info.startDate[1]}),p&&Object(b.jsx)("span",{className:"startSpan extraInfo",children:p})]}),Object(b.jsxs)("span",{className:"startSpan end",children:[Object(b.jsx)("span",{className:"s",onMouseDown:function(e){t.timeDrag(e,"s","end")},children:this.state.info.endDate[0]}),Object(b.jsx)("span",{className:"m",children:"event"===this.state.info.type?"h":"/"}),Object(b.jsx)("span",{className:"e",onMouseDown:function(e){t.timeDrag(e,"e","end")},children:this.state.info.endDate[1]}),Object(b.jsx)("span",{children:"event"===this.state.info.type?"m":""}),f&&Object(b.jsx)("span",{className:"startSpan extraInfo",children:f})]}),Object(b.jsx)("input",{ref:this.infoInput,className:"infoSpan",placeholder:"notes",style:{marginLeft:"5px"},value:this.state.info.notes,onChange:function(){t.setState({info:Object(l.a)(Object(l.a)({},t.state.info),{},{notes:t.infoInput.current.value})})}}),Object(b.jsx)("button",{className:"button",onClick:function(){c()(t.infoArea.current).show(),window.preventReturn=!0},title:"expand notes to paragraph",children:"+"})]})]}),a?Object(b.jsx)("span",{className:"startDate",onClick:function(e){return t.displayOptions(e)},ref:this.optionsButton,onMouseDown:function(e){t.timeDrag(e,"s","start")},children:this.dateRender("start")}):Object(b.jsx)("span",{className:"info",onClick:function(e){return t.displayOptions(e)},ref:this.optionsButton,onMouseDown:function(t){c()(j.current).attr("draggable","true")},onMouseUp:function(t){c()(j.current).attr("draggable","false")}}),Object(b.jsx)("textarea",{className:"editBar",value:this.state.title,onChange:function(e){return t.changeTitle(e)},ref:this.editBar,spellCheck:"false",onClick:function(e){return t.displayOptions(e,"hide")}}),0===this.state.info.notes.length&&Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginRight:"5px"},children:[!a&&!this.state.info.startDate.includes("--")&&Object(b.jsx)("span",{className:"startDate",children:this.dateRender("start")}),!this.state.info.endDate.includes("--")&&Object(b.jsx)("span",{className:"endDate",children:this.dateRender("end")})]})]}),this.state.info.notes.length>0&&Object(b.jsxs)("div",{className:"taskInfo",children:[this.state.info.notes.length>0&&Object(b.jsx)("span",{className:"notesSpan",children:this.state.info.notes.length>50?this.state.info.notes.slice(0,50)+"...":this.state.info.notes}),!a&&!this.state.info.startDate.includes("--")&&Object(b.jsx)("span",{className:"startDate",children:this.dateRender("start")}),!this.state.info.endDate.includes("--")&&Object(b.jsx)("span",{className:"endDate",children:this.dateRender("end")})]}),Object(b.jsx)("div",{className:"dropArea ".concat(this.state.subtaskDrop?"droppable":""),onDragEnter:function(){console.log(window.draggedTask.props.id),window.draggedTask.props.id!==t.props.id&&t.setState({subtaskDrop:!0})},onDragLeave:function(){return t.setState({subtaskDrop:!1})},onDrop:function(e){return t.dropTask(e,"subtask")}}),Object(b.jsx)(g,{ref:this.taskList,subtasks:this.state.subtasks,parent:this})]}),Object(b.jsx)("div",{className:"dropArea ".concat(this.state.taskDrop?"droppable":"","\n          ").concat(h),onDragEnter:function(){console.log(window.draggedTask.props.id),window.draggedTask.props.id!==t.props.id&&t.setState({taskDrop:!0})},onDragLeave:function(){return t.setState({taskDrop:!1})},onDrop:function(e){return t.dropTask(e,"task")},onDragOver:m})]})}}]),n}(i.a.Component);function j(t){for(var e=t;e.props.parent;)e=e.props.parent;return e}function k(t){for(var e=t;e instanceof m;)e=e.props.parent;return e}function O(t){return"R"===t.charAt(0)?t.slice(1):t}function x(t){return t.subtasksCurrent?t.subtasksCurrent:t.state.subtasks}function D(t){return t.slice(0,4)+t.slice(8,10)}function y(t){var e=60*t[0]+t[1];return e<=180&&(e+=1440),e}var S=n(11),T=n.n(S),C=n(13),N=(n(23),function(t){Object(h.a)(n,t);var e=Object(w.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).todayIndex=function(){var t=new Date;return s.state.subtasks.findIndex((function(e){var n=new Date(window.data.tasks[e].title);return n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()}))},s.addList=function(t){var e;if("river"===s.props.id){var n=new Date(window.data.tasks[s.state.subtasks[s.state.subtasks.length-1]].title);n.setDate(n.getDate()+1),e=n.toDateString()}else e="";var a=s.state.subtasks;t=String(t||(new Date).getTime()),window.data.tasks[t]={title:e,subtasks:[],info:{}},a.push(t),s.setState({subtasks:a}),setTimeout((function(){s.frames[s.frames.length-1].current.listInput.current.focus()}),100)},s.addLists=function(){if("river"===s.props.id)for(var t=(new Date).getTime(),e=0;e<7;e++)s.addList(String(t+e));else s.addList()},s.changeIndex=function(){var t=Object(C.a)(T.a.mark((function t(e,n){var a,i;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!0===n?e:s.state.info.index+e,s.frame){t.next=3;break}return t.abrupt("return");case 3:i=function(){var t=c()(s.frame.current).children();t[a]&&t[a].scrollIntoView()},s.setState({info:Object(l.a)(Object(l.a)({},s.state.info),{},{index:a})},i);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),s.updatePosition=function(){if("focused"!==s.state.focused&&"river"===s.props.id){void 0===s.scrollPos&&(s.scrollPos=300*Math.floor(c()(s.frameContainer.current).scrollLeft()/300));var t=c()(s.frameContainer.current).scrollLeft();t<0&&(t=0),Math.abs(t-s.scrollPos)>300&&(s.scrollPos=300*Math.floor(t/300),s.setState({info:Object(l.a)(Object(l.a)({},s.state.info),{},{index:s.state.shownIndex+Math.floor(s.scrollPos/300)})}))}},s.state={subtasks:t.subtasks,info:t.info,width:Z(t.info.focused),zoomed:""},"river"===t.id?(s.state.repeats=window.data.settings.repeats,s.state.shownIndex=s.todayIndex()):"bank"===t.id&&(s.state.shownIndex=0),s}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.updatePosition()}},{key:"render",value:function(){var t=this;this.state.info.index,this.state.width;this.frames=[],window.addEventListener("resize",(function(){t.state.width!==Z(t.state.info.focused)&&t.setState({width:Z(t.state.info.focused)})}));var e=this.state.subtasks.slice(this.state.shownIndex);return this.frame=i.a.createRef(),this.frameContainer=i.a.createRef(),Object(b.jsxs)("div",{className:"frameContainer \n        ".concat(this.state.info.focused," ").concat(this.state.zoomed," ").concat(this.props.id),onScroll:this.updatePosition,ref:this.frameContainer,children:["river"===this.props.id&&"focused"!==this.state.info.focused&&Object(b.jsxs)("div",{className:"monthYear",children:[Object(b.jsx)("span",{children:window.data.tasks[this.state.subtasks[this.state.info.index]].title.slice(4,8)}),Object(b.jsx)("span",{children:window.data.tasks[this.state.subtasks[this.state.info.index]].title.slice(11)})]}),Object(b.jsxs)("div",{id:this.props.id,className:"frame",ref:this.frame,children:[e.map((function(e){t.frames.push(i.a.createRef());var n=window.data.tasks[e];return"river"===t.props.id?Object(b.jsx)(v,{id:e,title:n.title,subtasks:n.subtasks,parent:t,deadlines:t.props.deadlines[n.title],startdates:t.props.startdates[n.title],repeats:t.state.repeats[D(n.title).slice(0,3)],ref:t.frames[t.frames.length-1]},e):Object(b.jsx)(v,{id:e,title:n.title,subtasks:n.subtasks,parent:t,ref:t.frames[t.frames.length-1]},e)})),Object(b.jsx)("button",{className:"changeButton",title:"add list or date",onClick:function(){return t.addLists()},children:"+"})]})]})}}]),n}(i.a.Component));function R(){window.selected&&window.selected instanceof m&&(window.undoData=localStorage.getItem("data"),window.selected.deleteThis())}function I(t){if(window.selected&&!window.preventReturn){var e=(new Date).getTime(),n=String(e);window.data.tasks[n]={info:{complete:"",startDate:"",endDate:""},title:"",subtasks:[]},window.copiedTask=n,A(t)}}function M(t,e){window.preventSelect||t instanceof g||(window.preventSelect=!0,setTimeout((function(){window.preventSelect=!1}),100),window.selected&&z(window.selected,"task"),(window.selected!==t||e)&&(window.selected instanceof m&&window.selected!==t&&window.selected.displayOptions({target:void 0},"hide"),window.selected=t,t instanceof m?t.editBar.current.focus():t instanceof v&&t.listInput.current.focus()))}function z(t,e){var n,s;s=(n="list"===e?t.props.parent:t).subtasksCurrent?n.subtasksCurrent:n.state.subtasks;try{window.data.tasks[O(n.props.id)]={title:n.state.title,info:n.state.info,subtasks:s}}catch(a){return}localStorage.setItem("data",JSON.stringify(window.data))}function L(){localStorage.setItem("data",window.undoData),setTimeout((function(){return window.location.reload()}),500)}function E(t,e){window.data.settings[t]=e,localStorage.setItem("data",JSON.stringify(window.data))}function W(){!window.selected||window.selected instanceof v||(B(),window.selected.deleteThis(!1),window.undoData=localStorage.getItem("data"))}function B(t){if(window.selected&&!(window.selected instanceof v))if(z(window.selected),t)window.copiedTask=window.selected.props.id;else{var e=(new Date).getTime(),n=String(e);window.data.tasks[n]=Object(l.a)({},window.data.tasks[O(window.selected.props.id)]),window.copiedTask=n}}function A(t){if(window.selected&&window.copiedTask)if(window.undoData=localStorage.getItem("data"),window.selected instanceof v||"task"===t){var e=window.selected.state.subtasks;e.splice(0,0,window.copiedTask),window.selected.setState({subtasks:e}),z(window.selected,"task")}else if(window.selected instanceof m||"list"===t){var n=window.selected.state.parent.state.subtasks,s=n.findIndex((function(t){return t===window.selected.props.id}))+1;n.splice(s,0,window.copiedTask),window.selected.state.parent.setState({subtasks:n}),z(window.selected,"list")}}function F(t){if(window.selected){var e=window.selected;z(window.selected);var n=window.selected.props.parent.taskList.current.subtaskObjects,s=n.findIndex((function(t){return O(t.current.props.id)===O(window.selected.props.id)}));if(!0!==t){if(0===s)return;var a=n[s-1].current,i=x(a);i.push(window.selected.props.id);var r=x(window.selected.props.parent);r.splice(s,1),a.setState({subtasks:i}),e.props.parent.setState({subtasks:r}),z(a),z(e.props.parent)}else{if(window.selected.props.parent.props.parent instanceof N)return;var o=window.selected.props.parent.props.parent.taskList.current.subtaskObjects.findIndex((function(t){return t.current.props.id===window.selected.props.parent.props.id})),d=window.selected.props.parent.props.parent.state.subtasks;d.splice(o+1,0,window.selected.props.id),window.selected.props.parent.props.parent.setState({subtasks:d}),z(window.selected.props.parent.props.parent);var c=x(e.props.parent);c.splice(c.findIndex((function(t){return t===e.props.id})),1),e.props.parent.setState({subtasks:c}),z(e.props.parent)}}}function P(t){if(window.selected){var e,n=(e=window.selected.props.parent.subtasksCurrent?window.selected.props.parent.subtasksCurrent.concat():window.selected.props.parent.state.subtasks).findIndex((function(t){return t===window.selected.props.id}));if((0!==n||-1!==t)&&(n!==e.length||1!==t)){var s,a;s=-1===t?e.slice(0,n).reverse():e.slice(n+1),a="hideComplete"===window.data.settings.hideComplete?(s.findIndex((function(t){return"complete"!==window.data.tasks[O(t)].info.complete}))+1)*t:1*t;var i=e.splice(n,1)[0];e.splice(n+a,0,i),window.selected.props.parent.setState({subtasks:e}),z(window.selected.props.parent,"task")}}}function H(t){if(window.selected)if("migrate"!==t||"bank"!==j(window.selected).props.id){var e=[],n=k(window.selected).subtasksCurrent;if(function a(i){var r,o=Object(s.a)(i.taskList.current.subtaskObjects);try{var d=function(){var s=r.value;a(s.current),"complete"!==s.current.state.info.complete&&("clear"===t?(s.current.toggleComplete(),s.current.displayOptions({target:void 0},"hide"),z(s.current)):"migrate"===t&&"R"!==s.current.props.id.charAt(0)&&(e.push(s.current.props.id),n.splice(n.findIndex((function(t){return t===s.current.props.id})),1)))};for(o.s();!(r=o.n()).done;)d()}catch(c){o.e(c)}finally{o.f()}}(k(window.selected)),"migrate"===t){var a=new Date(k(window.selected).state.title);a.setDate(a.getDate()+1),k(window.selected).setState({subtasks:n}),z(k(window.selected)),_(a.toDateString()),setTimeout((function(){window.selected.setState({subtasks:window.selected.subtasksCurrent.concat(e)}),z(window.selected)}),500)}}else alert("select a date");else alert("select a list")}function J(){var t=new Date,e=[t.getHours(),t.getMinutes()],n=t.toDateString(),a=window.data.tasks[Object.keys(window.data.tasks).find((function(t){return window.data.tasks[t].title===n}))];if(a){var i,r=a.subtasks,o=Object(s.a)(r);try{for(o.s();!(i=o.n()).done;){var d=i.value,c=window.data.tasks[O(d)];if("event"===c.info.type&&"complete"!==c.info.complete&&!c.info.startDate.includes("--")){if(c.info.startDate[0]===e[0]&&c.info.startDate[1]===e[1]){Notification.requestPermission(),new Notification("Event: "+c.title);break}var l=new Date;l.setHours(c.info.startDate[0]),l.setMinutes(c.info.startDate[1]),l.setMinutes(l.getMinutes()-15),"event"===c.info.type&&l.getHours()===e[0]&&l.getMinutes()===e[1]&&(Notification.requestPermission(),new Notification("in 15: "+c.title))}}}catch(u){o.e(u)}finally{o.f()}}}function V(t){if(window.selected){for(var e=window.selected;e instanceof m;)e=e.props.parent;e.props.parent.changeIndex(t),q()}}function K(){"night"===window.data.settings.mode?window.data.settings.mode="day":window.data.settings.mode="night",Q(window.data.settings.theme),localStorage.setItem("data",JSON.stringify(window.data))}function U(){"false"===window.data.settings.sounds?(window.data.settings.sounds="true",alert("sounds on")):(window.data.settings.sounds="false",alert("sounds off"))}function Y(t){var e;if(e=void 0!==t?t:"focused"===window.app.current.state.bank.current.state.info.focused?"":"focused",window.selected){for(var n=window.selected;n instanceof m;)n=n.props.parent;n.props.parent.changeIndex(n.props.parent.frames.findIndex((function(t){return t.current.props.id===n.props.id})))}window.app.current.state.bank.current.setState((function(t){return{info:Object(l.a)(Object(l.a)({},t.info),{},{focused:e}),width:Z(e)}})),window.app.current.state.river.current.setState((function(t){return{info:Object(l.a)(Object(l.a)({},t.info),{},{focused:e}),width:Z(e)}})),E("focused",e),q()}function q(){function t(e){e.current instanceof m&&e.current.updateHeight();var n,a=Object(s.a)(e.current.taskList.current.subtaskObjects);try{for(a.s();!(n=a.n()).done;){t(n.value)}}catch(i){a.e(i)}finally{a.f()}}var e,n=window.app.current.state.river.current.frames,a=window.app.current.state.bank.current.frames,i=Object(s.a)(n.concat(a));try{for(i.s();!(e=i.n()).done;){t(e.value)}}catch(r){i.e(r)}finally{i.f()}}function Q(t){for(var e=window.themes[t+"-"+window.data.settings.mode],n=0,s=Object.keys(e);n<s.length;n++){var a=s[n];document.documentElement.style.setProperty(a,e[a])}window.data.settings.theme=t,localStorage.setItem("data",JSON.stringify(window.data)),setTimeout(q,100)}function X(){"none"===window.app.current.state.displayTable&&window.selected?window.app.current.setState({displayTable:"true"}):window.app.current.setState({displayTable:"none"})}function G(t){"true"===window.data.settings.sounds&&t.play()}function Z(t){var e;return"focused"!==t?(e=Math.floor(window.innerWidth/250),c()(":root").css("--frameWidth",(window.innerWidth-40)/e+"px")):(e=1,c()(":root").css("--frameWidth","calc(100% - 24px)")),e}function $(){_((new Date).toDateString())}function _(t,e){setTimeout((function(){window.app.current.statusBar.current.search({target:{value:t}}),window.app.current.statusBar.current.goToFirst()}),100)}function tt(){var t;if("zoomed"===window.app.current.state.zoomed)t="";else if(t="zoomed",!window.selected)return;j(window.selected).setState({zoomed:t}),window.app.current.setState({zoomed:t}),window.zoomed?window.zoomed=void 0:window.zoomed=window.selected,setTimeout(q,200)}function et(t){if(!t.ctrlKey){if("Enter"===t.key&&!window.preventReturn)return t.preventDefault(),void(t.shiftKey?I("task"):I());if("Escape"===t.key&&!window.preventReturn)return t.preventDefault(),"none"!==window.app.current.state.displayTable&&X(),document.activeElement.blur(),void(window.selected&&(z(window.selected,"task"),window.selected instanceof m&&"show"===window.selected.state.displayOptions?window.selected.displayOptions("hide"):window.selected=void 0))}if(t.ctrlKey&&t.shiftKey)switch(t.key){case"V":A("task");break;case"N":I("task");break;case"F":t.preventDefault(),tt();break;case"C":B(!0)}else if(t.ctrlKey)switch(t.key){case"x":t.preventDefault(),W();break;case"c":t.preventDefault(),B();break;case"v":t.preventDefault(),A();break;case"n":t.preventDefault(),I();break;case"]":t.preventDefault(),F();break;case"[":t.preventDefault(),F(!0);break;case"f":t.preventDefault(),Y();break;case"z":t.preventDefault(),L();break;case"r":t.preventDefault(),q();break;case"Backspace":if(t.preventDefault(),window.selected&&window.selected instanceof m)window.selected.deleteThis();else if(window.selected&&window.selected instanceof v&&"bank"===window.selected.props.parent.props.id){if(window.confirm("delete this list?")){var e=window.selected.props.parent.state.subtasks;window.undoData=localStorage.getItem("data"),e.splice(e.findIndex((function(t){return t===window.selected.props.id})),1),window.selected.props.parent.setState({subtasks:e})}}break;case"w":t.preventDefault(),"river"!==window.selected.props.parent.props.id&&P(-1);break;case"s":t.preventDefault(),"river"!==window.selected.props.parent.props.id&&P(1);break;case"a":t.preventDefault(),V(-1);break;case"d":t.preventDefault(),V(1);break;case"h":t.preventDefault(),window.app.current.toggleComplete();break;case"t":if(t.preventDefault(),"zoomed"===window.app.current.state.zoomed)return;$();break;case"1":t.preventDefault(),window.selected instanceof m&&window.selected.toggleComplete(!1);break;case"2":t.preventDefault(),window.selected instanceof m&&window.selected.toggleImportant(!1);break;case"3":t.preventDefault(),window.selected instanceof m&&window.selected.toggleMaybe(!1);break;case"i":t.preventDefault(),window.selected&&window.selected instanceof m&&(window.selected.displayOptions({target:c()("<p></p>")}),"hide"===window.selected.state.displayOptions&&window.selected.editBar.current.focus())}}function nt(){window.confirm("Are you sure you want to reset all window.data?")&&(window.data=window.resetData,localStorage.setItem("data",JSON.stringify(window.resetData)),setTimeout((function(){window.location.reload()}),200))}function st(){window.preventReturn=!0;var t=c()('<textarea class="restore"></textarea>');c()("#root").append(t),t.on("keydown",(function(e){"Enter"===e.key?(e.preventDefault(),window.data=JSON.parse(t.val()),localStorage.setItem("data",JSON.stringify(window.data)),window.location.reload()):"Escape"===e.key&&(t.remove(),setTimeout((function(){return window.preventReturn=!1}),100))}))}function at(){var t;alert("open console to copy window.data (file download option will be added soon)"),t=JSON.stringify(window.data),console.log(t)}n(24);var it=n.p+"static/media/pop.c3c0b051.mp3",rt=(n(25),n.p+"static/media/timer.77f48c79.mp3"),ot=n.p+"static/media/start.63a8d98e.mp3",dt=function(t){Object(h.a)(n,t);var e=Object(w.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).tutorial=function(){s.setState({tutorial:!0});var t=function t(e){c()(e.target).hasClass("tutorialShow")||(s.setState({tutorial:!1}),c()(window).off("click",t))};setTimeout((function(){c()(window).on("click",t)}),100)},s.state={searchString:"",foundTasks:{}},s}return Object(p.a)(n,[{key:"search",value:function(t){""===this.state.searchString&&(this.searches=Object(l.a)({},window.data.tasks)),this.setState({searchString:t.target.value});for(var e=0,n=Object.keys(this.searches);e<n.length;e++){var s=n[e];new RegExp(this.state.searchString,"i").test(this.searches[s].title)&&"complete"!==this.searches[s].info.complete||delete this.searches[s]}this.setState({foundTasks:this.searches})}},{key:"goToSearch",value:function(t){window.preventReturn=!0,window.preventSelect=!0;var e=[t];!function t(n){for(var s=0,a=Object.keys(window.data.tasks);s<a.length;s++){var i=a[s];if(window.data.tasks[O(i)].subtasks.includes(n))return e.splice(0,0,i),void t(i)}}(t);var n=window.app.current.state[e[0]].current,s=n.state.subtasks.slice(n.state.shownIndex).findIndex((function(t){return t===e[1]}));n.changeIndex(n.state.shownIndex+s,!0),this.setState({searchString:"",foundTasks:{}}),setTimeout((function(){for(var t=n.frames[s].current,a=2,i=function(){var n=e[a],s=void 0;s=t.subtasksCurrent&&t.subtasksCurrent.length>0?t.subtasksCurrent.findIndex((function(t){return t===n})):t.state.subtasks.findIndex((function(t){return t===n})),t=t.taskList.current.subtaskObjects[s].current,a++};e.length>a;)i();window.preventSelect=!1,M(t),setTimeout((function(){window.preventReturn=!1}),100)}),100)}},{key:"componentDidMount",value:function(){setTimeout($,200)}},{key:"goToFirst",value:function(){this.goToSearch(c()(c()(this.searchResults.current).children()[0]).attr("value"))}},{key:"render",value:function(){var t=this;this.search=this.search.bind(this),this.goToSearch=this.goToSearch.bind(this),this.goToFirst=this.goToFirst.bind(this),this.searchResults=i.a.createRef(),this.searchBar=i.a.createRef(),this.options=i.a.createRef(),this.functions=i.a.createRef(),this.move=i.a.createRef(),this.upcoming=i.a.createRef();var e=Object.keys(this.props.deadlines).filter((function(t){return new Date(t).getTime()>=(new Date).getTime()}));return e=e.map((function(e){return t.props.deadlines[e].map((function(t){return[e,t]}))})).flat().filter((function(t){return t.length>0})),this.functionsDict={newTask:I,newSubtask:function(){return I("task")},cutTask:W,copyTask:B,copyTaskTrue:function(){return B(!0)},pasteTask:A,pasteTaskTask:function(){return A("task")},deleteTask:R,moveTaskUp:function(){return P(-1)},moveTaskDown:function(){return P(1)},switchView:function(){return V(1)},listEditMigrate:function(){return H("migrate")},listEditClear:function(){return H("clear")},displayTable:X,focus:Y,zoom:tt,undo:L,toggleComplete:function(){return window.app.current.toggleComplete()},backup:at,restore:st,reset:nt,toggleSounds:U,toggleMode:K,setThemeSpace:function(){return Q("space")},setThemeSky:function(){return Q("sky")},setThemeWater:function(){return Q("water")},setThemeEarth:function(){return Q("earth")},setThemeFire:function(){return Q("fire")},indent:F,unindent:function(){return F(!0)},togglePast:function(){0!==window.app.current.state.river.current.state.shownIndex?window.app.current.state.river.current.setState({shownIndex:0}):window.app.current.state.river.current.setState({shownIndex:window.app.current.state.river.current.todayIndex()}),$()}},Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"statusBar",children:[Object(b.jsxs)("span",{className:"title",children:[Object(b.jsx)("span",{className:"r",children:"River"}),Object(b.jsx)("span",{className:"b",children:"Bank"})]}),Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:"relative"},children:[Object(b.jsx)("input",{ref:this.searchBar,className:"searchBar",onChange:function(e){return t.search(e)},value:this.state.searchString,onKeyDown:function(e){"Backspace"===e.key?(e.preventDefault(),t.setState({searchString:"",foundTasks:{}})):"Enter"===e.key&&(e.preventDefault(),c()(t.searchResults.current).children().length>0&&t.goToFirst())},placeholder:"search"}),this.state.searchString.length>0&&Object(b.jsx)("select",{ref:this.searchResults,style:{width:"5em"},onChange:function(){t.goToSearch(t.searchResults.current.value)},children:Object.keys(this.state.foundTasks).map((function(e){return Object(b.jsx)("option",{value:e,children:t.state.foundTasks[e].title},e)}))})]}),Object(b.jsx)(lt,{}),Object(b.jsxs)("div",{className:"buttonBar nowrap",children:[Object(b.jsxs)("select",{defaultValue:"",ref:this.functions,style:{width:"35px"},onChange:function(){t.functionsDict[t.functions.current.value].call(),t.functions.current.value=""},children:[Object(b.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"edit"}),Object(b.jsx)("option",{value:"newTask",children:"new task (return)"}),Object(b.jsx)("option",{value:"newSubtask",children:"new subtask (shift-return)"}),Object(b.jsx)("option",{value:"cutTask",children:"cut (ctrl-x)"}),Object(b.jsx)("option",{value:"copyTask",children:"copy (ctrl-c)"}),Object(b.jsx)("option",{value:"copyTaskTrue",children:"mirror (ctrl-shift-C)"}),Object(b.jsx)("option",{value:"pasteTask",children:"paste (ctrl-v)"}),Object(b.jsx)("option",{value:"pasteTaskTask",children:"paste as subtask (ctrl-shift-V)"}),Object(b.jsx)("option",{value:"deleteTask",children:"delete (ctrl-delete)"})]}),Object(b.jsxs)("select",{defaultValue:"",ref:this.move,style:{width:"45px"},onChange:function(){t.functionsDict[t.move.current.value].call(),t.move.current.value=""},children:[Object(b.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"move"}),Object(b.jsx)("option",{value:"moveTaskUp",children:"move up (ctrl-w)"}),Object(b.jsx)("option",{value:"moveTaskDown",children:"move down (ctrl-s)"}),Object(b.jsx)("option",{value:"indent",children:"indent (ctrl-])"}),Object(b.jsx)("option",{value:"unindent",children:"unindent (ctrl-[)"}),Object(b.jsx)("option",{value:"switchView",children:"following week/lists (ctrl-d)"}),Object(b.jsx)("option",{value:"switchView(-1)",children:"previous week/lists (ctrl-a)"}),Object(b.jsx)("option",{value:"listEditMigrate",children:"migrate date"}),Object(b.jsx)("option",{value:"listEditClear",children:"clear list"}),Object(b.jsx)("option",{value:"displayTable",children:"display as table"}),Object(b.jsx)("option",{value:"togglePast",children:"show/hide past dates"})]}),Object(b.jsxs)("select",{defaultValue:"",ref:this.options,onChange:function(){t.functionsDict[t.options.current.value].call(),t.options.current.value=""},style:{width:"60px"},children:[Object(b.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"settings"}),Object(b.jsx)("option",{value:"focus",children:"focus on list (ctrl-f)"}),Object(b.jsx)("option",{value:"zoom",children:"focus on view (ctrl-shift-F)"}),Object(b.jsx)("option",{value:"toggleComplete",children:"show/hide complete (ctrl-h)"}),Object(b.jsx)("option",{value:"undo",children:"undo (ctrl-z)"}),Object(b.jsx)("option",{value:"backup",children:"backup"}),Object(b.jsx)("option",{value:"restore",children:"restore"}),Object(b.jsx)("option",{value:"reset",children:"reset"}),Object(b.jsx)("option",{value:"toggleSounds",children:"toggle sounds"}),Object(b.jsx)("option",{value:"toggleMode",children:"toggle day/night"}),Object(b.jsx)("option",{value:"setThemeSpace",children:"theme: space"}),Object(b.jsx)("option",{value:"setThemeSky",children:"theme: sky"}),Object(b.jsx)("option",{value:"setThemeWater",children:"theme: water"}),Object(b.jsx)("option",{value:"setThemeEarth",children:"theme: earth"}),Object(b.jsx)("option",{value:"setThemeFire",children:"theme: fire"})]}),Object(b.jsx)(ct,{}),Object(b.jsxs)("select",{defaultValue:"",ref:this.upcoming,onChange:function(){t.goToSearch(t.upcoming.current.value),t.upcoming.current.value=""},style:{width:"75px"},children:[Object(b.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"upcoming"}),e.map((function(t){return Object(b.jsxs)("option",{value:O(t[1]),children:[t[0].slice(0,t[0].length-5),": ",window.data.tasks[O(t[1])].title]})}))]})]}),Object(b.jsx)("span",{className:"tutorialLink",onClick:this.tutorial,children:"help"})]}),this.state.tutorial&&Object(b.jsx)("div",{className:"tutorial tutorialShow",children:Object(b.jsx)("iframe",{src:"https://www.youtube.com/embed/AcfqM2exBu0"})})]})}}]),n}(i.a.Component),ct=function(t){Object(h.a)(n,t);var e=Object(w.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).state={bankLists:t.bankLists,riverLists:t.riverLists},s}return Object(p.a)(n,[{key:"goToList",value:function(t){if("river"===t)_(this.riverLister.current.value);else if("bank"===t){var e=window.app.current.state.bank.current,n=this.bankLister;e.changeIndex(Number(n.current.value),!0)}"river"===t?this.riverLister.current.value="":"bank"===t&&(this.bankLister.current.value="")}},{key:"render",value:function(){var t=this;return this.riverLister=i.a.createRef(),this.bankLister=i.a.createRef(),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("select",{defaultValue:"",ref:this.bankLister,onChange:function(){return t.goToList("bank")},style:{width:"35px"},children:[Object(b.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"lists"}),window.data.tasks.bank.subtasks.filter((function(t){return"--"!==window.data.tasks[t].title})).map((function(t,e){return Object(b.jsx)("option",{value:e,children:window.data.tasks[t].title},t)}))]}),Object(b.jsxs)("select",{defaultValue:"",ref:this.riverLister,onChange:function(){"today"===t.riverLister.current.value?($(),t.riverLister.current.value=""):t.goToList("river")},style:{width:"45px"},children:[Object(b.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"dates"}),Object(b.jsx)("option",{value:"today",children:"today (ctrl-t)"}),window.data.tasks.river.subtasks.filter((function(t){return new Date(window.data.tasks[t].title).getTime()>=(new Date).getTime()})).map((function(t){return Object(b.jsx)("option",{value:window.data.tasks[t].title,children:window.data.tasks[t].title},t)}))]})]})}}]),n}(i.a.Component),lt=function(t){Object(h.a)(n,t);var e=Object(w.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).state={seconds:0,audio:new Audio(rt),start:new Audio(ot),startTime:void 0,ended:!1},s}return Object(p.a)(n,[{key:"startTimer",value:function(t){var e=new Date((new Date).getTime()+60*t*1e3).getTime();this.setState({endTime:e,seconds:60*t}),G(this.state.start),this.play()}},{key:"play",value:function(t,e){var n=this;Notification.requestPermission(),clearInterval(this.interval),this.setState({ended:!1}),"stopwatch"===t?(G(this.state.start),this.interval=setInterval((function(){n.setState({seconds:n.state.seconds+1})}),1e3)):this.interval=setInterval((function(){n.setState({seconds:Math.ceil((n.state.endTime-(new Date).getTime())/1e3)}),n.state.seconds<=0&&!1===n.state.ended&&n.end()}),1e3)}},{key:"end",value:function(){this.setState({play:!0,ended:!0}),G(this.state.audio),this.options.current.value="",new Notification("timer complete")}},{key:"playPause",value:function(){clearInterval(this.interval),this.setState({seconds:0}),this.options.current.value=""}},{key:"render",value:function(){var t,e=this;return this.startTimer=this.startTimer.bind(this),this.playPause=this.playPause.bind(this),this.play=this.play.bind(this),this.audioRef=i.a.createRef(),this.options=i.a.createRef(),t=this.state.seconds>=0?Math.floor(this.state.seconds/60)+":"+String(this.state.seconds-60*Math.floor(this.state.seconds/60)).padStart(2,"0"):this.state.seconds/60===Math.floor(this.state.seconds/60)&&0!==this.state.seconds?"-"+-1*Math.floor(this.state.seconds/60)+":00":"-"+-1*(Math.floor(this.state.seconds/60)+1)+":"+String(60-(this.state.seconds-60*Math.floor(this.state.seconds/60))).padStart(2,"0"),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{className:"timerBar",readOnly:!0,value:t}),Object(b.jsxs)("select",{value:"",ref:this.options,onChange:function(){"clear"===e.options.current.value?(e.playPause(),e.options.current.value=""):"stopwatch"===e.options.current.value?(e.setState({seconds:0}),e.play("stopwatch"),e.options.current.value=""):(e.startTimer(e.options.current.value),e.options.current.value="")},style:{width:"45px"},children:[Object(b.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"timer"}),Object(b.jsx)("option",{value:"clear",children:"--:--"}),Object(b.jsx)("option",{value:50,children:"50:00"}),Object(b.jsx)("option",{value:25,children:"25:00"}),Object(b.jsx)("option",{value:15,children:"15:00"}),Object(b.jsx)("option",{value:10,children:"10:00"}),Object(b.jsx)("option",{value:5,children:"5:00"}),Object(b.jsx)("option",{value:"stopwatch",title:"stopwatch",children:"\u221e"})]})]})}}]),n}(i.a.Component),ut=function(t){Object(h.a)(n,t);var e=Object(w.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).state={hideComplete:window.data.settings.hideComplete,bank:i.a.createRef(),river:i.a.createRef(),theme:window.data.settings.theme,mode:window.data.settings.mode,focused:window.data.settings.focused,popSnd:new Audio(it),zoomed:"",disableSelect:"",contextMenu:i.a.createRef(),deadlines:window.data.settings.deadlines,startdates:window.data.settings.startdates,displayTable:"none"},s}return Object(p.a)(n,[{key:"toggleComplete",value:function(){var t;t=""===this.state.hideComplete?"hideComplete":"",this.setState({hideComplete:t}),E("hideComplete",t),q()}},{key:"render",value:function(){return this.statusBar=i.a.createRef(),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(dt,{parent:this,ref:this.statusBar,deadlines:this.state.deadlines,startdates:this.state.startdates}),Object(b.jsxs)("div",{className:"container "+this.state.hideComplete+" "+this.state.zoomed+" "+this.state.disableSelect,children:[Object(b.jsx)(N,{id:"bank",info:Object(l.a)(Object(l.a)({},window.data.tasks.bank.info),{},{focused:window.data.settings.focused}),subtasks:window.data.tasks.bank.subtasks,ref:this.state.bank}),Object(b.jsx)(N,{id:"river",info:Object(l.a)(Object(l.a)({},window.data.tasks.river.info),{},{focused:window.data.settings.focused}),deadlines:this.state.deadlines,startdates:this.state.startdates,subtasks:window.data.tasks.river.subtasks,ref:this.state.river})]}),Object(b.jsx)(pt,{ref:this.state.contextMenu}),window.selected&&"none"!==this.state.displayTable&&Object(b.jsx)(ft,{})]})}}]),n}(i.a.Component),pt=function(t){Object(h.a)(n,t);var e=Object(w.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).state={display:"none",top:"0",left:"0"},s}return Object(p.a)(n,[{key:"render",value:function(){return this.self=i.a.createRef(),Object(b.jsxs)("div",{className:"selectMenu",ref:this.self,style:{display:this.state.display,top:this.state.top,left:this.state.left},children:[Object(b.jsx)("p",{className:"centerAlign",children:Object(b.jsx)("b",{children:"edit"})}),Object(b.jsxs)("p",{onClick:function(){return I()},children:["new task",Object(b.jsx)("span",{className:"rightAlign",children:"(return)"})]}),Object(b.jsxs)("p",{onClick:function(){return I("task")},children:["new subtask ",Object(b.jsx)("span",{className:"rightAlign",children:"(shift-return)"})]}),Object(b.jsxs)("p",{onClick:function(){return W()},children:["cut ",Object(b.jsx)("span",{className:"rightAlign",children:"(ctrl-x)"})]}),Object(b.jsxs)("p",{onClick:function(){return B()},children:["copy ",Object(b.jsx)("span",{className:"rightAlign",children:"(ctrl-c)"})]}),Object(b.jsxs)("p",{onClick:function(){return B(!0)},children:["mirror ",Object(b.jsx)("span",{className:"rightAlign",children:"(ctrl-shift-C)"})]}),Object(b.jsxs)("p",{onClick:function(){return A()},children:["paste ",Object(b.jsx)("span",{className:"rightAlign",children:"(ctrl-v)"})]}),Object(b.jsx)("p",{onClick:function(){return A("task")},children:"paste as subtask (ctrl-shift-V)"}),Object(b.jsxs)("p",{onClick:function(){if(window.selected&&window.selected instanceof m)window.selected.deleteThis();else if(window.selected&&window.selected instanceof v&&"bank"===window.selected.props.parent.props.id){if(window.confirm("delete this list?")){var t=window.selected.props.parent.state.subtasks;window.undoData=localStorage.getItem("data"),t.splice(t.findIndex((function(t){return t===window.selected.props.id})),1),window.selected.props.parent.setState({subtasks:t})}}},children:["delete ",Object(b.jsx)("span",{className:"rightAlign",children:"(ctrl-delete)"})]}),Object(b.jsx)("p",{className:"centerAlign",style:{marginTop:"5px"},children:Object(b.jsx)("b",{children:"move"})}),Object(b.jsxs)("p",{onClick:function(){return P(1)},children:["move down ",Object(b.jsx)("span",{className:"rightAlign",children:"(ctrl-s)"})]}),Object(b.jsxs)("p",{onClick:function(){return P(-1)},children:["move up ",Object(b.jsx)("span",{className:"rightAlign",children:"(ctrl-w)"})]}),Object(b.jsxs)("p",{onClick:function(){return V(1)},children:["following week/lists ",Object(b.jsx)("span",{className:"rightAlign",children:"(ctrl-d)"})]}),Object(b.jsxs)("p",{onClick:function(){return V(-1)},children:["previous week/lists ",Object(b.jsx)("span",{className:"rightAlign",children:"(ctrl-a)"})]}),Object(b.jsx)("p",{onClick:function(){return H("migrate")},children:"migrate date"}),Object(b.jsx)("p",{onClick:function(){return H("clear")},children:"clear list"}),Object(b.jsx)("p",{onClick:function(){return X()},children:"display as table"})]})}}]),n}(i.a.Component),ft=function(t){Object(h.a)(n,t);var e=Object(w.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("table",{className:"table",children:[Object(b.jsx)("thead",{}),Object(b.jsx)("tbody",{children:window.data.tasks[O(window.selected.props.id)].subtasks.map((function(t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:window.data.tasks[O(t)].title}),window.data.tasks[t].subtasks.map((function(t){return Object(b.jsx)("td",{children:window.data.tasks[O(t)].title},t)}))]},t)}))})]})}}]),n}(i.a.Component);n(26);window.themes={"earth-day":{"--font":"var(--fontSize) 'Quicksand', sans-serif","--fontSize":"30px","--fontWeight":"300","--bold":"400","--background":"rgb(218, 221, 216)","--border":"rgba(60, 52, 31, 0.3)","--select":"rgb(85, 107, 47)","--event":"rgba(85, 107, 47, 0.3)","--foreground":"rgb(59, 60, 54)","--midground":"rgba(59, 60, 54, 0.1)","--padding":"14px","--importantE":"rgba(85, 107, 47, 0.5)","--important":"rgba(59, 60, 54, 0.2)","--menufont":"24px Dosis","--startDate":"rgba(14, 41, 48, 0.8)","--endDate":"rgb(14, 41, 48)","--headingSize":"125%","--lineSpacing":"5px","--frontWidth":"2.5em","--bank":"rgba(59, 60, 54, 0.1)","--river":"rgba(85, 107, 47, 0.1)"},"earth-night":{"--font":"var(--fontSize) 'Quicksand', sans-serif","--fontSize":"30px","--fontWeight":"300","--bold":"400","--background":"rgb(35, 38, 33)","--border":"rgba(224, 223, 225, 0.3)","--select":"rgb(186, 208, 149)","--event":"rgba(186, 208, 149, 0.3)","--foreground":"rgb(218, 222, 200)","--midground":"rgba(59, 60, 54, 0.1)","--padding":"14px","--importantE":"rgba(186, 208, 149, 0.5)","--important":"rgba(218, 222, 200, 0.2)","--menufont":"24px Dosis","--startDate":"rgba(85, 107, 47, 0.8)","--endDate":"rgb(85, 107, 47)","--headingSize":"125%","--lineSpacing":"5px","--frontWidth":"2.5em","--bank":"rgba(218, 222, 200, 0.1)","--river":"rgba(186, 208, 149, 0.1)"},"fire-day":{"--font":"var(--fontSize) 'Josefin Sans', Cochin, sans-serif","--fontSize":"30px","--fontWeight":"100","--bold":"300","--background":"rgb(230, 230, 250)","--border":"rgba(53, 3, 58, 0.3)","--select":"rgb(242, 172, 229)","--event":"rgba(251, 217, 253, 0.3)","--foreground":"rgb(53, 3, 58)","--midground":"rgba(200, 200, 230, 0.1)","--padding":"14px","--importantE":"rgba(242, 172, 229, 0.5)","--important":"rgba(53, 3, 58, 0.2)","--menufont":"24px Dosis","--startDate":"rgba(226, 156, 210, 0.8)","--endDate":"rgb(226, 156, 210)","--headingSize":"120%","--lineSpacing":"10px","--frontWidth":"2.5em","--bank":"rgba(53, 3, 58, 0.1)","--river":"rgba(242, 172, 229, 0.1)"},"fire-night":{"--font":"var(--fontSize) 'Josefin Sans', Cochin, sans-serif","--fontSize":"30px","--fontWeight":"100","--bold":"300","--background":"rgb(5, 5, 26)","--border":"rgba(212, 112, 162, 0.3)","--select":"rgb(183, 104, 162)","--event":"rgba(183, 104, 162, 0.3)","--foreground":"rgb(248, 197, 252)","--midground":"rgba(40, 6, 34, 0.1)","--padding":"14px","--importantE":"rgba(183, 104, 162, 0.5)","--important":"rgba(248, 197, 252, 0.2)","--menufont":"24px Dosis","--startDate":"rgba(226, 156, 210, 0.8)","--endDate":"rgb(226, 156, 210)","--headingSize":"125%","--lineSpacing":"10px","--frontWidth":"2.5em","--bank":"rgba(248, 197, 252, 0.1)","--river":"rgba(183, 104, 162, 0.1)"},"sky-day":{"--font":"var(--fontSize) 'Pilo Thin', sans-serif","--fontSize":"30px","--fontWeight":"100","--bold":"300","--background":"#E4EDF1","--border":"rgba(21, 35, 40, 0.3)","--select":"rgb(119, 152, 171)","--event":"rgba(119, 152, 171, 0.3)","--foreground":"rgb(52, 64, 85)","--midground":"rgba(128, 128, 128, 0.1)","--padding":"14px","--importantE":"rgba(119, 152, 171, 0.5)","--important":"rgba(52, 64, 85, 0.2)","--maybe":"rgba(29, 41, 81, 0.5)","--menufont":"24px Dosis","--startDate":"rgba(29, 41, 81, 0.8)","--endDate":"rgb(29, 41, 81)","--headingSize":"125%","--lineSpacing":"5px","--frontWidth":"3em","--bank":"rgba(52, 64, 85, 0.1)","--river":"rgba(119, 152, 171, 0.1)"},"sky-night":{"--font":"var(--fontSize) 'Pilo Thin', sans-serif","--fontSize":"30px","--fontWeight":"100","--bold":"300","--background":"rgb(14, 23, 27)","--border":"rgba(36, 40, 43, 0.3)","--select":"rgb(83, 117, 136)","--event":"rgba(59, 75, 84, 0.3)","--foreground":"rgb(170, 182, 203)","--midground":"rgba(128, 128, 128, 0.1)","--padding":"14px","--importantE":"rgba(83, 117, 136, 0.5)","--important":"rgba(170, 182, 203, 0.2)","--menufont":"24px Dosis","--startDate":"rgba(173, 185, 225, 0.8)","--endDate":"rgb(173, 185, 225)","--headingSize":"125%","--lineSpacing":"5px","--frontWidth":"3em","--bank":"rgba(170, 182, 203, 0.1)","--river":"rgba(83, 117, 136, 0.1)"},"space-day":{"--font":"var(--fontSize) 'Adam', Cochin, sans-serif","--fontSize":"30px","--fontWeight":"300","--background":"rgb(201, 192, 187)","--border":"rgba(128, 128, 128, 0.3)","--select":"rgb(165, 113, 100)","--event":"rgba(165, 113, 100, 0.3)","--foreground":"rgba(59, 47, 47)","--midground":"rgba(165, 113, 100, 0.5)","--padding":"14px","--importantE":"rgba(165, 113, 100, 0.5)","--important":"rgba(59, 47, 47, 0.2)","--menufont":"24px Dosis","--startDate":"rgba(161, 122, 116, 0.8)","--endDate":"rgb(161, 122, 116)","--bold":"400","--headingSize":"125%","--lineSpacing":"5px","--frontWidth":"2.5em","--bank":"rgba(59, 47, 47, 0.1)","--river":"rgba(165, 113, 100, 0.1)"},"space-night":{"--font":"var(--fontSize) 'Adam', sans-serif","--fontSize":"30px","--fontWeight":"300","--background":"rgb(0, 0, 0)","--border":"rgb(128, 128, 128, 0.3)","--select":"rgb(101, 138, 149)","--event":"rgba(101, 138, 149, 0.3)","--foreground":"rgb(191, 193, 194)","--midground":"rgba(101, 138, 149, 0.1)","--padding":"14px","--importantE":"rgba(101, 138, 149, 0.5)","--important":"rgba(191, 193, 194, 0.2)","--maybe":"darkblue","--menufont":"24px Dosis","--startDate":"rgba(135,206,235, 0.8)","--endDate":"rgb(135,206,235)","--bold":"400","--headingSize":"125%","--lineSpacing":"5px","--frontWidth":"2.5em","--bank":"rgba(191, 193, 194, 0.1)","--river":"rgba(101, 138, 149, 0.1)"},"water-day":{"--font":"var(--fontSize) 'Kirvy', sans-serif","--fontSize":"30px","--fontWeight":"100","--background":"rgb(188, 212, 230)","--border":"rgba(36, 40, 43, 0.3)","--select":"rgb(64, 71, 77)","--event":"rgba(64, 71, 77, 0.3)","--foreground":"rgb(10, 10, 10)","--midground":"rgba(64, 71, 77, 0.1)","--padding":"14px","--importantE":"rgba(64, 71, 77, 0.5)","--important":"rgba(10, 10, 10, 0.2)","--maybe":"rgba(41, 74, 112, 0.5)","--menufont":"24px Dosis","--startDate":"rgb(41, 74, 112, 0.8)","--endDate":"rgb(41, 74, 112)","--bold":"300","--headingSize":"1.15em","--lineSpacing":"7px","--frontWidth":"3.5em","--bank":"rgba(10, 10, 10, 0.1)","--river":"rgba(64, 71, 77, 0.1)"},"water-night":{"--font":"var(--fontSize) 'Kirvy', sans-serif","--fontSize":"30px","--fontWeight":"100","--background":"rgb(31, 40, 52)","--border":"rgba(176, 194, 212, 0.3)","--select":"rgb(145, 163, 176)","--event":"rgba(145, 163, 176, 0.3)","--foreground":"whitesmoke","--midground":"rgba(145, 163, 176, 0.1)","--padding":"14px","--importantE":"rgba(145, 163, 176, 0.5)","--important":"rgba(245, 245, 245, 0.1)","--maybe":"rgba(143, 176, 214, 0.5)","--menufont":"24px Dosis","--startDate":"rgba(143, 176, 214, 0.8)","--endDate":"rgb(143, 176, 214)","--bold":"300","--headingSize":"1.15em","--lineSpacing":"7px","--frontWidth":"3.5em","--bank":"rgba(245, 245, 245, 0.1)","--river":"rgba(145, 163, 176, 0.1)"}},window.resetData={settings:{repeats:{Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[],Sun:[]},deadlines:{},startdates:{},theme:"space",mode:"night",focused:"",hideComplete:"",migrated:["12/1","12/2","12/3","12/24"],sounds:"true"},tasks:{1:{title:"Tutorial",info:{},subtasks:["1645101238483","1645101243036","1645101372574"]},river:{info:{index:0,focused:""},subtasks:["1645101218234"]},1645101218234:{title:"Thu Feb 17 2022",info:{},subtasks:["1645101261275","1645101293836"]},bank:{info:{index:0,focused:""},subtasks:["1"]},1645101238483:{title:"Welcome to RiverBank!",info:{complete:"",startDate:["--","--"],endDate:["--","--"],notes:"",type:"date",collapsed:"",excludes:[]},subtasks:["1645101279492"]},1645101243036:{title:"Add unscheduled tasks in the Bank view here",info:{complete:"",startDate:["--","--"],endDate:["--","--"],notes:"",type:"date",collapsed:"",excludes:[]},subtasks:["1645101270452"]},1645101261275:{title:"Add events in the River view here",info:{complete:"",startDate:["--","--"],endDate:["--","--"],notes:"",type:"event",collapsed:"",excludes:[]},subtasks:[]},1645101270452:{title:"Add subtasks",info:{complete:"",startDate:["--","--"],endDate:["--","--"],notes:"",type:"date",collapsed:"",excludes:[]},subtasks:[]},1645101279492:{title:"Right-click to view the menu.",info:{complete:"",startDate:["--","--"],endDate:["--","--"],notes:"",type:"date",collapsed:"",excludes:[]},subtasks:[]},1645101293836:{title:"Create times by clicking the green dot",info:{complete:"",startDate:[8,30],endDate:["--","--"],notes:"",type:"event",collapsed:"",excludes:[]},subtasks:["1645101351484","1645101355973"]},1645101344435:{title:"Reorder tasks by dragging the dot",info:{complete:"",startDate:["--","--"],endDate:["--","--"],notes:"",type:"event",collapsed:"",excludes:[]},subtasks:[]},1645101351484:{title:"Reorder tasks by dragging the dot",info:{complete:"",startDate:["--","--"],endDate:["--","--"],notes:"",type:"date",collapsed:"",excludes:[]},subtasks:[]},1645101355973:{title:'Hold "Command" then drag to drop as a subtask',info:{complete:"",startDate:["--","--"],endDate:["--","--"],notes:"",type:"date",collapsed:"",excludes:[]},subtasks:[]},1645101372574:{title:'View the tutorial by clicking the "help" menu',info:{complete:"",startDate:["--","--"],endDate:["--","--"],notes:"",type:"date",collapsed:"",excludes:[]},subtasks:[]}}},window.data=void 0,window.selected=void 0,window.preventSelect=void 0,window.copiedTask=void 0,window.app=void 0,window.preventReturn=void 0,window.undoData=localStorage.getItem("data");try{window.data=localStorage.getItem("data")?JSON.parse(localStorage.getItem("data")):window.resetData}catch(kt){window.data=window.resetData}if(window.data.settings.migrated||(window.data.settings.migrated=[]),!window.data.settings.migrated.includes("12/1")){var ht=function t(e){wt[e.id]={info:e.info,title:e.title,subtasks:e.subtasks.map((function(t){return t.id}))};var n,a=Object(s.a)(e.subtasks);try{for(a.s();!(n=a.n()).done;){t(n.value)}}catch(kt){a.e(kt)}finally{a.f()}delete e.subtasks};window.data.settings.migrated.push("12/1");var wt={},bt=JSON.parse(JSON.stringify(window.data));bt.river.id="river",bt.bank.id="bank",ht(bt.river),ht(bt.bank),delete bt.river,delete bt.bank,bt.tasks=wt,window.data=bt}if(!window.data.settings.migrated.includes("12/2")){window.data.settings.migrated.push("12/2");for(var gt=0,vt=Object.keys(window.data.tasks);gt<vt.length;gt++){var mt=vt[gt],jt=window.data.tasks[O(mt)];delete jt.info.startDate,delete jt.info.endDate}}window.data.settings.migrated.includes("12/3")||(window.data.settings.migrated.push("12/3"),window.data.settings.startdates={},window.data.settings.deadlines={}),window.data.settings.migrated.includes("12/24")||(window.data.settings.migrated.push("12/24"),window.data.settings.sounds="true"),function(){function t(t,e){for(var n=0,s=Object.keys(t);n<s.length;n++){var a=t[s[n]];a.includes(e)&&(a=a.splice(a.findIndex((function(t){return t===e})),1))}}var e,n=Object(s.a)(Object.keys(window.data.tasks).filter((function(t){return!["river","bank"].includes(t)})));try{for(n.s();!(e=n.n()).done;){for(var a=e.value,i=!1,r=0,o=Object.keys(window.data.tasks);r<o.length;r++){var d=o[r];if(window.data.tasks[d].subtasks.map((function(t){return O(t)})).includes(a)){i=!0;break}}!1===i&&(delete window.data.tasks[a],t(window.data.settings.deadlines,a),t(window.data.settings.startdates,a))}}catch(kt){n.e(kt)}finally{n.f()}for(var c=window.data.tasks.river.subtasks,l=c.length-1,u=(new Date).toDateString();0===window.data.tasks[c[l]].subtasks.length;){l--;var p=window.data.tasks[c[l]].title;if(0==l||p===u)break}l<c.length-1&&(window.data.tasks.river.subtasks=c.slice(0,l+1))}(),window.selected=void 0,window.width=Math.floor(window.innerWidth/200),window.prevWidth=Math.floor(window.innerWidth/200),window.app=i.a.createRef(),o.a.render(Object(b.jsx)(ut,{ref:window.app}),document.getElementById("root")),c()(document).on("keydown",et),Y(window.data.settings.focused),Q(window.data.settings.theme),window.addEventListener("resize",(function(){window.innerWidth/10===Math.floor(window.innerWidth/10)&&q()})),J(),window.setInterval(J,6e4),window.addEventListener("contextmenu",(function(t){t.preventDefault(),window.getSelection&&(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges());var e=window.app.current.state.contextMenu.current.self.current;window.app.current.state.contextMenu.current.setState({top:Math.min(t.pageY,window.innerHeight-c()(e).height()),left:Math.min(t.pageX,window.innerWidth-c()(e).width()),display:"block"})})),window.addEventListener("click",(function(){return window.app.current.state.contextMenu.current.setState({display:"none"})})),document.addEventListener("fullscreenchange",q)}},[[27,1,2]]]);
//# sourceMappingURL=main.db4ea38b.chunk.js.map