{"ast":null,"code":"var _jsxFileName = \"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/src/components/StatusBar/StatusBar.js\";\nimport React from 'react';\nimport './StatusBar.css';\nimport $ from '../../utils/jquery';\nimport timerSnd from './snd/timer.mp3';\nimport startSnd from './snd/start.mp3';\nimport * as display from '../../services/display/display';\nimport * as edit from '../../services/edit/edit';\nimport * as saving from '../../services/saving/saving';\nimport * as util from '../../services/util/util';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction toggleMode() {\n  if (window.data.settings.mode == 'night') {\n    window.data.settings.mode = 'day';\n  } else {\n    window.data.settings.mode = 'night';\n  }\n\n  display.setTheme(window.data.settings.theme);\n  localStorage.setItem('data', JSON.stringify(window.data));\n}\n\nfunction toggleSounds() {\n  if (window.data.settings.sounds == 'false') {\n    window.data.settings.sounds = 'true';\n    alert('sounds on');\n  } else {\n    window.data.settings.sounds = 'false';\n    alert('sounds off');\n  }\n}\n\nexport default class StatusBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchString: '',\n      foundTasks: {}\n    };\n  }\n\n  search(ev) {\n    if (this.state.searchString === '') {\n      this.searches = { ...window.data.tasks\n      };\n    }\n\n    this.setState({\n      searchString: ev.target.value\n    });\n\n    for (let x of Object.keys(this.searches)) {\n      if (!new RegExp(this.state.searchString, 'i').test(this.searches[x].title) || this.searches[x].info.complete === 'complete') {\n        delete this.searches[x];\n      }\n    } // id : {title, subtasks, info}\n\n\n    this.setState({\n      foundTasks: this.searches\n    });\n  }\n\n  goToSearch(id) {\n    window.preventReturn = true;\n    window.preventSelect = true;\n    var idList = [id];\n\n    function buildParents(otherId) {\n      for (let x of Object.keys(window.data.tasks)) {\n        if (window.data.tasks[util.stripR(x)].subtasks.includes(otherId)) {\n          idList.splice(0, 0, x);\n          buildParents(x);\n          return;\n        }\n      }\n    }\n\n    buildParents(id);\n    const frame = window.app.current.state[idList[0]].current;\n    const listIndex = frame.state.subtasks.findIndex(x => x === idList[1]);\n    frame.changeIndex(listIndex, true);\n    setTimeout(() => {\n      const list = frame.frames[0].current;\n      let foundTask = list;\n      let i = 2;\n\n      while (idList.length > i) {\n        // find in tasks starting at index 2 (if it's there)\n        let taskId = idList[i];\n        let taskIndex;\n\n        if (foundTask.subtasksCurrent && foundTask.subtasksCurrent.length > 0) {\n          taskIndex = foundTask.subtasksCurrent.findIndex(x => x === taskId);\n        } else {\n          taskIndex = foundTask.state.subtasks.findIndex(x => x === taskId);\n        }\n\n        foundTask = foundTask.taskList.current.subtaskObjects[taskIndex].current;\n        i++;\n      }\n\n      window.preventSelect = false;\n      edit.selectTask(foundTask);\n      this.setState({\n        searchString: '',\n        foundTasks: {}\n      }); // go through IDs and find the trace paths\n\n      setTimeout(() => {\n        window.preventReturn = false;\n      }, 100);\n    }, 100);\n  }\n\n  componentDidMount() {\n    setTimeout(display.goToToday, 200);\n  }\n\n  goToFirst() {\n    this.goToSearch($($(this.searchResults.current).children()[0]).attr('value'));\n  }\n\n  render() {\n    this.search = this.search.bind(this);\n    this.goToSearch = this.goToSearch.bind(this);\n    this.goToFirst = this.goToFirst.bind(this);\n    this.searchResults = /*#__PURE__*/React.createRef();\n    this.searchBar = /*#__PURE__*/React.createRef();\n    this.options = /*#__PURE__*/React.createRef();\n    this.functions = /*#__PURE__*/React.createRef();\n    this.move = /*#__PURE__*/React.createRef();\n    this.upcoming = /*#__PURE__*/React.createRef();\n    console.log(Object.keys(this.props.deadlines));\n    let deadlineItems = Object.keys(this.props.deadlines).filter(x => new Date(x).getTime() >= new Date().getTime());\n    console.log(deadlineItems);\n    deadlineItems = deadlineItems.map(x => this.props.deadlines[x].map(y => [x, y])).flat().filter(x => x.length > 0);\n    console.log(deadlineItems);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"statusBar\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        class: \"title\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"r\",\n          children: \"River\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"b\",\n          children: \"Bank\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: this.searchBar,\n          className: \"searchBar\",\n          onChange: ev => this.search(ev),\n          value: this.state.searchString,\n          onKeyDown: ev => {\n            if (ev.key === 'Backspace') {\n              ev.preventDefault();\n              this.setState({\n                searchString: '',\n                foundTasks: {}\n              });\n            } else if (ev.key === 'Enter') {\n              ev.preventDefault();\n\n              if ($(this.searchResults.current).children().length > 0) {\n                this.goToFirst();\n              }\n            }\n          },\n          placeholder: \"search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), this.state.searchString.length > 0 && /*#__PURE__*/_jsxDEV(\"select\", {\n          ref: this.searchResults,\n          style: {\n            width: '5em'\n          },\n          onChange: () => {\n            this.goToSearch(this.searchResults.current.value);\n          },\n          children: Object.keys(this.state.foundTasks).map(x => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: x,\n            children: this.state.foundTasks[x].title\n          }, x, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Timer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttonBar nowrap\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          ref: this.functions,\n          style: {\n            width: '35px'\n          },\n          onChange: () => {\n            eval(this.functions.current.value);\n            this.functions.current.value = '';\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            selected: true,\n            disabled: true,\n            hidden: true,\n            children: \"edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.newTask()\",\n            children: \"new task (return)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.cutTask()\",\n            children: \"cut (ctrl-x)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.copyTask()\",\n            children: \"copy (ctrl-c)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.copyTask(true)\",\n            children: \"mirror (ctrl-shift-C)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.pasteTask()\",\n            children: \"paste (ctrl-v)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.pasteTask(\\\"task\\\")\",\n            children: \"paste as subtask (ctrl-shift-V)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.deleteTask()\",\n            children: \"delete (ctrl-delete)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          ref: this.move,\n          style: {\n            width: '45px'\n          },\n          onChange: () => {\n            eval(this.move.current.value);\n            this.move.current.value = '';\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            selected: true,\n            disabled: true,\n            hidden: true,\n            children: \"move\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.moveTask(1)\",\n            children: \"move down (ctrl-s)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.moveTask(-1)\",\n            children: \"move up (ctrl-w)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"switchView(1)\",\n            children: \"following week/lists (ctrl-d)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"switchView(-1)\",\n            children: \"previous week/lists (ctrl-a)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.listEdit('migrate')\",\n            children: \"migrate date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.listEdit('clear')\",\n            children: \"clear list\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"display.displayTable()\",\n            children: \"display as table\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          ref: this.options,\n          onChange: () => {\n            eval(this.options.current.value);\n            this.options.current.value = '';\n          },\n          style: {\n            width: '60px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            selected: true,\n            disabled: true,\n            hidden: true,\n            children: \"settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"focus()\",\n            children: \"focus on list (ctrl-f)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"display.zoom()\",\n            children: \"focus on view (ctrl-shift-F)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"window.app.current.toggleComplete()\",\n            children: \"show/hide complete (ctrl-h)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"edit.undo()\",\n            children: \"edit.undo (ctrl-z)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"saving.backup()\",\n            children: \"saving.backup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"saving.restore()\",\n            children: \"saving.restore\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"saving.reset()\",\n            children: \"saving.reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"toggleSounds()\",\n            children: \"toggle sounds\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"display.toggleMode()\",\n            children: \"toggle day/night\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"display.setTheme(\\\"space\\\")\",\n            children: \"theme: space\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"display.setTheme(\\\"sky\\\")\",\n            children: \"theme: sky\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"display.setTheme(\\\"water\\\")\",\n            children: \"theme: water\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"display.setTheme(\\\"earth\\\")\",\n            children: \"theme: earth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"display.setTheme(\\\"fire\\\")\",\n            children: \"theme: fire\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ListMenu, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          ref: this.upcoming,\n          onChange: () => {\n            this.goToSearch(this.upcoming.current.value);\n            this.upcoming.current.value = '';\n          },\n          style: {\n            width: '75px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            selected: true,\n            disabled: true,\n            hidden: true,\n            children: \"upcoming\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this), deadlineItems.map(x => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: util.stripR(x[1]),\n            children: [x[0].slice(0, x[0].length - 5), \": \", window.data.tasks[util.stripR(x[1])].title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass ListMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bankLists: props.bankLists,\n      riverLists: props.riverLists\n    };\n  }\n\n  goToList(type) {\n    if (type === 'river') {\n      display.searchDate(this.riverLister.current.value);\n    } else if (type === 'bank') {\n      var parent = window.app.current.state.bank.current;\n      var list = this.bankLister;\n      parent.changeIndex(Number(list.current.value), true);\n    }\n\n    if (type === 'river') {\n      this.riverLister.current.value = '';\n    } else if (type === 'bank') {\n      this.bankLister.current.value = '';\n    }\n  }\n\n  render() {\n    this.riverLister = /*#__PURE__*/React.createRef();\n    this.bankLister = /*#__PURE__*/React.createRef();\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        ref: this.bankLister,\n        onChange: () => this.goToList('bank'),\n        style: {\n          width: '35px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          selected: true,\n          disabled: true,\n          hidden: true,\n          children: \"lists\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), window.data.tasks['bank'].subtasks.filter(x => window.data.tasks[x].title != '--').map((x, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: index,\n          children: window.data.tasks[x].title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        ref: this.riverLister,\n        onChange: () => {\n          if (this.riverLister.current.value == 'today') {\n            display.goToToday();\n            this.riverLister.current.value = '';\n          } else {\n            this.goToList('river');\n          }\n        },\n        style: {\n          width: '45px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          selected: true,\n          disabled: true,\n          hidden: true,\n          children: \"dates\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"today\",\n          children: \"today (ctrl-t)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), window.data.tasks['river'].subtasks.filter(x => new Date(window.data.tasks[x].title).getTime() >= new Date().getTime()).map(x => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: window.data.tasks[x].title,\n          children: window.data.tasks[x].title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nclass Timer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      seconds: 0,\n      audio: new Audio(timerSnd),\n      start: new Audio(startSnd),\n      startTime: undefined,\n      ended: false\n    };\n  }\n\n  startTimer(val) {\n    const endTime = new Date(new Date().getTime() + val * 60 * 1000).getTime();\n    this.setState({\n      endTime: endTime,\n      seconds: val * 60\n    });\n    display.playSound(this.state.start);\n    this.play();\n  }\n\n  play(stopwatch, backwards) {\n    var permission = Notification.requestPermission();\n    const multiplier = backwards ? -1 : 1;\n    clearInterval(this.interval);\n    this.setState({\n      ended: false\n    });\n\n    if (stopwatch == 'stopwatch') {\n      display.playSound(this.state.start);\n      this.interval = setInterval(() => {\n        this.setState({\n          seconds: this.state.seconds + 1\n        });\n      }, 1000);\n    } else {\n      this.interval = setInterval(() => {\n        this.setState({\n          seconds: Math.ceil((this.state.endTime - new Date().getTime()) / 1000)\n        });\n\n        if (this.state.seconds <= 0 && this.state.ended === false) {\n          this.end();\n        }\n      }, 1000);\n    }\n  }\n\n  end() {\n    this.setState({\n      play: true,\n      ended: true\n    });\n    display.playSound(this.state.audio);\n    this.options.current.value = '';\n    var alert = new Notification('timer complete');\n  }\n\n  playPause() {\n    clearInterval(this.interval);\n    this.setState({\n      seconds: 0\n    });\n    this.options.current.value = '';\n  }\n\n  render() {\n    this.startTimer = this.startTimer.bind(this);\n    this.playPause = this.playPause.bind(this);\n    this.play = this.play.bind(this);\n    this.audioRef = /*#__PURE__*/React.createRef();\n    this.options = /*#__PURE__*/React.createRef();\n\n    if (this.state.seconds >= 0) {\n      var timeReadout = Math.floor(this.state.seconds / 60) + ':' + String(this.state.seconds - Math.floor(this.state.seconds / 60) * 60).padStart(2, '0');\n    } else {\n      if (this.state.seconds / 60 === Math.floor(this.state.seconds / 60) && this.state.seconds != 0) {\n        // right on minute\n        var timeReadout = '-' + -1 * Math.floor(this.state.seconds / 60) + ':00';\n      } else {\n        var timeReadout = '-' + -1 * (Math.floor(this.state.seconds / 60) + 1) + ':' + String(60 - (this.state.seconds - Math.floor(this.state.seconds / 60) * 60)).padStart(2, '0');\n      }\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"timerBar\",\n        readOnly: true,\n        value: timeReadout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        ref: this.options,\n        onChange: () => {\n          if (this.options.current.value === 'clear') {\n            this.playPause();\n            this.options.current.value = '';\n          } else if (this.options.current.value === 'stopwatch') {\n            this.setState({\n              seconds: 0\n            });\n            this.play('stopwatch');\n            this.options.current.value = '';\n          } else {\n            this.startTimer(this.options.current.value);\n            this.options.current.value = '';\n          }\n        },\n        style: {\n          width: '45px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          selected: true,\n          disabled: true,\n          hidden: true,\n          children: \"timer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 'clear',\n          children: \"--:--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 50,\n          children: \"50:00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 25,\n          children: \"25:00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 15,\n          children: \"15:00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 10,\n          children: \"10:00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 5,\n          children: \"5:00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 'stopwatch',\n          title: \"stopwatch\",\n          children: \"\\u221E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"sources":["/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/src/components/StatusBar/StatusBar.js"],"names":["React","$","timerSnd","startSnd","display","edit","saving","util","toggleMode","window","data","settings","mode","setTheme","theme","localStorage","setItem","JSON","stringify","toggleSounds","sounds","alert","StatusBar","Component","constructor","props","state","searchString","foundTasks","search","ev","searches","tasks","setState","target","value","x","Object","keys","RegExp","test","title","info","complete","goToSearch","id","preventReturn","preventSelect","idList","buildParents","otherId","stripR","subtasks","includes","splice","frame","app","current","listIndex","findIndex","changeIndex","setTimeout","list","frames","foundTask","i","length","taskId","taskIndex","subtasksCurrent","taskList","subtaskObjects","selectTask","componentDidMount","goToToday","goToFirst","searchResults","children","attr","render","bind","createRef","searchBar","options","functions","move","upcoming","console","log","deadlines","deadlineItems","filter","Date","getTime","map","y","flat","flexDirection","position","key","preventDefault","width","eval","slice","ListMenu","bankLists","riverLists","goToList","type","searchDate","riverLister","parent","bank","bankLister","Number","index","Timer","seconds","audio","Audio","start","startTime","undefined","ended","startTimer","val","endTime","playSound","play","stopwatch","backwards","permission","Notification","requestPermission","multiplier","clearInterval","interval","setInterval","Math","ceil","end","playPause","audioRef","timeReadout","floor","String","padStart"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './StatusBar.css';\nimport $ from '../../utils/jquery';\nimport timerSnd from './snd/timer.mp3';\nimport startSnd from './snd/start.mp3';\nimport * as display from '../../services/display/display';\nimport * as edit from '../../services/edit/edit';\nimport * as saving from '../../services/saving/saving';\nimport * as util from '../../services/util/util';\n\nfunction toggleMode() {\n  if (window.data.settings.mode == 'night') {\n    window.data.settings.mode = 'day';\n  } else {\n    window.data.settings.mode = 'night';\n  }\n  display.setTheme(window.data.settings.theme);\n  localStorage.setItem('data', JSON.stringify(window.data));\n}\n\nfunction toggleSounds() {\n  if (window.data.settings.sounds == 'false') {\n    window.data.settings.sounds = 'true';\n    alert('sounds on');\n  } else {\n    window.data.settings.sounds = 'false';\n    alert('sounds off');\n  }\n}\n\nexport default class StatusBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { searchString: '', foundTasks: {} };\n  }\n  search(ev) {\n    if (this.state.searchString === '') {\n      this.searches = { ...window.data.tasks };\n    }\n    this.setState({ searchString: ev.target.value });\n    for (let x of Object.keys(this.searches)) {\n      if (!new RegExp(this.state.searchString, 'i').test(\n        this.searches[x].title) ||\n        this.searches[x].info.complete === 'complete') {\n        delete this.searches[x];\n      }\n    }\n    // id : {title, subtasks, info}\n    this.setState({ foundTasks: this.searches });\n  }\n  goToSearch(id) {\n    window.preventReturn = true;\n    window.preventSelect = true;\n    var idList = [id];\n    function buildParents(otherId) {\n      for (let x of Object.keys(window.data.tasks)) {\n        if (window.data.tasks[util.stripR(x)].subtasks.includes(otherId)) {\n          idList.splice(0, 0, x);\n          buildParents(x);\n          return;\n        }\n      }\n    }\n    buildParents(id);\n    const frame = window.app.current.state[idList[0]].current;\n    const listIndex = frame.state.subtasks.findIndex(x => x === idList[1]);\n    frame.changeIndex(listIndex, true);\n    setTimeout(() => {\n      const list = frame.frames[0].current;\n      let foundTask = list;\n      let i = 2;\n      while (idList.length > i) {\n        // find in tasks starting at index 2 (if it's there)\n        let taskId = idList[i];\n        let taskIndex;\n        if (foundTask.subtasksCurrent &&\n          foundTask.subtasksCurrent.length > 0) {\n          taskIndex = foundTask.subtasksCurrent\n            .findIndex(x => x === taskId);\n        } else {\n          taskIndex = foundTask.state.subtasks\n            .findIndex(x => x === taskId);\n        }\n        foundTask = foundTask.taskList.current\n          .subtaskObjects[taskIndex].current;\n        i++;\n      }\n      window.preventSelect = false;\n      edit.selectTask(foundTask);\n      this.setState({ searchString: '', foundTasks: {} });\n      // go through IDs and find the trace paths\n      setTimeout(() => {\n        window.preventReturn = false;\n      }, 100);\n    }, 100);\n  }\n  componentDidMount() {\n    setTimeout(display.goToToday, 200);\n  }\n  goToFirst() {\n    this.goToSearch($($(this.searchResults.current)\n      .children()[0]).attr('value'));\n  }\n  render() {\n    this.search = this.search.bind(this);\n    this.goToSearch = this.goToSearch.bind(this);\n    this.goToFirst = this.goToFirst.bind(this);\n    this.searchResults = React.createRef();\n    this.searchBar = React.createRef();\n    this.options = React.createRef();\n    this.functions = React.createRef();\n    this.move = React.createRef();\n    this.upcoming = React.createRef();\n    console.log(Object.keys(this.props.deadlines));\n    let deadlineItems = Object.keys(this.props.deadlines).filter(\n      x => new Date(x).getTime() >= new Date().getTime()\n    )\n    console.log(deadlineItems);\n    deadlineItems = deadlineItems.map(x => (\n      this.props.deadlines[x].map(y => [x, y])\n    )).flat().filter(x => x.length > 0);\n    console.log(deadlineItems);\n    return (\n      <div className='statusBar'>\n        <span class='title'><span class='r'>River</span>\n          <span class='b'>Bank</span></span>\n        <div style={{\n          display: 'flex', flexDirection: 'column',\n          position: 'relative'\n        }}>\n          <input\n            ref={this.searchBar}\n            className='searchBar' onChange={(ev) => this.search(ev)}\n            value={this.state.searchString}\n            onKeyDown={(ev) => {\n              if (ev.key === 'Backspace') {\n                ev.preventDefault();\n                this.setState({ searchString: '', foundTasks: {} });\n              } else if (ev.key === 'Enter') {\n                ev.preventDefault();\n                if ($(this.searchResults.current).children().length > 0) {\n                  this.goToFirst();\n                }\n              }\n            }}\n            placeholder='search'></input>\n          {this.state.searchString.length > 0 &&\n            <select ref={this.searchResults}\n              style={{ width: '5em' }}\n              onChange={() => {\n                this.goToSearch(this.searchResults.current.value)\n              }}>\n              {Object.keys(this.state.foundTasks).map(x =>\n                <option key={x} value={x}>\n                  {this.state.foundTasks[x].title}\n                </option>)}\n            </select>\n          }\n        </div>\n        <Timer />\n        <div className='buttonBar nowrap'>\n          <select ref={this.functions} style={{ width: '35px' }}\n            onChange={() => {\n              eval(this.functions.current.value);\n              this.functions.current.value = '';\n            }}>\n            <option value=\"\" selected disabled hidden>edit</option>\n            <option value='edit.newTask()'>\n              new task (return)</option>\n            <option value='edit.cutTask()'>\n              cut (ctrl-x)</option>\n            <option value='edit.copyTask()'>\n              copy (ctrl-c)</option>\n            <option value='edit.copyTask(true)'>\n              mirror (ctrl-shift-C)</option>\n            <option value='edit.pasteTask()'>\n              paste (ctrl-v)</option>\n            <option value='edit.pasteTask(\"task\")'>\n              paste as subtask (ctrl-shift-V)</option>\n            <option value=\"edit.deleteTask()\">\n              delete (ctrl-delete)</option>\n          </select>\n          <select ref={this.move} style={{ width: '45px' }}\n            onChange={() => {\n              eval(this.move.current.value);\n              this.move.current.value = '';\n            }}>\n            <option value=\"\" selected disabled hidden>move</option>\n            <option value=\"edit.moveTask(1)\">\n              move down (ctrl-s)</option>\n            <option value=\"edit.moveTask(-1)\">\n              move up (ctrl-w)</option>\n            <option value=\"switchView(1)\">\n              following week/lists (ctrl-d)</option>\n            <option value=\"switchView(-1)\">\n              previous week/lists (ctrl-a)</option>\n            <option value=\"edit.listEdit('migrate')\">\n              migrate date</option>\n            <option value=\"edit.listEdit('clear')\">\n              clear list</option>\n            <option value=\"display.displayTable()\">\n              display as table</option>\n          </select>\n          <select ref={this.options} onChange={() => {\n            eval(this.options.current.value);\n            this.options.current.value = '';\n          }}\n            style={{ width: '60px' }}>\n            <option value=\"\" selected disabled hidden>settings</option>\n            <option value='focus()'>focus on list (ctrl-f)</option>\n            <option value='display.zoom()'>focus on view (ctrl-shift-F)</option>\n            <option value='window.app.current.toggleComplete()'>\n              show/hide complete (ctrl-h)</option>\n            <option value='edit.undo()'>edit.undo (ctrl-z)</option>\n            <option value='saving.backup()'>saving.backup</option>\n            <option value='saving.restore()'>saving.restore</option>\n            <option value='saving.reset()'>saving.reset</option>\n            <option value='toggleSounds()'>toggle sounds</option>\n            <option value='display.toggleMode()'>toggle day/night</option>\n            <option value='display.setTheme(\"space\")'>theme: space</option>\n            <option value='display.setTheme(\"sky\")'>theme: sky</option>\n            <option value='display.setTheme(\"water\")'>theme: water</option>\n            <option value='display.setTheme(\"earth\")'>theme: earth</option>\n            <option value='display.setTheme(\"fire\")'>theme: fire</option>\n          </select>\n          <ListMenu />\n          <select ref={this.upcoming} onChange={() => {\n            this.goToSearch(this.upcoming.current.value);\n            this.upcoming.current.value = '';\n          }} style={{width: '75px'}}>\n            <option value=\"\" selected disabled hidden>upcoming</option>\n            {deadlineItems.map(x => (\n              <option value={util.stripR(x[1])}>\n                {x[0].slice(0, x[0].length - 5)}: {\n                window.data.tasks[util.stripR(x[1])].title}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n    )\n  }\n}\n\nclass ListMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { bankLists: props.bankLists, riverLists: props.riverLists };\n  }\n  goToList(type) {\n    if (type === 'river') {\n      display.searchDate(this.riverLister.current.value);\n    } else if (type === 'bank') {\n      var parent = window.app.current.state.bank.current;\n      var list = this.bankLister;\n      parent.changeIndex(Number(list.current.value), true);\n    }\n\n    if (type === 'river') {\n      this.riverLister.current.value = '';\n    } else if (type === 'bank') {\n      this.bankLister.current.value = '';\n    }\n  }\n  render() {\n    this.riverLister = React.createRef();\n    this.bankLister = React.createRef();\n    return (\n      <>\n        <select ref={this.bankLister} onChange={() => this.goToList('bank')}\n          style={{ width: '35px' }}>\n          <option value=\"\" selected disabled hidden>lists</option>\n          {window.data.tasks['bank'].subtasks.filter(\n            x => window.data.tasks[x].title != '--')\n            .map((x, index) =>\n              <option value={index}>{window.data.tasks[x].title}</option>)}\n        </select>\n        <select ref={this.riverLister} onChange={() => {\n          if (this.riverLister.current.value == 'today') {\n            display.goToToday();\n            this.riverLister.current.value = '';\n          } else {\n            this.goToList('river')\n          }\n        }}\n          style={{ width: '45px' }}>\n          <option value=\"\" selected disabled hidden>dates</option>\n          <option value='today'>today (ctrl-t)</option>\n          {window.data.tasks['river'].subtasks.filter(x => new Date(\n            window.data.tasks[x].title).getTime() >=\n            new Date().getTime())\n            .map((x) =>\n              <option value={window.data.tasks[x].title}>\n                {window.data.tasks[x].title}</option>)}\n        </select>\n      </>\n    )\n  }\n}\n\nclass Timer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      seconds: 0,\n      audio: new Audio(timerSnd),\n      start: new Audio(startSnd),\n      startTime: undefined,\n      ended: false,\n    };\n\n  }\n  startTimer(val) {\n    const endTime =\n      new Date(new Date().getTime() + val * 60 * 1000).getTime();\n    this.setState({ endTime: endTime, seconds: val * 60 });\n    display.playSound(this.state.start);\n    this.play();\n  }\n  play(stopwatch, backwards) {\n    var permission = Notification.requestPermission();\n    const multiplier = backwards ? -1 : 1;\n    clearInterval(this.interval);\n    this.setState({ ended: false });\n    if (stopwatch == 'stopwatch') {\n      display.playSound(this.state.start);\n      this.interval = setInterval(() => {\n        this.setState({ seconds: this.state.seconds + 1 });\n      }, 1000);\n    } else {\n      this.interval = setInterval(() => {\n        this.setState({\n          seconds: Math.ceil((this.state.endTime -\n            new Date().getTime()) / 1000)\n        });\n        if (this.state.seconds <= 0 && this.state.ended === false) {\n          this.end();\n        }\n      }, 1000);\n    }\n  }\n  end() {\n    this.setState({ play: true, ended: true });\n    display.playSound(this.state.audio);\n    this.options.current.value = '';\n    var alert = new Notification('timer complete');\n  }\n  playPause() {\n    clearInterval(this.interval);\n    this.setState({ seconds: 0 });\n    this.options.current.value = '';\n  }\n  render() {\n    this.startTimer = this.startTimer.bind(this);\n    this.playPause = this.playPause.bind(this);\n    this.play = this.play.bind(this);\n    this.audioRef = React.createRef();\n    this.options = React.createRef();\n    if (this.state.seconds >= 0) {\n      var timeReadout = Math.floor(this.state.seconds / 60) + ':' +\n        String(this.state.seconds -\n          (Math.floor(this.state.seconds / 60) * 60))\n          .padStart(2, '0')\n    } else {\n      if ((this.state.seconds / 60) === Math.floor(this.state.seconds / 60)\n        && this.state.seconds != 0) {\n        // right on minute\n        var timeReadout = '-' +\n          (-1 * (Math.floor(this.state.seconds / 60))) + ':00'\n      } else {\n        var timeReadout = '-' +\n          (-1 * (Math.floor(this.state.seconds / 60) + 1)) + ':' +\n          String(60 - (this.state.seconds -\n            (Math.floor(this.state.seconds / 60) * 60)))\n            .padStart(2, '0')\n      }\n    }\n    return (\n      <>\n        <input className='timerBar' readOnly={true}\n          value={timeReadout}></input>\n        <select ref={this.options} onChange={() => {\n          if (this.options.current.value === 'clear') {\n            this.playPause();\n            this.options.current.value = '';\n          } else if (this.options.current.value === 'stopwatch') {\n            this.setState({ seconds: 0 });\n            this.play('stopwatch');\n            this.options.current.value = '';\n          } else {\n            this.startTimer(this.options.current.value);\n            this.options.current.value = '';\n          }\n        }}\n          style={{ width: '45px' }}>\n          <option value=\"\" selected disabled hidden>timer</option>\n          <option value={'clear'}>--:--</option>\n          <option value={50}>50:00</option>\n          <option value={25}>25:00</option>\n          <option value={15}>15:00</option>\n          <option value={10}>10:00</option>\n          <option value={5}>5:00</option>\n          <option value={'stopwatch'} title='stopwatch'>&infin;</option>\n        </select>\n      </>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}