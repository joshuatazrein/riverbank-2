{"ast":null,"code":"import $ from 'jquery';\nimport * as edit from '../edit/edit';\nimport * as util from '../util/util';\nimport Task from '../../components/Task/Task';\nexport function checkTimes() {\n  const today = new Date();\n  const now = [today.getHours(), today.getMinutes()];\n  const dateString = today.toDateString();\n  const list = window.data.tasks[Object.keys(window.data.tasks).find(x => window.data.tasks[x].title === dateString)];\n  if (!list) return;\n  const todayList = list.subtasks;\n\n  for (let task of todayList) {\n    const taskEntry = window.data.tasks[util.stripR(task)];\n\n    if (taskEntry.info.type === 'event' && taskEntry.info.complete !== 'complete' && !taskEntry.info.startDate.includes('--')) {\n      if (taskEntry.info.startDate[0] === now[0] && taskEntry.info.startDate[1] === now[1]) {\n        var permission = Notification.requestPermission();\n        const notification = new Notification('Event: ' + taskEntry.title);\n        break;\n      } else {\n        const newDate = new Date();\n        newDate.setHours(taskEntry.info.startDate[0]);\n        newDate.setMinutes(taskEntry.info.startDate[1]);\n        newDate.setMinutes(newDate.getMinutes() - 15);\n\n        if (taskEntry.info.type === 'event' && newDate.getHours() === now[0] && newDate.getMinutes() === now[1]) {\n          var permission = Notification.requestPermission();\n          const notification = new Notification('in 15: ' + taskEntry.title);\n        }\n      }\n    }\n  }\n}\nexport function switchView(direction) {\n  if (!window.selected) return;\n  let parent = window.selected;\n\n  while (parent instanceof Task) {\n    parent = parent.props.parent;\n  }\n\n  parent.props.parent.changeIndex(direction);\n  updateAllSizes();\n}\nexport function focus(set) {\n  if (set != undefined) {\n    var focusSet = set;\n  } else {\n    if (window.app.current.state.bank.current.state.info.focused == 'focused') {\n      var focusSet = '';\n    } else {\n      var focusSet = 'focused';\n    }\n  }\n\n  if (window.selected) {\n    // set the index of the focused list to the window.selected list\n    let focusView = window.selected;\n\n    while (focusView instanceof Task) {\n      focusView = focusView.props.parent;\n    }\n\n    focusView.props.parent.changeIndex(focusView.props.parent.frames.findIndex(x => x.current.props.id == focusView.props.id));\n  }\n\n  window.app.current.state.bank.current.setState(prevState => ({\n    info: { ...prevState.info,\n      focused: focusSet\n    },\n    width: processWidth(focusSet)\n  }));\n  window.app.current.state.river.current.setState(prevState => ({\n    info: { ...prevState.info,\n      focused: focusSet\n    },\n    width: processWidth(focusSet)\n  }));\n  edit.saveSetting('focused', focusSet);\n  updateAllSizes();\n}\nexport function updateAllSizes() {\n  function update(list) {\n    if (list.current instanceof Task) {\n      list.current.updateHeight();\n    }\n\n    for (let task of list.current.taskList.current.subtaskObjects) {\n      update(task);\n    }\n  }\n\n  const riverLists = window.app.current.state.river.current.frames;\n  const bankLists = window.app.current.state.bank.current.frames;\n\n  for (let list of riverLists.concat(bankLists)) {\n    update(list);\n  }\n}\nexport function setTheme(theme) {\n  const newTheme = window.themes[theme + '-' + window.data.settings.mode];\n\n  for (let key of Object.keys(newTheme)) {\n    document.documentElement.style.setProperty(key, newTheme[key]);\n  }\n\n  window.data.settings.theme = theme;\n  localStorage.setItem('data', JSON.stringify(window.data));\n  setTimeout(updateAllSizes, 100);\n}\nexport function displayTable() {\n  if (window.app.current.state.displayTable === 'none' && window.selected) {\n    window.app.current.setState({\n      displayTable: 'true'\n    });\n  } else {\n    window.app.current.setState({\n      displayTable: 'none'\n    });\n  }\n\n  console.log(window.app.current.state.displayTable);\n}\nexport function playSound(sound) {\n  if (window.data.settings.sounds === 'true') {\n    sound.play();\n  }\n}\nexport function processWidth(focused) {\n  if (focused != 'focused') {\n    var width = Math.floor(window.innerWidth / 250);\n    $(':root').css('--frameWidth', (window.innerWidth - 40) / width + 'px');\n  } else {\n    // focus mode\n    var width = 1;\n    $(':root').css('--frameWidth', 'calc(100% - 24px)');\n  }\n\n  return width;\n}\nexport function goToToday() {\n  searchDate(new Date().toDateString());\n}\nexport function searchDate(text, type) {\n  setTimeout(() => {\n    window.app.current.statusBar.current.search({\n      target: {\n        value: text\n      }\n    });\n    window.app.current.statusBar.current.goToFirst();\n  }, 100);\n}\nexport function zoom() {\n  // zoom everything upwards\n  if (window.app.current.state.zoomed === 'zoomed') {\n    var zoomedSetting = '';\n  } else {\n    var zoomedSetting = 'zoomed';\n\n    if (!window.selected) {\n      return;\n    }\n\n    ; // no zoomie\n  }\n\n  var zoomFrame = util.getFrame(window.selected);\n  zoomFrame.setState({\n    zoomed: zoomedSetting\n  });\n  window.app.current.setState({\n    zoomed: zoomedSetting\n  });\n\n  if (!window.zoomed) {\n    // unzoom\n    window.zoomed = window.selected;\n  } else {\n    window.zoomed = undefined;\n  }\n\n  setTimeout(updateAllSizes, 200);\n}","map":{"version":3,"sources":["/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/src/services/display/display.js"],"names":["$","edit","util","Task","checkTimes","today","Date","now","getHours","getMinutes","dateString","toDateString","list","window","data","tasks","Object","keys","find","x","title","todayList","subtasks","task","taskEntry","stripR","info","type","complete","startDate","includes","permission","Notification","requestPermission","notification","newDate","setHours","setMinutes","switchView","direction","selected","parent","props","changeIndex","updateAllSizes","focus","set","undefined","focusSet","app","current","state","bank","focused","focusView","frames","findIndex","id","setState","prevState","width","processWidth","river","saveSetting","update","updateHeight","taskList","subtaskObjects","riverLists","bankLists","concat","setTheme","theme","newTheme","themes","settings","mode","key","document","documentElement","style","setProperty","localStorage","setItem","JSON","stringify","setTimeout","displayTable","console","log","playSound","sound","sounds","play","Math","floor","innerWidth","css","goToToday","searchDate","text","statusBar","search","target","value","goToFirst","zoom","zoomed","zoomedSetting","zoomFrame","getFrame"],"mappings":"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","sourcesContent":["import $ from 'jquery';\nimport * as edit from '../edit/edit';\nimport * as util from '../util/util';\nimport Task from '../../components/Task/Task';\n\nexport function checkTimes() {\n  const today = new Date();\n  const now = [today.getHours(), today.getMinutes()];\n  const dateString = today.toDateString();\n  const list = window.data.tasks[Object.keys(window.data.tasks)\n    .find(x => window.data.tasks[x].title === dateString)];\n  if (!list) return;\n  const todayList = list.subtasks;\n  for (let task of todayList) {\n    const taskEntry = window.data.tasks[util.stripR(task)];\n    if (taskEntry.info.type === 'event' &&\n      taskEntry.info.complete !== 'complete' &&\n      !taskEntry.info.startDate.includes('--')) {\n      if (\n        taskEntry.info.startDate[0] === now[0] &&\n        taskEntry.info.startDate[1] === now[1]\n      ) {\n        var permission = Notification.requestPermission();\n        const notification = new Notification('Event: ' + taskEntry.title);\n        break;\n      } else {\n        const newDate = new Date();\n        newDate.setHours(taskEntry.info.startDate[0]);\n        newDate.setMinutes(taskEntry.info.startDate[1]);\n        newDate.setMinutes(newDate.getMinutes() - 15);\n        if (\n          taskEntry.info.type === 'event' && \n          newDate.getHours() === now[0] &&\n          newDate.getMinutes() === now[1]\n        ) {\n          var permission = Notification.requestPermission();\n          const notification = new Notification('in 15: ' + taskEntry.title);\n        }\n      }\n    }\n  }\n}\n\nexport function switchView(direction) {\n  if (!window.selected) return;\n  let parent = window.selected;\n  while (parent instanceof Task) {\n    parent = parent.props.parent;\n  }\n  parent.props.parent.changeIndex(direction);\n  updateAllSizes();\n}\n\nexport function focus(set) {\n  if (set != undefined) {\n    var focusSet = set;\n  } else {\n    if (window.app.current.state.bank.current.state.info.focused == 'focused') {\n      var focusSet = '';\n    } else {\n      var focusSet = 'focused';\n    }\n  }\n  if (window.selected) {\n    // set the index of the focused list to the window.selected list\n    let focusView = window.selected\n    while (focusView instanceof Task) {\n      focusView = focusView.props.parent;\n    }\n    focusView.props.parent.changeIndex(focusView.props.parent.frames\n      .findIndex(x => x.current.props.id == focusView.props.id));\n  }\n  window.app.current.state.bank.current.setState(prevState => (\n    {\n      info: {\n        ...prevState.info,\n        focused: focusSet,\n      },\n      width: processWidth(focusSet)\n    }));\n  window.app.current.state.river.current.setState(prevState => (\n    {\n      info: {\n        ...prevState.info,\n        focused: focusSet,\n      },\n      width: processWidth(focusSet),\n    }));\n  edit.saveSetting('focused', focusSet);\n  updateAllSizes();\n}\n\nexport function updateAllSizes() {\n  function update(list) {\n    if (list.current instanceof Task) { list.current.updateHeight(); }\n    for (let task of list.current.taskList.current.subtaskObjects) {\n      update(task);\n    }\n  }\n  const riverLists = window.app.current.state.river.current.frames;\n  const bankLists = window.app.current.state.bank.current.frames;\n  for (let list of riverLists.concat(bankLists)) {\n    update(list);\n  }\n}\n\nexport function setTheme(theme) {\n  const newTheme = window.themes[theme + '-' +\n    window.data.settings.mode];\n  for (let key of Object.keys(newTheme)) {\n    document.documentElement.style.setProperty(\n      key, newTheme[key]\n    );\n  }\n  window.data.settings.theme = theme;\n  localStorage.setItem('data', JSON.stringify(window.data));\n  setTimeout(updateAllSizes, 100);\n}\n\nexport function displayTable() {\n  if (window.app.current.state.displayTable === 'none' && window.selected) {\n    window.app.current.setState({displayTable: 'true'});\n  } else {\n    window.app.current.setState({displayTable: 'none'});\n  }\n  console.log(window.app.current.state.displayTable);\n}\n\nexport function playSound(sound) {\n  if (window.data.settings.sounds === 'true') {\n    sound.play();\n  }\n}\n\nexport function processWidth(focused) {\n  if (focused != 'focused') {\n    var width = Math.floor(window.innerWidth / 250);\n    $(':root').css('--frameWidth',\n      ((window.innerWidth - 40) / width) + 'px');\n  } else {\n    // focus mode\n    var width = 1;\n    $(':root').css('--frameWidth', 'calc(100% - 24px)');\n  }\n  return width;\n}\n\nexport function goToToday() {\n  searchDate(new Date().toDateString());\n}\n\nexport function searchDate(text, type) {\n  setTimeout(() => {\n    window.app.current.statusBar.current.search({ target: { value: text } });\n    window.app.current.statusBar.current.goToFirst();\n  }, 100);\n}\n\nexport function zoom() {\n  // zoom everything upwards\n  if (window.app.current.state.zoomed === 'zoomed') {\n    var zoomedSetting = '';\n  } else {\n    var zoomedSetting = 'zoomed';\n    if (!window.selected) { return }; // no zoomie\n  }\n  var zoomFrame = util.getFrame(window.selected);\n  zoomFrame.setState({ zoomed: zoomedSetting });\n  window.app.current.setState({ zoomed: zoomedSetting });\n  if (!window.zoomed) {\n    // unzoom\n    window.zoomed = window.selected;\n  } else {\n    window.zoomed = undefined;\n  }\n  setTimeout(\n    updateAllSizes, 200\n  )\n}"]},"metadata":{},"sourceType":"module"}