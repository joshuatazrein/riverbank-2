{"ast":null,"code":"import _objectSpread from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./Frame.css';import*as display from'../../services/display/display';import*as util from'../../services/util/util';import List from'../List/List';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Frame=/*#__PURE__*/function(_React$Component){_inherits(Frame,_React$Component);var _super=_createSuper(Frame);function Frame(props){var _this;_classCallCheck(this,Frame);_this=_super.call(this,props);_this.changeIndex=function(val,set){var newIndex;if(set===true){newIndex=val;}else{newIndex=_this.state.info.index+val;}if(newIndex>0&&window.data.tasks[_this.state.subtasks[newIndex-1]].title==='--'){return;}if(set!==undefined&&newIndex>_this.state.info.index&&_this.props.id==='bank'){newIndex-=_this.state.width-1;}if(newIndex<0)newIndex=0;_this.setState(function(prevState){return{info:_objectSpread(_objectSpread({},prevState.info),{},{index:newIndex})};});};_this.state={subtasks:props.subtasks,info:props.info,width:display.processWidth(props.info.focused),zoomed:''};if(props.id==='river'){_this.state.repeats=window.data.settings.repeats;}return _this;}_createClass(Frame,[{key:\"render\",value:function render(){var _this2=this;var lastDate=new Date(window.data.tasks[this.state.subtasks[this.state.subtasks.length-1]].title);var j=0;var c=Math.floor(Math.random()*1000);while(this.state.subtasks.length<this.state.info.index+7){j++;var title;if(this.props.id==='bank'){title='--';}else if(this.props.id==='river'){var date=new Date(lastDate.getTime());date.setDate(lastDate.getDate()+j);title=date.toDateString();}var now=new Date();var id=now.getTime();// preventing overlap\nvar i=Math.floor(Math.random()*1000)+c;while(window.data.tasks[String(id+i)]!==undefined){i+=1;}window.data.tasks[String(id+i)]={title:title,subtasks:[],info:{}};this.state.subtasks.push(String(id+i));}var resizeCheck=function resizeCheck(){if(_this2.state.width!==display.processWidth(_this2.state.info.focused)){_this2.setState({width:display.processWidth(_this2.state.info.focused)});}};var endIndex=this.state.info.index+this.state.width;this.frames=[];window.addEventListener('resize',resizeCheck);var shownLists=this.state.subtasks.slice(this.state.info.index,endIndex);return/*#__PURE__*/_jsxs(\"div\",{id:this.props.id,className:'frame '+this.state.info.focused+' '+this.state.zoomed,children:[/*#__PURE__*/_jsx(\"button\",{className:\"changeButton\",onClick:function onClick(){return _this2.changeIndex(_this2.state.width*-1);},children:\"<\"}),shownLists.map(function(x){_this2.frames.push(/*#__PURE__*/React.createRef());var task=window.data.tasks[x];if(_this2.props.id==='river'){// render state correctly in original lists\nreturn/*#__PURE__*/_jsx(List,{id:x,title:task.title,subtasks:task.subtasks,parent:_this2,deadlines:_this2.props.deadlines[task.title],startdates:_this2.props.startdates[task.title],repeats:_this2.state.repeats[util.dateFormat(task.title).slice(0,3)],ref:_this2.frames[_this2.frames.length-1]},x);}else{return/*#__PURE__*/_jsx(List,{id:x,title:task.title,subtasks:task.subtasks,parent:_this2,ref:_this2.frames[_this2.frames.length-1]},x);}}),/*#__PURE__*/_jsx(\"button\",{className:\"changeButton\",onClick:function onClick(){return _this2.changeIndex(_this2.state.width);},children:\">\"})]});}}]);return Frame;}(React.Component);export{Frame as default};","map":{"version":3,"sources":["/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/src/components/Frame/Frame.js"],"names":["React","display","util","List","Frame","props","changeIndex","val","set","newIndex","state","info","index","window","data","tasks","subtasks","title","undefined","id","width","setState","prevState","processWidth","focused","zoomed","repeats","settings","lastDate","Date","length","j","c","Math","floor","random","date","getTime","setDate","getDate","toDateString","now","i","String","push","resizeCheck","endIndex","frames","addEventListener","shownLists","slice","map","x","createRef","task","deadlines","startdates","dateFormat","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Frame.css';\nimport * as display from '../../services/display/display';\nimport * as util from '../../services/util/util';\nimport List from '../List/List';\n\nexport default class Frame extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subtasks: props.subtasks, info: props.info,\n      width: display.processWidth(props.info.focused),\n      zoomed: '',\n    };\n    if (props.id === 'river') {\n      this.state.repeats = window.data.settings.repeats;\n    }\n  }\n  changeIndex = (val, set) => {\n    let newIndex;\n    if (set === true) {\n      newIndex = val;\n    } else {\n      newIndex = this.state.info.index + val;\n    }\n    if (newIndex > 0 &&\n      window.data.tasks[this.state.subtasks[newIndex - 1]].title === '--') {\n      return;\n    }\n    if (\n      set !== undefined && \n      newIndex > this.state.info.index && \n      this.props.id === 'bank'\n    ) {\n      newIndex -= (this.state.width - 1);\n    }\n    if (newIndex < 0) newIndex = 0;\n    this.setState(prevState => ({\n      info: { ...prevState.info, index: newIndex }\n    }));\n  }\n  render() {\n    const lastDate = new Date(\n      window.data.tasks[this.state.subtasks[this.state.subtasks.length - 1]].title);\n    let j = 0;\n    let c = Math.floor(Math.random() * 1000);\n    while (this.state.subtasks.length < this.state.info.index + 7) {\n      j++;\n      var title;\n      if (this.props.id === 'bank') {\n        title = '--';\n      } else if (this.props.id === 'river') {\n        const date = new Date(lastDate.getTime());\n        date.setDate(lastDate.getDate() + j);\n        title = date.toDateString();\n      }\n      const now = new Date();\n      const id = now.getTime();\n      // preventing overlap\n      let i = Math.floor(Math.random() * 1000) + c;\n      while (window.data.tasks[String(id + i)] !== undefined) {\n        i += 1;\n      }\n      window.data.tasks[String(id + i)] = { title: title, subtasks: [], info: {} };\n      this.state.subtasks.push(String(id + i));\n    }\n    var resizeCheck = () => {\n      if (this.state.width !== display.processWidth(this.state.info.focused)) {\n        this.setState({ width: display.processWidth(this.state.info.focused) });\n      }\n    }\n    let endIndex = this.state.info.index + this.state.width;\n    this.frames = [];\n    window.addEventListener('resize', resizeCheck);\n    const shownLists =\n      this.state.subtasks.slice(this.state.info.index, endIndex);\n    return (\n      <div id={this.props.id}\n        className={'frame ' + this.state.info.focused + ' ' +\n          this.state.zoomed}>\n        <button className='changeButton'\n          onClick={() => this.changeIndex(this.state.width * -1)}>&lt;\n        </button>\n        {shownLists.map(x => {\n          this.frames.push(React.createRef());\n          const task = window.data.tasks[x];\n          if (this.props.id === 'river') {\n            // render state correctly in original lists\n            return (\n              <List key={x} id={x} title={task.title}\n                subtasks={task.subtasks} parent={this}\n                deadlines={this.props.deadlines[task.title]}\n                startdates={this.props.startdates[task.title]}\n                repeats={this.state.repeats[util.dateFormat(task.title)\n                  .slice(0, 3)]}\n                ref={this.frames[this.frames.length - 1]} />\n            )\n          } else {\n            return (\n              <List key={x} id={x} title={task.title}\n                subtasks={task.subtasks} parent={this}\n                ref={this.frames[this.frames.length - 1]} />\n            )\n          }\n        })}\n        <button className='changeButton'\n          onClick={() => this.changeIndex(this.state.width)}>&gt;</button>\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}