{"ast":null,"code":"import _objectSpread from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./App.css';import popSnd from'../../assets/snd/pop.mp3';import*as edit from'../../services/edit/edit';import*as display from'../../services/display/display';import*as util from'../../services/util/util';import Frame from'../Frame/Frame';import StatusBar from'../StatusBar/StatusBar';import Task from'../Task/Task';import List from'../List/List';// main app, governs everything\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={hideComplete:window.data.settings.hideComplete,bank:/*#__PURE__*/React.createRef(),river:/*#__PURE__*/React.createRef(),theme:window.data.settings.theme,mode:window.data.settings.mode,focused:window.data.settings.focused,popSnd:new Audio(popSnd),zoomed:'',disableSelect:'',contextMenu:/*#__PURE__*/React.createRef(),deadlines:window.data.settings.deadlines,startdates:window.data.settings.startdates,displayTable:'none'};return _this;}// hide/show completes\n_createClass(App,[{key:\"toggleComplete\",value:function toggleComplete(){var hideComplete;if(this.state.hideComplete===''){hideComplete='hideComplete';}else{hideComplete='';}this.setState({hideComplete:hideComplete});edit.saveSetting('hideComplete',hideComplete);display.updateAllSizes();}},{key:\"render\",value:function render(){this.statusBar=/*#__PURE__*/React.createRef();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StatusBar,{parent:this,ref:this.statusBar,deadlines:this.state.deadlines,startdates:this.state.startdates}),/*#__PURE__*/_jsxs(\"div\",{className:'container '+this.state.hideComplete+' '+this.state.zoomed+' '+this.state.disableSelect,children:[/*#__PURE__*/_jsx(Frame,{id:\"bank\",info:_objectSpread(_objectSpread({},window.data.tasks['bank'].info),{},{focused:window.data.settings.focused}),subtasks:window.data.tasks['bank'].subtasks,ref:this.state.bank}),/*#__PURE__*/_jsx(Frame,{id:\"river\",info:_objectSpread(_objectSpread({},window.data.tasks['river'].info),{},{focused:window.data.settings.focused}),deadlines:this.state.deadlines,startdates:this.state.startdates,subtasks:window.data.tasks['river'].subtasks,ref:this.state.river})]}),/*#__PURE__*/_jsx(SelectMenu,{ref:this.state.contextMenu}),window.selected&&this.state.displayTable!=='none'&&/*#__PURE__*/_jsx(TableDisplay,{})]});}}]);return App;}(React.Component);// extra function menu tacked on after the drag/drop context\nexport{App as default};var SelectMenu=/*#__PURE__*/function(_React$Component2){_inherits(SelectMenu,_React$Component2);var _super2=_createSuper(SelectMenu);function SelectMenu(props){var _this2;_classCallCheck(this,SelectMenu);_this2=_super2.call(this,props);_this2.state={display:'none',top:'0',left:'0'};return _this2;}_createClass(SelectMenu,[{key:\"render\",value:function render(){this.self=/*#__PURE__*/React.createRef();return/*#__PURE__*/_jsxs(\"div\",{className:\"selectMenu\",ref:this.self,style:{display:this.state.display,top:this.state.top,left:this.state.left},children:[/*#__PURE__*/_jsx(\"p\",{className:\"centerAlign\",children:/*#__PURE__*/_jsx(\"b\",{children:\"edit\"})}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return edit.newTask();},children:[\"new task\",/*#__PURE__*/_jsx(\"span\",{className:\"rightAlign\",children:\"(return)\"})]}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return edit.newTask('task');},children:[\"new subtask \",/*#__PURE__*/_jsx(\"span\",{className:\"rightAlign\",children:\"(shift-return)\"})]}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return edit.cutTask();},children:[\"cut \",/*#__PURE__*/_jsx(\"span\",{className:\"rightAlign\",children:\"(ctrl-x)\"})]}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return edit.copyTask();},children:[\"copy \",/*#__PURE__*/_jsx(\"span\",{className:\"rightAlign\",children:\"(ctrl-c)\"})]}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return edit.copyTask(true);},children:[\"mirror \",/*#__PURE__*/_jsx(\"span\",{className:\"rightAlign\",children:\"(ctrl-shift-C)\"})]}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return edit.pasteTask();},children:[\"paste \",/*#__PURE__*/_jsx(\"span\",{className:\"rightAlign\",children:\"(ctrl-v)\"})]}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return edit.pasteTask(\"task\");},children:\"paste as subtask (ctrl-shift-V)\"}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){if(window.selected&&window.selected instanceof Task){window.selected.deleteThis();}else if(window.selected&&window.selected instanceof List&&window.selected.props.parent.props.id==='bank'){var confirm=window.confirm('delete this list?');if(confirm){var subtasks=window.selected.props.parent.state.subtasks;window.undoData=localStorage.getItem('data');subtasks.splice(subtasks.findIndex(function(x){return x===window.selected.props.id;}),1);window.selected.props.parent.setState({subtasks:subtasks});}}},children:[\"delete \",/*#__PURE__*/_jsx(\"span\",{className:\"rightAlign\",children:\"(ctrl-delete)\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"centerAlign\",style:{marginTop:'5px'},children:/*#__PURE__*/_jsx(\"b\",{children:\"move\"})}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return edit.moveTask(1);},children:[\"move down \",/*#__PURE__*/_jsx(\"span\",{className:\"rightAlign\",children:\"(ctrl-s)\"})]}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return edit.moveTask(-1);},children:[\"move up \",/*#__PURE__*/_jsx(\"span\",{className:\"rightAlign\",children:\"(ctrl-w)\"})]}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return display.switchView(1);},children:[\"following week/lists \",/*#__PURE__*/_jsx(\"span\",{className:\"rightAlign\",children:\"(ctrl-d)\"})]}),/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return display.switchView(-1);},children:[\"previous week/lists \",/*#__PURE__*/_jsx(\"span\",{className:\"rightAlign\",children:\"(ctrl-a)\"})]}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return edit.listEdit('migrate');},children:\"migrate date\"}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return edit.listEdit('clear');},children:\"clear list\"}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return display.displayTable();},children:\"display as table\"})]});}}]);return SelectMenu;}(React.Component);var TableDisplay=/*#__PURE__*/function(_React$Component3){_inherits(TableDisplay,_React$Component3);var _super3=_createSuper(TableDisplay);function TableDisplay(){_classCallCheck(this,TableDisplay);return _super3.apply(this,arguments);}_createClass(TableDisplay,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{}),/*#__PURE__*/_jsx(\"tbody\",{children:window.data.tasks[util.stripR(window.selected.props.id)].subtasks.map(function(x){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:window.data.tasks[util.stripR(x)].title}),window.data.tasks[x].subtasks.map(function(y){return/*#__PURE__*/_jsx(\"td\",{children:window.data.tasks[util.stripR(y)].title},y);})]},x);})})]});}}]);return TableDisplay;}(React.Component);","map":{"version":3,"sources":["/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/src/components/App/App.js"],"names":["React","popSnd","edit","display","util","Frame","StatusBar","Task","List","App","props","state","hideComplete","window","data","settings","bank","createRef","river","theme","mode","focused","Audio","zoomed","disableSelect","contextMenu","deadlines","startdates","displayTable","setState","saveSetting","updateAllSizes","statusBar","tasks","info","subtasks","selected","Component","SelectMenu","top","left","self","newTask","cutTask","copyTask","pasteTask","deleteThis","parent","id","confirm","undoData","localStorage","getItem","splice","findIndex","x","marginTop","moveTask","switchView","listEdit","TableDisplay","stripR","map","title","y"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport popSnd from '../../assets/snd/pop.mp3';\nimport * as edit from '../../services/edit/edit';\nimport * as display from '../../services/display/display';\nimport * as util from '../../services/util/util';\nimport Frame from '../Frame/Frame';\nimport StatusBar from '../StatusBar/StatusBar';\nimport Task from '../Task/Task';\nimport List from '../List/List';\n\n// main app, governs everything\nexport default class App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideComplete: window.data.settings.hideComplete,\n      bank: React.createRef(),\n      river: React.createRef(),\n      theme: window.data.settings.theme,\n      mode: window.data.settings.mode,\n      focused: window.data.settings.focused,\n      popSnd: new Audio(popSnd),\n      zoomed: '',\n      disableSelect: '',\n      contextMenu: React.createRef(),\n      deadlines: window.data.settings.deadlines,\n      startdates: window.data.settings.startdates,\n      displayTable: 'none',\n    };\n  }\n\n  // hide/show completes\n  toggleComplete() {\n    var hideComplete;\n    if (this.state.hideComplete === '') {\n      hideComplete = 'hideComplete';\n    } else {\n      hideComplete = '';\n    }\n    this.setState({ hideComplete: hideComplete });\n    edit.saveSetting('hideComplete', hideComplete);\n    display.updateAllSizes();\n  }\n\n  render() {\n    this.statusBar = React.createRef();\n    return (\n      <>\n        <StatusBar parent={this} ref={this.statusBar} \n          deadlines={this.state.deadlines} \n          startdates={this.state.startdates} />\n        <div className={'container ' + this.state.hideComplete + ' ' +\n          this.state.zoomed + ' ' + this.state.disableSelect}>\n          <Frame id='bank' info={{\n            ...window.data.tasks['bank'].info,\n            focused: window.data.settings.focused\n          }}\n            subtasks={window.data.tasks['bank'].subtasks} ref={this.state.bank} />\n          <Frame id='river' info={{\n            ...window.data.tasks['river'].info,\n            focused: window.data.settings.focused,\n          }}\n            deadlines={this.state.deadlines}\n            startdates={this.state.startdates}\n            subtasks={window.data.tasks['river'].subtasks} ref={this.state.river} />\n        </div>\n        <SelectMenu ref={this.state.contextMenu}/>\n        {window.selected && this.state.displayTable !== 'none' &&\n          <TableDisplay />}\n      </>\n    )\n  }\n}\n\n// extra function menu tacked on after the drag/drop context\nclass SelectMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { display: 'none', top: '0', left: '0' };\n  }\n  render() {\n    this.self = React.createRef();\n    return (\n      <div className='selectMenu' ref={this.self} style={{ display: this.state.display,\n        top: this.state.top, left: this.state.left }}>\n        <p className='centerAlign'><b>edit</b></p>\n        <p onClick={() => edit.newTask()}>\n          new task<span className='rightAlign'>(return)</span></p>\n        <p onClick={() => edit.newTask('task')}>\n          new subtask <span className='rightAlign'>(shift-return)</span></p>\n        <p onClick={() => edit.cutTask()}>\n          cut <span className='rightAlign'>(ctrl-x)</span></p>\n        <p onClick={() => edit.copyTask()}>\n          copy <span className='rightAlign'>(ctrl-c)</span></p>\n        <p onClick={() => edit.copyTask(true)}>\n          mirror <span className='rightAlign'>(ctrl-shift-C)</span></p>\n        <p onClick={() => edit.pasteTask()}>\n          paste <span className='rightAlign'>(ctrl-v)</span></p>\n        <p onClick={() => edit.pasteTask(\"task\")}>\n          paste as subtask (ctrl-shift-V)</p>\n        <p onClick={() => {\n          if (window.selected && window.selected instanceof Task) {\n            window.selected.deleteThis();\n          } else if (window.selected && window.selected instanceof List &&\n            window.selected.props.parent.props.id === 'bank') {\n            const confirm = window.confirm('delete this list?');\n            if (confirm) {\n              const subtasks = window.selected.props.parent.state.subtasks;\n              window.undoData = localStorage.getItem('data');\n              subtasks.splice(\n                subtasks.findIndex(x => x === window.selected.props.id), 1);\n              window.selected.props.parent.setState({ subtasks: subtasks });\n            }\n          }\n        }}>\n          delete <span className='rightAlign'>(ctrl-delete)</span></p>\n        <p  className='centerAlign' style={{marginTop:'5px'}}><b>move</b></p>\n        <p onClick={() => edit.moveTask(1)}>\n          move down <span className='rightAlign'>(ctrl-s)</span></p>\n        <p onClick={() => edit.moveTask(-1)}>\n          move up <span className='rightAlign'>(ctrl-w)</span></p>\n        <p onClick={() => display.switchView(1)}>\n          following week/lists <span className='rightAlign'>(ctrl-d)</span></p>\n        <p onClick={() => display.switchView(-1)}>\n          previous week/lists <span className='rightAlign'>(ctrl-a)</span></p>\n        <p onClick={() => edit.listEdit('migrate')}>\n          migrate date</p>\n        <p onClick={() => edit.listEdit('clear')}>\n          clear list</p>\n        <p onClick={() => display.displayTable()}>\n          display as table</p>\n      </div>\n    )\n  } \n}\n\nclass TableDisplay extends React.Component {\n  render() {\n    return (\n      <table className='table'>\n        <thead></thead>\n        <tbody>\n          {window.data.tasks[util.stripR(window.selected.props.id)].subtasks.map(x => (\n            <tr key={x}>\n              <td>{\n                window.data.tasks[util.stripR(x)].title\n              }</td>\n              {window.data.tasks[x].subtasks.map(y => (\n                <td key={y}>\n                  {window.data.tasks[util.stripR(y)].title\n                  }\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}