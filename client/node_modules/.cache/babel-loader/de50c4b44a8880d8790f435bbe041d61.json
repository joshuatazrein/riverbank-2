{"ast":null,"code":"var _jsxFileName = \"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/src/components/App/App.js\";\nimport React from 'react';\nimport './App.css';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport popSnd from '../../assets/snd/pop.mp3';\nimport * as edit from '../../services/edit/edit';\nimport * as display from '../../services/display/display';\nimport * as util from '../../services/util/util';\nimport Frame from '../Frame/Frame';\nimport StatusBar from '../StatusBar/StatusBar'; // main app, governs everything\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onDragEnd = result => {\n      const {\n        destination,\n        source\n      } = result;\n\n      if (!destination) {\n        return;\n      }\n\n      if (destination.droppableId === source.droppableId && destination.index === source.index) {\n        return;\n      }\n\n      const sourceSplit = source.droppableId.split('-');\n      const destSplit = destination.droppableId.split('-');\n\n      function buildList(listSplit) {\n        var listObjs = [];\n        listObjs.push(window.app.current.state[listSplit[0]]);\n        listObjs.push(listObjs[0].current.frames.find(x => x.current.props.id === listSplit[1]));\n        var i = 2;\n        var task;\n\n        function getTask() {\n          task = listObjs[i - 1].current.taskList.current.subtaskObjects.find(x => x.current.props.id === listSplit[i]);\n          listObjs.push(task);\n          i++;\n        }\n\n        while (i < listSplit.length) {\n          getTask();\n        } // returns the item to update\n\n\n        return listObjs[listObjs.length - 1];\n      }\n\n      const sourceItem = buildList(sourceSplit);\n      const sourceState = sourceItem.current.state.subtasks;\n      const splicedTask = sourceState.splice(source.index, 1);\n      sourceItem.current.setState({\n        subtasks: sourceState\n      });\n      const destItem = buildList(destSplit);\n      const destState = destItem.current.state.subtasks;\n      destState.splice(destination.index, 0, splicedTask[0]);\n      destItem.current.setState({\n        subtasks: destState\n      }); // splice in the new DATA from the source into the OBJECT of the destination\n\n      edit.save(sourceItem.current);\n      edit.save(destItem.current);\n      window.selected = undefined;\n    };\n\n    this.state = {\n      hideComplete: window.data.settings.hideComplete,\n      bank: /*#__PURE__*/React.createRef(),\n      river: /*#__PURE__*/React.createRef(),\n      theme: window.data.settings.theme,\n      mode: window.data.settings.mode,\n      focused: window.data.settings.focused,\n      popSnd: new Audio(popSnd),\n      zoomed: '',\n      disableSelect: '',\n      contextMenu: /*#__PURE__*/React.createRef(),\n      deadlines: window.data.settings.deadlines,\n      startdates: window.data.settings.startdates,\n      displayTable: 'none'\n    };\n  } // hide/show completes\n\n\n  toggleComplete() {\n    var hideComplete;\n\n    if (this.state.hideComplete === '') {\n      hideComplete = 'hideComplete';\n    } else {\n      hideComplete = '';\n    }\n\n    this.setState({\n      hideComplete: hideComplete\n    });\n    edit.saveSetting('hideComplete', hideComplete);\n    display.updateAllSizes();\n  }\n\n  render() {\n    this.statusBar = /*#__PURE__*/React.createRef();\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(StatusBar, {\n        parent: this,\n        ref: this.statusBar,\n        deadlines: this.state.deadlines,\n        startdates: this.state.startdates\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DragDropContext, {\n        onDragEnd: this.onDragEnd,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'container ' + this.state.hideComplete + ' ' + this.state.zoomed + ' ' + this.state.disableSelect,\n          children: [/*#__PURE__*/_jsxDEV(Frame, {\n            id: \"bank\",\n            info: { ...window.data.tasks['bank'].info,\n              focused: window.data.settings.focused\n            },\n            subtasks: window.data.tasks['bank'].subtasks,\n            ref: this.state.bank\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Frame, {\n            id: \"river\",\n            info: { ...window.data.tasks['river'].info,\n              focused: window.data.settings.focused\n            },\n            deadlines: this.state.deadlines,\n            startdates: this.state.startdates,\n            subtasks: window.data.tasks['river'].subtasks,\n            ref: this.state.river\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SelectMenu, {\n        ref: this.state.contextMenu\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), window.selected && this.state.displayTable !== 'none' && /*#__PURE__*/_jsxDEV(TableDisplay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  }\n\n} // extra function menu tacked on after the drag/drop context\n\nclass SelectMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      display: 'none',\n      top: '0',\n      left: '0'\n    };\n  }\n\n  render() {\n    this.self = /*#__PURE__*/React.createRef();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selectMenu\",\n      ref: this.self,\n      style: {\n        display: this.state.display,\n        top: this.state.top,\n        left: this.state.left\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.newTask(),\n        children: \"+ new task (return)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.newTask('task'),\n        children: \"+ new subtask (shift-return)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.cutTask(),\n        children: \"x cut (ctrl-x)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.copyTask(),\n        children: \"c copy (ctrl-c)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.copyTask(true),\n        children: \"C mirror (ctrl-shift-C)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.pasteTask(),\n        children: \"v paste (ctrl-v)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.pasteTask(\"task\"),\n        children: \"V paste as subtask (ctrl-shift-V)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.deleteTask(),\n        children: \"\\u232B delete (ctrl-delete)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: '5px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"move\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.moveTask(1),\n        children: \"\\uA71C move down (ctrl-s)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.moveTask(-1),\n        children: \"\\uA71B move up (ctrl-w)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => display.switchView(1),\n        children: \"\\u20D7 following week/lists (ctrl-d)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => display.switchView(-1),\n        children: \"\\u20EE previous week/lists (ctrl-a)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.listEdit('migrate'),\n        children: \"\\u20D5 migrate date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.listEdit('clear'),\n        children: \"\\u2327 clear list\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => display.displayTable(),\n        children: \"\\u29C9 display as table\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass TableDisplay extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: window.data.tasks[util.stripR(window.selected.props.id)].subtasks.map(x => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: window.data.tasks[util.stripR(x)].title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this), window.data.tasks[x].subtasks.map(y => /*#__PURE__*/_jsxDEV(\"td\", {\n            children: window.data.tasks[util.stripR(y)].title\n          }, y, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 17\n          }, this))]\n        }, x, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/src/components/App/App.js"],"names":["React","DragDropContext","popSnd","edit","display","util","Frame","StatusBar","App","Component","constructor","props","onDragEnd","result","destination","source","droppableId","index","sourceSplit","split","destSplit","buildList","listSplit","listObjs","push","window","app","current","state","frames","find","x","id","i","task","getTask","taskList","subtaskObjects","length","sourceItem","sourceState","subtasks","splicedTask","splice","setState","destItem","destState","save","selected","undefined","hideComplete","data","settings","bank","createRef","river","theme","mode","focused","Audio","zoomed","disableSelect","contextMenu","deadlines","startdates","displayTable","toggleComplete","saveSetting","updateAllSizes","render","statusBar","tasks","info","SelectMenu","top","left","self","newTask","cutTask","copyTask","pasteTask","deleteTask","marginTop","moveTask","switchView","listEdit","TableDisplay","stripR","map","title","y"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport popSnd from '../../assets/snd/pop.mp3';\nimport * as edit from '../../services/edit/edit';\nimport * as display from '../../services/display/display';\nimport * as util from '../../services/util/util';\nimport Frame from '../Frame/Frame';\nimport StatusBar from '../StatusBar/StatusBar';\n\n// main app, governs everything\nexport default class App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideComplete: window.data.settings.hideComplete,\n      bank: React.createRef(),\n      river: React.createRef(),\n      theme: window.data.settings.theme,\n      mode: window.data.settings.mode,\n      focused: window.data.settings.focused,\n      popSnd: new Audio(popSnd),\n      zoomed: '',\n      disableSelect: '',\n      contextMenu: React.createRef(),\n      deadlines: window.data.settings.deadlines,\n      startdates: window.data.settings.startdates,\n      displayTable: 'none',\n    };\n  }\n\n  // hide/show completes\n  toggleComplete() {\n    var hideComplete;\n    if (this.state.hideComplete === '') {\n      hideComplete = 'hideComplete';\n    } else {\n      hideComplete = '';\n    }\n    this.setState({ hideComplete: hideComplete });\n    edit.saveSetting('hideComplete', hideComplete);\n    display.updateAllSizes();\n  }\n  onDragEnd = result => {\n    const { destination, source } = result;\n    if (!destination) {\n      return;\n    }\n    if (destination.droppableId === source.droppableId &&\n      destination.index === source.index) {\n      return;\n    }\n    const sourceSplit = source.droppableId.split('-');\n    const destSplit = destination.droppableId.split('-');\n\n    function buildList(listSplit) {\n      var listObjs = [];\n      listObjs.push(window.app.current.state[listSplit[0]]);\n      listObjs.push(listObjs[0].current.frames.find(x =>\n        x.current.props.id === listSplit[1]));\n      var i = 2;\n      var task;\n      function getTask() {\n        task = listObjs[i - 1].current.taskList.current\n          .subtaskObjects.find(x => x.current.props.id === listSplit[i]);\n        listObjs.push(task);\n        i++;\n      }\n      while (i < listSplit.length) {\n        getTask();\n      }\n      // returns the item to update\n      return listObjs[listObjs.length - 1];\n    }\n    const sourceItem = buildList(sourceSplit);\n    const sourceState = sourceItem.current.state.subtasks;\n    const splicedTask = sourceState.splice(source.index, 1);\n    sourceItem.current.setState({ subtasks: sourceState });\n    const destItem = buildList(destSplit);\n    const destState = destItem.current.state.subtasks;\n    destState.splice(destination.index, 0, splicedTask[0]);\n    destItem.current.setState({ subtasks: destState });\n    // splice in the new DATA from the source into the OBJECT of the destination\n    edit.save(sourceItem.current);\n    edit.save(destItem.current);\n    window.selected = undefined;\n  }\n\n  render() {\n    this.statusBar = React.createRef();\n    return (\n      <>\n        <StatusBar parent={this} ref={this.statusBar} \n          deadlines={this.state.deadlines} \n          startdates={this.state.startdates} />\n        <DragDropContext onDragEnd={this.onDragEnd}>\n          <div className={'container ' + this.state.hideComplete + ' ' +\n            this.state.zoomed + ' ' + this.state.disableSelect}>\n            <Frame id='bank' info={{\n              ...window.data.tasks['bank'].info,\n              focused: window.data.settings.focused\n            }}\n              subtasks={window.data.tasks['bank'].subtasks} ref={this.state.bank} />\n            <Frame id='river' info={{\n              ...window.data.tasks['river'].info,\n              focused: window.data.settings.focused,\n            }}\n              deadlines={this.state.deadlines}\n              startdates={this.state.startdates}\n              subtasks={window.data.tasks['river'].subtasks} ref={this.state.river} />\n          </div>\n        </DragDropContext>\n        <SelectMenu ref={this.state.contextMenu}/>\n        {window.selected && this.state.displayTable !== 'none' &&\n          <TableDisplay />}\n      </>\n    )\n  }\n}\n\n// extra function menu tacked on after the drag/drop context\nclass SelectMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { display: 'none', top: '0', left: '0' };\n  }\n  render() {\n    this.self = React.createRef();\n    return (\n      <div className='selectMenu' ref={this.self} style={{ display: this.state.display,\n        top: this.state.top, left: this.state.left }}>\n        <p><b>edit</b></p>\n        <p onClick={() => edit.newTask()}>\n          + new task (return)</p>\n        <p onClick={() => edit.newTask('task')}>\n          + new subtask (shift-return)</p>\n        <p onClick={() => edit.cutTask()}>\n          x cut (ctrl-x)</p>\n        <p onClick={() => edit.copyTask()}>\n          c copy (ctrl-c)</p>\n        <p onClick={() => edit.copyTask(true)}>\n          C mirror (ctrl-shift-C)</p>\n        <p onClick={() => edit.pasteTask()}>\n          v paste (ctrl-v)</p>\n        <p onClick={() => edit.pasteTask(\"task\")}>\n          V paste as subtask (ctrl-shift-V)</p>\n        <p onClick={() => edit.deleteTask()}>\n          &#9003; delete (ctrl-delete)</p>\n        <p style={{marginTop:'5px'}}><b>move</b></p>\n        <p onClick={() => edit.moveTask(1)}>\n         ꜜ move down (ctrl-s)</p>\n        <p onClick={() => edit.moveTask(-1)}>\n         ꜛ move up (ctrl-w)</p>\n        <p onClick={() => display.switchView(1)}>\n          &#8407; following week/lists (ctrl-d)</p>\n        <p onClick={() => display.switchView(-1)}>\n          &#8430; previous week/lists (ctrl-a)</p>\n        <p onClick={() => edit.listEdit('migrate')}>\n          &#8405; migrate date</p>\n        <p onClick={() => edit.listEdit('clear')}>\n          &#8999; clear list</p>\n        <p onClick={() => display.displayTable()}>\n          &#10697; display as table</p>\n      </div>\n    )\n  } \n}\n\nclass TableDisplay extends React.Component {\n  render() {\n    return (\n      <table className='table'>\n        <thead></thead>\n        <tbody>\n          {window.data.tasks[util.stripR(window.selected.props.id)].subtasks.map(x => (\n            <tr key={x}>\n              <td>{\n                window.data.tasks[util.stripR(x)].title\n              }</td>\n              {window.data.tasks[x].subtasks.map(y => (\n                <td key={y}>\n                  {window.data.tasks[util.stripR(y)].title\n                  }\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}