{"ast":null,"code":"var _jsxFileName = \"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/client/src/components/App/App.js\";\nimport React from 'react';\nimport './App.css';\nimport popSnd from '../../assets/snd/pop.mp3';\nimport * as edit from '../../services/edit';\nimport * as display from '../../services/display';\nimport * as util from '../../services/util';\nimport Frame from '../Frame/Frame';\nimport StatusBar from '../StatusBar/StatusBar';\nimport Task from '../Task/Task';\nimport List from '../List/List'; // main app, governs everything\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideComplete: window.data.settings.hideComplete,\n      bank: /*#__PURE__*/React.createRef(),\n      river: /*#__PURE__*/React.createRef(),\n      theme: window.data.settings.theme,\n      mode: window.data.settings.mode,\n      focused: window.data.settings.focused,\n      popSnd: new Audio(popSnd),\n      zoomed: '',\n      disableSelect: '',\n      contextMenu: /*#__PURE__*/React.createRef(),\n      deadlines: window.data.settings.deadlines,\n      startdates: window.data.settings.startdates,\n      displayTable: 'none'\n    };\n  } // hide/show completes\n\n\n  toggleComplete() {\n    var hideComplete;\n\n    if (this.state.hideComplete === '') {\n      hideComplete = 'hideComplete';\n    } else {\n      hideComplete = '';\n    }\n\n    this.setState({\n      hideComplete: hideComplete\n    });\n    edit.saveSetting('hideComplete', hideComplete);\n    display.updateAllSizes();\n  }\n\n  render() {\n    this.statusBar = /*#__PURE__*/React.createRef();\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(StatusBar, {\n        parent: this,\n        ref: this.statusBar,\n        deadlines: this.state.deadlines,\n        startdates: this.state.startdates\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'container ' + this.state.hideComplete + ' ' + this.state.zoomed + ' ' + this.state.disableSelect,\n        children: [/*#__PURE__*/_jsxDEV(Frame, {\n          id: \"bank\",\n          info: { ...window.data.tasks['bank'].info,\n            focused: window.data.settings.focused\n          },\n          subtasks: window.data.tasks['bank'].subtasks,\n          ref: this.state.bank\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Frame, {\n          id: \"river\",\n          info: { ...window.data.tasks['river'].info,\n            focused: window.data.settings.focused\n          },\n          deadlines: this.state.deadlines,\n          startdates: this.state.startdates,\n          subtasks: window.data.tasks['river'].subtasks,\n          ref: this.state.river\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SelectMenu, {\n        ref: this.state.contextMenu\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), window.selected && this.state.displayTable !== 'none' && /*#__PURE__*/_jsxDEV(TableDisplay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  }\n\n} // extra function menu tacked on after the drag/drop context\n\nclass SelectMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      display: 'none',\n      top: '0',\n      left: '0'\n    };\n  }\n\n  render() {\n    this.self = /*#__PURE__*/React.createRef();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selectMenu\",\n      ref: this.self,\n      style: {\n        display: this.state.display,\n        top: this.state.top,\n        left: this.state.left\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"centerAlign\",\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.newTask(),\n        children: [\"new task\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(return)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.newTask('task'),\n        children: [\"new subtask \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(shift-return)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.cutTask(),\n        children: [\"cut \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-x)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.copyTask(),\n        children: [\"copy \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-c)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.copyTask(true),\n        children: [\"mirror \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-shift-C)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.pasteTask(),\n        children: [\"paste \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-v)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.pasteTask(\"task\"),\n        children: \"paste as subtask (ctrl-shift-V)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => {\n          if (window.selected && window.selected instanceof Task) {\n            window.selected.deleteThis();\n          } else if (window.selected && window.selected instanceof List && window.selected.props.parent.props.id === 'bank') {\n            const confirm = window.confirm('delete this list?');\n\n            if (confirm) {\n              const subtasks = window.selected.props.parent.state.subtasks;\n              window.undoData = localStorage.getItem('data');\n              subtasks.splice(subtasks.findIndex(x => x === window.selected.props.id), 1);\n              window.selected.props.parent.setState({\n                subtasks: subtasks\n              });\n            }\n          }\n        },\n        children: [\"delete \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-delete)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"centerAlign\",\n        style: {\n          marginTop: '5px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"move\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 63\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.moveTask(1),\n        children: [\"move down \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-s)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.moveTask(-1),\n        children: [\"move up \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-w)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => display.switchView(1),\n        children: [\"following week/lists \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-d)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 32\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => display.switchView(-1),\n        children: [\"previous week/lists \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-a)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.listEdit('migrate'),\n        children: \"migrate date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.listEdit('clear'),\n        children: \"clear list\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => display.displayTable(),\n        children: \"display as table\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass TableDisplay extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: window.data.tasks[util.stripR(window.selected.props.id)].subtasks.map(x => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: window.data.tasks[util.stripR(x)].title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this), window.data.tasks[x].subtasks.map(y => /*#__PURE__*/_jsxDEV(\"td\", {\n            children: window.data.tasks[util.stripR(y)].title\n          }, y, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 17\n          }, this))]\n        }, x, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/client/src/components/App/App.js"],"names":["React","popSnd","edit","display","util","Frame","StatusBar","Task","List","App","Component","constructor","props","state","hideComplete","window","data","settings","bank","createRef","river","theme","mode","focused","Audio","zoomed","disableSelect","contextMenu","deadlines","startdates","displayTable","toggleComplete","setState","saveSetting","updateAllSizes","render","statusBar","tasks","info","subtasks","selected","SelectMenu","top","left","self","newTask","cutTask","copyTask","pasteTask","deleteThis","parent","id","confirm","undoData","localStorage","getItem","splice","findIndex","x","marginTop","moveTask","switchView","listEdit","TableDisplay","stripR","map","title","y"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport popSnd from '../../assets/snd/pop.mp3';\nimport * as edit from '../../services/edit';\nimport * as display from '../../services/display';\nimport * as util from '../../services/util';\nimport Frame from '../Frame/Frame';\nimport StatusBar from '../StatusBar/StatusBar';\nimport Task from '../Task/Task';\nimport List from '../List/List';\n\n// main app, governs everything\nexport default class App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideComplete: window.data.settings.hideComplete,\n      bank: React.createRef(),\n      river: React.createRef(),\n      theme: window.data.settings.theme,\n      mode: window.data.settings.mode,\n      focused: window.data.settings.focused,\n      popSnd: new Audio(popSnd),\n      zoomed: '',\n      disableSelect: '',\n      contextMenu: React.createRef(),\n      deadlines: window.data.settings.deadlines,\n      startdates: window.data.settings.startdates,\n      displayTable: 'none',\n    };\n  }\n\n  // hide/show completes\n  toggleComplete() {\n    var hideComplete;\n    if (this.state.hideComplete === '') {\n      hideComplete = 'hideComplete';\n    } else {\n      hideComplete = '';\n    }\n    this.setState({ hideComplete: hideComplete });\n    edit.saveSetting('hideComplete', hideComplete);\n    display.updateAllSizes();\n  }\n\n  render() {\n\n    this.statusBar = React.createRef();\n    return (\n      <>\n        <StatusBar parent={this} ref={this.statusBar} \n          deadlines={this.state.deadlines} \n          startdates={this.state.startdates} />\n        <div className={'container ' + this.state.hideComplete + ' ' +\n          this.state.zoomed + ' ' + this.state.disableSelect}>\n          <Frame id='bank' info={{\n            ...window.data.tasks['bank'].info,\n            focused: window.data.settings.focused\n          }}\n            subtasks={window.data.tasks['bank'].subtasks} ref={this.state.bank} />\n          <Frame id='river' info={{\n            ...window.data.tasks['river'].info,\n            focused: window.data.settings.focused,\n          }}\n            deadlines={this.state.deadlines}\n            startdates={this.state.startdates}\n            subtasks={window.data.tasks['river'].subtasks} ref={this.state.river} />\n        </div>\n        <SelectMenu ref={this.state.contextMenu}/>\n        {window.selected && this.state.displayTable !== 'none' &&\n          <TableDisplay />}\n      </>\n    )\n  }\n}\n\n// extra function menu tacked on after the drag/drop context\nclass SelectMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { display: 'none', top: '0', left: '0' };\n  }\n  render() {\n    this.self = React.createRef();\n    return (\n      <div className='selectMenu' ref={this.self} style={{ display: this.state.display,\n        top: this.state.top, left: this.state.left }}>\n        <p className='centerAlign'><b>edit</b></p>\n        <p onClick={() => edit.newTask()}>\n          new task<span className='rightAlign'>(return)</span></p>\n        <p onClick={() => edit.newTask('task')}>\n          new subtask <span className='rightAlign'>(shift-return)</span></p>\n        <p onClick={() => edit.cutTask()}>\n          cut <span className='rightAlign'>(ctrl-x)</span></p>\n        <p onClick={() => edit.copyTask()}>\n          copy <span className='rightAlign'>(ctrl-c)</span></p>\n        <p onClick={() => edit.copyTask(true)}>\n          mirror <span className='rightAlign'>(ctrl-shift-C)</span></p>\n        <p onClick={() => edit.pasteTask()}>\n          paste <span className='rightAlign'>(ctrl-v)</span></p>\n        <p onClick={() => edit.pasteTask(\"task\")}>\n          paste as subtask (ctrl-shift-V)</p>\n        <p onClick={() => {\n          if (window.selected && window.selected instanceof Task) {\n            window.selected.deleteThis();\n          } else if (window.selected && window.selected instanceof List &&\n            window.selected.props.parent.props.id === 'bank') {\n            const confirm = window.confirm('delete this list?');\n            if (confirm) {\n              const subtasks = window.selected.props.parent.state.subtasks;\n              window.undoData = localStorage.getItem('data');\n              subtasks.splice(\n                subtasks.findIndex(x => x === window.selected.props.id), 1);\n              window.selected.props.parent.setState({ subtasks: subtasks });\n            }\n          }\n        }}>\n          delete <span className='rightAlign'>(ctrl-delete)</span></p>\n        <p  className='centerAlign' style={{marginTop:'5px'}}><b>move</b></p>\n        <p onClick={() => edit.moveTask(1)}>\n          move down <span className='rightAlign'>(ctrl-s)</span></p>\n        <p onClick={() => edit.moveTask(-1)}>\n          move up <span className='rightAlign'>(ctrl-w)</span></p>\n        <p onClick={() => display.switchView(1)}>\n          following week/lists <span className='rightAlign'>(ctrl-d)</span></p>\n        <p onClick={() => display.switchView(-1)}>\n          previous week/lists <span className='rightAlign'>(ctrl-a)</span></p>\n        <p onClick={() => edit.listEdit('migrate')}>\n          migrate date</p>\n        <p onClick={() => edit.listEdit('clear')}>\n          clear list</p>\n        <p onClick={() => display.displayTable()}>\n          display as table</p>\n      </div>\n    )\n  } \n}\n\nclass TableDisplay extends React.Component {\n  render() {\n    return (\n      <table className='table'>\n        <thead></thead>\n        <tbody>\n          {window.data.tasks[util.stripR(window.selected.props.id)].subtasks.map(x => (\n            <tr key={x}>\n              <td>{\n                window.data.tasks[util.stripR(x)].title\n              }</td>\n              {window.data.tasks[x].subtasks.map(y => (\n                <td key={y}>\n                  {window.data.tasks[util.stripR(y)].title\n                  }\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}