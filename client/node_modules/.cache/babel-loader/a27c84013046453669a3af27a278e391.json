{"ast":null,"code":"import $ from 'jquery';\nimport * as edit from '../edit/edit';\nimport * as util from '../util/util';\nimport Task from '../../components/Task/Task';\nexport function checkTimes() {\n  const today = new Date();\n  const now = [today.getHours(), today.getMinutes()];\n  const dateString = today.toDateString();\n  const list = window.data.tasks[Object.keys(window.data.tasks).find(x => window.data.tasks[x].title === dateString)];\n  if (!list) return;\n  const todayList = list.subtasks;\n\n  for (let task of todayList) {\n    const taskEntry = window.data.tasks[util.stripR(task)];\n\n    if (taskEntry.info.type === 'event' && taskEntry.info.complete !== 'complete' && !taskEntry.info.startDate.includes('--')) {\n      if (taskEntry.info.startDate[0] === now[0] && taskEntry.info.startDate[1] === now[1]) {\n        Notification.requestPermission();\n        new Notification('Event: ' + taskEntry.title);\n        break;\n      } else {\n        const newDate = new Date();\n        newDate.setHours(taskEntry.info.startDate[0]);\n        newDate.setMinutes(taskEntry.info.startDate[1]);\n        newDate.setMinutes(newDate.getMinutes() - 15);\n\n        if (taskEntry.info.type === 'event' && newDate.getHours() === now[0] && newDate.getMinutes() === now[1]) {\n          Notification.requestPermission();\n          new Notification('in 15: ' + taskEntry.title);\n        }\n      }\n    }\n  }\n}\nexport function switchView(direction) {\n  if (!window.selected) return;\n  let parent = window.selected;\n\n  while (parent instanceof Task) {\n    parent = parent.props.parent;\n  }\n\n  parent.props.parent.changeIndex(direction);\n  updateAllSizes();\n}\nexport function toggleMode() {\n  if (window.data.settings.mode === 'night') {\n    window.data.settings.mode = 'day';\n  } else {\n    window.data.settings.mode = 'night';\n  }\n\n  setTheme(window.data.settings.theme);\n  localStorage.setItem('data', JSON.stringify(window.data));\n}\nexport function toggleSounds() {\n  if (window.data.settings.sounds === 'false') {\n    window.data.settings.sounds = 'true';\n    alert('sounds on');\n  } else {\n    window.data.settings.sounds = 'false';\n    alert('sounds off');\n  }\n}\nexport function focus(set) {\n  var focusSet;\n\n  if (set !== undefined) {\n    focusSet = set;\n  } else {\n    if (window.app.current.state.bank.current.state.info.focused === 'focused') {\n      focusSet = '';\n    } else {\n      focusSet = 'focused';\n    }\n  }\n\n  if (window.selected) {\n    // set the index of the focused list to the window.selected list\n    let focusView = window.selected;\n\n    while (focusView instanceof Task) {\n      focusView = focusView.props.parent;\n    }\n\n    focusView.props.parent.changeIndex(focusView.props.parent.frames.findIndex(x => x.current.props.id === focusView.props.id));\n  }\n\n  window.app.current.state.bank.current.setState(prevState => ({\n    info: { ...prevState.info,\n      focused: focusSet\n    },\n    width: processWidth(focusSet)\n  }));\n  window.app.current.state.river.current.setState(prevState => ({\n    info: { ...prevState.info,\n      focused: focusSet\n    },\n    width: processWidth(focusSet)\n  }));\n  edit.saveSetting('focused', focusSet);\n  updateAllSizes();\n}\nexport function updateAllSizes() {\n  function update(list) {\n    if (list.current instanceof Task) {\n      list.current.updateHeight();\n    }\n\n    for (let task of list.current.taskList.current.subtaskObjects) {\n      update(task);\n    }\n  }\n\n  const riverLists = window.app.current.state.river.current.frames;\n  const bankLists = window.app.current.state.bank.current.frames;\n\n  for (let list of riverLists.concat(bankLists)) {\n    update(list);\n  }\n}\nexport function setTheme(theme) {\n  const newTheme = window.themes[theme + '-' + window.data.settings.mode];\n\n  for (let key of Object.keys(newTheme)) {\n    document.documentElement.style.setProperty(key, newTheme[key]);\n  }\n\n  window.data.settings.theme = theme;\n  localStorage.setItem('data', JSON.stringify(window.data));\n  setTimeout(updateAllSizes, 100);\n}\nexport function displayTable() {\n  if (window.app.current.state.displayTable === 'none' && window.selected) {\n    window.app.current.setState({\n      displayTable: 'true'\n    });\n  } else {\n    window.app.current.setState({\n      displayTable: 'none'\n    });\n  }\n}\nexport function playSound(sound) {\n  if (window.data.settings.sounds === 'true') {\n    sound.play();\n  }\n}\nexport function processWidth(focused) {\n  var width;\n\n  if (focused !== 'focused') {\n    width = Math.floor(window.innerWidth / 250);\n    $(':root').css('--frameWidth', (window.innerWidth - 40) / width + 'px');\n  } else {\n    // focus mode\n    width = 1;\n    $(':root').css('--frameWidth', 'calc(100% - 24px)');\n  }\n\n  return width;\n}\nexport function goToToday() {\n  searchDate(new Date().toDateString());\n}\nexport function searchDate(text, type) {\n  return;\n  setTimeout(() => {\n    window.app.current.statusBar.current.search({\n      target: {\n        value: text\n      }\n    });\n    window.app.current.statusBar.current.goToFirst();\n  }, 100);\n}\nexport function zoom() {\n  // zoom everything upwards\n  var zoomedSetting;\n\n  if (window.app.current.state.zoomed === 'zoomed') {\n    zoomedSetting = '';\n  } else {\n    zoomedSetting = 'zoomed';\n\n    if (!window.selected) {\n      return;\n    }\n\n    ; // no zoomie\n  }\n\n  var zoomFrame = util.getFrame(window.selected);\n  zoomFrame.setState({\n    zoomed: zoomedSetting\n  });\n  window.app.current.setState({\n    zoomed: zoomedSetting\n  });\n\n  if (!window.zoomed) {\n    // unzoom\n    window.zoomed = window.selected;\n  } else {\n    window.zoomed = undefined;\n  }\n\n  setTimeout(updateAllSizes, 200);\n}","map":{"version":3,"sources":["/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/src/services/display/display.js"],"names":["$","edit","util","Task","checkTimes","today","Date","now","getHours","getMinutes","dateString","toDateString","list","window","data","tasks","Object","keys","find","x","title","todayList","subtasks","task","taskEntry","stripR","info","type","complete","startDate","includes","Notification","requestPermission","newDate","setHours","setMinutes","switchView","direction","selected","parent","props","changeIndex","updateAllSizes","toggleMode","settings","mode","setTheme","theme","localStorage","setItem","JSON","stringify","toggleSounds","sounds","alert","focus","set","focusSet","undefined","app","current","state","bank","focused","focusView","frames","findIndex","id","setState","prevState","width","processWidth","river","saveSetting","update","updateHeight","taskList","subtaskObjects","riverLists","bankLists","concat","newTheme","themes","key","document","documentElement","style","setProperty","setTimeout","displayTable","playSound","sound","play","Math","floor","innerWidth","css","goToToday","searchDate","text","statusBar","search","target","value","goToFirst","zoom","zoomedSetting","zoomed","zoomFrame","getFrame"],"mappings":"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","sourcesContent":["import $ from 'jquery';\nimport * as edit from '../edit/edit';\nimport * as util from '../util/util';\nimport Task from '../../components/Task/Task';\n\nexport function checkTimes() {\n  const today = new Date();\n  const now = [today.getHours(), today.getMinutes()];\n  const dateString = today.toDateString();\n  const list = window.data.tasks[Object.keys(window.data.tasks)\n    .find(x => window.data.tasks[x].title === dateString)];\n  if (!list) return;\n  const todayList = list.subtasks;\n  for (let task of todayList) {\n    const taskEntry = window.data.tasks[util.stripR(task)];\n    if (taskEntry.info.type === 'event' &&\n      taskEntry.info.complete !== 'complete' &&\n      !taskEntry.info.startDate.includes('--')) {\n      if (\n        taskEntry.info.startDate[0] === now[0] &&\n        taskEntry.info.startDate[1] === now[1]\n      ) {\n        Notification.requestPermission();\n        new Notification('Event: ' + taskEntry.title);\n        break;\n      } else {\n        const newDate = new Date();\n        newDate.setHours(taskEntry.info.startDate[0]);\n        newDate.setMinutes(taskEntry.info.startDate[1]);\n        newDate.setMinutes(newDate.getMinutes() - 15);\n        if (\n          taskEntry.info.type === 'event' && \n          newDate.getHours() === now[0] &&\n          newDate.getMinutes() === now[1]\n        ) {\n          Notification.requestPermission();\n          new Notification('in 15: ' + taskEntry.title);\n        }\n      }\n    }\n  }\n}\n\nexport function switchView(direction) {\n  if (!window.selected) return;\n  let parent = window.selected;\n  while (parent instanceof Task) {\n    parent = parent.props.parent;\n  }\n  parent.props.parent.changeIndex(direction);\n  updateAllSizes();\n}\n\nexport function toggleMode() {\n  if (window.data.settings.mode === 'night') {\n    window.data.settings.mode = 'day';\n  } else {\n    window.data.settings.mode = 'night';\n  }\n  setTheme(window.data.settings.theme);\n  localStorage.setItem('data', JSON.stringify(window.data));\n}\n\nexport function toggleSounds() {\n  if (window.data.settings.sounds === 'false') {\n    window.data.settings.sounds = 'true';\n    alert('sounds on');\n  } else {\n    window.data.settings.sounds = 'false';\n    alert('sounds off');\n  }\n}\n\nexport function focus(set) {\n  var focusSet;\n  if (set !== undefined) {\n    focusSet = set;\n  } else {\n    if (window.app.current.state.bank.current.state.info.focused === 'focused') {\n      focusSet = '';\n    } else {\n      focusSet = 'focused';\n    }\n  }\n  if (window.selected) {\n    // set the index of the focused list to the window.selected list\n    let focusView = window.selected\n    while (focusView instanceof Task) {\n      focusView = focusView.props.parent;\n    }\n    focusView.props.parent.changeIndex(focusView.props.parent.frames\n      .findIndex(x => x.current.props.id === focusView.props.id));\n  }\n  window.app.current.state.bank.current.setState(prevState => (\n    {\n      info: {\n        ...prevState.info,\n        focused: focusSet,\n      },\n      width: processWidth(focusSet)\n    }));\n  window.app.current.state.river.current.setState(prevState => (\n    {\n      info: {\n        ...prevState.info,\n        focused: focusSet,\n      },\n      width: processWidth(focusSet),\n    }));\n  edit.saveSetting('focused', focusSet);\n  updateAllSizes();\n}\n\nexport function updateAllSizes() {\n  function update(list) {\n    if (list.current instanceof Task) { list.current.updateHeight(); }\n    for (let task of list.current.taskList.current.subtaskObjects) {\n      update(task);\n    }\n  }\n  const riverLists = window.app.current.state.river.current.frames;\n  const bankLists = window.app.current.state.bank.current.frames;\n  for (let list of riverLists.concat(bankLists)) {\n    update(list);\n  }\n}\n\nexport function setTheme(theme) {\n  const newTheme = window.themes[theme + '-' +\n    window.data.settings.mode];\n  for (let key of Object.keys(newTheme)) {\n    document.documentElement.style.setProperty(\n      key, newTheme[key]\n    );\n  }\n  window.data.settings.theme = theme;\n  localStorage.setItem('data', JSON.stringify(window.data));\n  setTimeout(updateAllSizes, 100);\n}\n\nexport function displayTable() {\n  if (window.app.current.state.displayTable === 'none' && window.selected) {\n    window.app.current.setState({displayTable: 'true'});\n  } else {\n    window.app.current.setState({displayTable: 'none'});\n  }\n}\n\nexport function playSound(sound) {\n  if (window.data.settings.sounds === 'true') {\n    sound.play();\n  }\n}\n\nexport function processWidth(focused) {\n  var width;\n  if (focused !== 'focused') {\n    width = Math.floor(window.innerWidth / 250);\n    $(':root').css('--frameWidth',\n      ((window.innerWidth - 40) / width) + 'px');\n  } else {\n    // focus mode\n    width = 1;\n    $(':root').css('--frameWidth', 'calc(100% - 24px)');\n  }\n  return width;\n}\n\nexport function goToToday() {\n  searchDate(new Date().toDateString());\n}\n\nexport function searchDate(text, type) {\n  return;\n  setTimeout(() => {\n    window.app.current.statusBar.current.search({ target: { value: text } });\n    window.app.current.statusBar.current.goToFirst();\n  }, 100);\n}\n\nexport function zoom() {\n  // zoom everything upwards\n  var zoomedSetting;\n  if (window.app.current.state.zoomed === 'zoomed') {\n    zoomedSetting = '';\n  } else {\n    zoomedSetting = 'zoomed';\n    if (!window.selected) { return }; // no zoomie\n  }\n  var zoomFrame = util.getFrame(window.selected);\n  zoomFrame.setState({ zoomed: zoomedSetting });\n  window.app.current.setState({ zoomed: zoomedSetting });\n  if (!window.zoomed) {\n    // unzoom\n    window.zoomed = window.selected;\n  } else {\n    window.zoomed = undefined;\n  }\n  setTimeout(\n    updateAllSizes, 200\n  )\n}"]},"metadata":{},"sourceType":"module"}