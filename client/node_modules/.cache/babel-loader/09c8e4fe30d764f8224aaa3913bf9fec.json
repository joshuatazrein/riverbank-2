{"ast":null,"code":"var _jsxFileName = \"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/src/components/App/App.js\";\nimport React from 'react';\nimport './App.css';\nimport popSnd from '../../assets/snd/pop.mp3';\nimport * as edit from '../../services/edit/edit';\nimport * as display from '../../services/display/display';\nimport * as util from '../../services/util/util';\nimport Frame from '../Frame/Frame';\nimport StatusBar from '../StatusBar/StatusBar';\nimport Task from '../Task/Task';\nimport List from '../List/List'; // main app, governs everything\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onDragEnd = result => {\n      const {\n        destination,\n        source\n      } = result;\n\n      if (!destination) {\n        return;\n      }\n\n      if (destination.droppableId === source.droppableId && destination.index === source.index) {\n        return;\n      }\n\n      const sourceSplit = source.droppableId.split('-');\n      const destSplit = destination.droppableId.split('-');\n\n      function buildList(listSplit) {\n        var listObjs = [];\n        listObjs.push(window.app.current.state[listSplit[0]]);\n        listObjs.push(listObjs[0].current.frames.find(x => x.current.props.id === listSplit[1]));\n        var i = 2;\n        var task;\n\n        function getTask() {\n          task = listObjs[i - 1].current.taskList.current.subtaskObjects.find(x => x.current.props.id === listSplit[i]);\n          listObjs.push(task);\n          i++;\n        }\n\n        while (i < listSplit.length) {\n          getTask();\n        } // returns the item to update\n\n\n        return listObjs[listObjs.length - 1];\n      }\n\n      const sourceItem = buildList(sourceSplit);\n      const sourceState = sourceItem.current.state.subtasks;\n      const splicedTask = sourceState.splice(source.index, 1);\n      sourceItem.current.setState({\n        subtasks: sourceState\n      });\n      const destItem = buildList(destSplit);\n      const destState = destItem.current.state.subtasks;\n      destState.splice(destination.index, 0, splicedTask[0]);\n      destItem.current.setState({\n        subtasks: destState\n      }); // splice in the new DATA from the source into the OBJECT of the destination\n\n      edit.save(sourceItem.current);\n      edit.save(destItem.current);\n      window.selected = undefined;\n    };\n\n    this.state = {\n      hideComplete: window.data.settings.hideComplete,\n      bank: /*#__PURE__*/React.createRef(),\n      river: /*#__PURE__*/React.createRef(),\n      theme: window.data.settings.theme,\n      mode: window.data.settings.mode,\n      focused: window.data.settings.focused,\n      popSnd: new Audio(popSnd),\n      zoomed: '',\n      disableSelect: '',\n      contextMenu: /*#__PURE__*/React.createRef(),\n      deadlines: window.data.settings.deadlines,\n      startdates: window.data.settings.startdates,\n      displayTable: 'none'\n    };\n  } // hide/show completes\n\n\n  toggleComplete() {\n    var hideComplete;\n\n    if (this.state.hideComplete === '') {\n      hideComplete = 'hideComplete';\n    } else {\n      hideComplete = '';\n    }\n\n    this.setState({\n      hideComplete: hideComplete\n    });\n    edit.saveSetting('hideComplete', hideComplete);\n    display.updateAllSizes();\n  }\n\n  render() {\n    this.statusBar = /*#__PURE__*/React.createRef();\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(StatusBar, {\n        parent: this,\n        ref: this.statusBar,\n        deadlines: this.state.deadlines,\n        startdates: this.state.startdates\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'container ' + this.state.hideComplete + ' ' + this.state.zoomed + ' ' + this.state.disableSelect,\n        children: [/*#__PURE__*/_jsxDEV(Frame, {\n          id: \"bank\",\n          info: { ...window.data.tasks['bank'].info,\n            focused: window.data.settings.focused\n          },\n          subtasks: window.data.tasks['bank'].subtasks,\n          ref: this.state.bank\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Frame, {\n          id: \"river\",\n          info: { ...window.data.tasks['river'].info,\n            focused: window.data.settings.focused\n          },\n          deadlines: this.state.deadlines,\n          startdates: this.state.startdates,\n          subtasks: window.data.tasks['river'].subtasks,\n          ref: this.state.river\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SelectMenu, {\n        ref: this.state.contextMenu\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), window.selected && this.state.displayTable !== 'none' && /*#__PURE__*/_jsxDEV(TableDisplay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  }\n\n} // extra function menu tacked on after the drag/drop context\n\nclass SelectMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      display: 'none',\n      top: '0',\n      left: '0'\n    };\n  }\n\n  render() {\n    this.self = /*#__PURE__*/React.createRef();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selectMenu\",\n      ref: this.self,\n      style: {\n        display: this.state.display,\n        top: this.state.top,\n        left: this.state.left\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"centerAlign\",\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.newTask(),\n        children: [\"new task\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(return)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.newTask('task'),\n        children: [\"new subtask \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(shift-return)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.cutTask(),\n        children: [\"cut \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-x)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.copyTask(),\n        children: [\"copy \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-c)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.copyTask(true),\n        children: [\"mirror \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-shift-C)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.pasteTask(),\n        children: [\"paste \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-v)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.pasteTask(\"task\"),\n        children: \"paste as subtask (ctrl-shift-V)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => {\n          if (window.selected && window.selected instanceof Task) {\n            window.selected.deleteThis();\n          } else if (window.selected && window.selected instanceof List && window.selected.props.parent.props.id === 'bank') {\n            const confirm = window.confirm('delete this list?');\n\n            if (confirm) {\n              const subtasks = window.selected.props.parent.state.subtasks;\n              window.undoData = localStorage.getItem('data');\n              subtasks.splice(subtasks.findIndex(x => x === window.selected.props.id), 1);\n              window.selected.props.parent.setState({\n                subtasks: subtasks\n              });\n            }\n          }\n        },\n        children: [\"delete \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-delete)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"centerAlign\",\n        style: {\n          marginTop: '5px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"move\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 63\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.moveTask(1),\n        children: [\"move down \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-s)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.moveTask(-1),\n        children: [\"move up \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-w)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => display.switchView(1),\n        children: [\"following week/lists \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-d)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 32\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => display.switchView(-1),\n        children: [\"previous week/lists \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"rightAlign\",\n          children: \"(ctrl-a)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.listEdit('migrate'),\n        children: \"migrate date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => edit.listEdit('clear'),\n        children: \"clear list\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => display.displayTable(),\n        children: \"display as table\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass TableDisplay extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: window.data.tasks[util.stripR(window.selected.props.id)].subtasks.map(x => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: window.data.tasks[util.stripR(x)].title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this), window.data.tasks[x].subtasks.map(y => /*#__PURE__*/_jsxDEV(\"td\", {\n            children: window.data.tasks[util.stripR(y)].title\n          }, y, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 17\n          }, this))]\n        }, x, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/src/components/App/App.js"],"names":["React","popSnd","edit","display","util","Frame","StatusBar","Task","List","App","Component","constructor","props","onDragEnd","result","destination","source","droppableId","index","sourceSplit","split","destSplit","buildList","listSplit","listObjs","push","window","app","current","state","frames","find","x","id","i","task","getTask","taskList","subtaskObjects","length","sourceItem","sourceState","subtasks","splicedTask","splice","setState","destItem","destState","save","selected","undefined","hideComplete","data","settings","bank","createRef","river","theme","mode","focused","Audio","zoomed","disableSelect","contextMenu","deadlines","startdates","displayTable","toggleComplete","saveSetting","updateAllSizes","render","statusBar","tasks","info","SelectMenu","top","left","self","newTask","cutTask","copyTask","pasteTask","deleteThis","parent","confirm","undoData","localStorage","getItem","findIndex","marginTop","moveTask","switchView","listEdit","TableDisplay","stripR","map","title","y"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport popSnd from '../../assets/snd/pop.mp3';\nimport * as edit from '../../services/edit/edit';\nimport * as display from '../../services/display/display';\nimport * as util from '../../services/util/util';\nimport Frame from '../Frame/Frame';\nimport StatusBar from '../StatusBar/StatusBar';\nimport Task from '../Task/Task';\nimport List from '../List/List';\n\n// main app, governs everything\nexport default class App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideComplete: window.data.settings.hideComplete,\n      bank: React.createRef(),\n      river: React.createRef(),\n      theme: window.data.settings.theme,\n      mode: window.data.settings.mode,\n      focused: window.data.settings.focused,\n      popSnd: new Audio(popSnd),\n      zoomed: '',\n      disableSelect: '',\n      contextMenu: React.createRef(),\n      deadlines: window.data.settings.deadlines,\n      startdates: window.data.settings.startdates,\n      displayTable: 'none',\n    };\n  }\n\n  // hide/show completes\n  toggleComplete() {\n    var hideComplete;\n    if (this.state.hideComplete === '') {\n      hideComplete = 'hideComplete';\n    } else {\n      hideComplete = '';\n    }\n    this.setState({ hideComplete: hideComplete });\n    edit.saveSetting('hideComplete', hideComplete);\n    display.updateAllSizes();\n  }\n  onDragEnd = result => {\n    const { destination, source } = result;\n    if (!destination) {\n      return;\n    }\n    if (destination.droppableId === source.droppableId &&\n      destination.index === source.index) {\n      return;\n    }\n    const sourceSplit = source.droppableId.split('-');\n    const destSplit = destination.droppableId.split('-');\n\n    function buildList(listSplit) {\n      var listObjs = [];\n      listObjs.push(window.app.current.state[listSplit[0]]);\n      listObjs.push(listObjs[0].current.frames.find(x =>\n        x.current.props.id === listSplit[1]));\n      var i = 2;\n      var task;\n      function getTask() {\n        task = listObjs[i - 1].current.taskList.current\n          .subtaskObjects.find(x => x.current.props.id === listSplit[i]);\n        listObjs.push(task);\n        i++;\n      }\n      while (i < listSplit.length) {\n        getTask();\n      }\n      // returns the item to update\n      return listObjs[listObjs.length - 1];\n    }\n    const sourceItem = buildList(sourceSplit);\n    const sourceState = sourceItem.current.state.subtasks;\n    const splicedTask = sourceState.splice(source.index, 1);\n    sourceItem.current.setState({ subtasks: sourceState });\n    const destItem = buildList(destSplit);\n    const destState = destItem.current.state.subtasks;\n    destState.splice(destination.index, 0, splicedTask[0]);\n    destItem.current.setState({ subtasks: destState });\n    // splice in the new DATA from the source into the OBJECT of the destination\n    edit.save(sourceItem.current);\n    edit.save(destItem.current);\n    window.selected = undefined;\n  }\n\n  render() {\n    this.statusBar = React.createRef();\n    return (\n      <>\n        <StatusBar parent={this} ref={this.statusBar} \n          deadlines={this.state.deadlines} \n          startdates={this.state.startdates} />\n        <div className={'container ' + this.state.hideComplete + ' ' +\n          this.state.zoomed + ' ' + this.state.disableSelect}>\n          <Frame id='bank' info={{\n            ...window.data.tasks['bank'].info,\n            focused: window.data.settings.focused\n          }}\n            subtasks={window.data.tasks['bank'].subtasks} ref={this.state.bank} />\n          <Frame id='river' info={{\n            ...window.data.tasks['river'].info,\n            focused: window.data.settings.focused,\n          }}\n            deadlines={this.state.deadlines}\n            startdates={this.state.startdates}\n            subtasks={window.data.tasks['river'].subtasks} ref={this.state.river} />\n        </div>\n        <SelectMenu ref={this.state.contextMenu}/>\n        {window.selected && this.state.displayTable !== 'none' &&\n          <TableDisplay />}\n      </>\n    )\n  }\n}\n\n// extra function menu tacked on after the drag/drop context\nclass SelectMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { display: 'none', top: '0', left: '0' };\n  }\n  render() {\n    this.self = React.createRef();\n    return (\n      <div className='selectMenu' ref={this.self} style={{ display: this.state.display,\n        top: this.state.top, left: this.state.left }}>\n        <p className='centerAlign'><b>edit</b></p>\n        <p onClick={() => edit.newTask()}>\n          new task<span className='rightAlign'>(return)</span></p>\n        <p onClick={() => edit.newTask('task')}>\n          new subtask <span className='rightAlign'>(shift-return)</span></p>\n        <p onClick={() => edit.cutTask()}>\n          cut <span className='rightAlign'>(ctrl-x)</span></p>\n        <p onClick={() => edit.copyTask()}>\n          copy <span className='rightAlign'>(ctrl-c)</span></p>\n        <p onClick={() => edit.copyTask(true)}>\n          mirror <span className='rightAlign'>(ctrl-shift-C)</span></p>\n        <p onClick={() => edit.pasteTask()}>\n          paste <span className='rightAlign'>(ctrl-v)</span></p>\n        <p onClick={() => edit.pasteTask(\"task\")}>\n          paste as subtask (ctrl-shift-V)</p>\n        <p onClick={() => {\n          if (window.selected && window.selected instanceof Task) {\n            window.selected.deleteThis();\n          } else if (window.selected && window.selected instanceof List &&\n            window.selected.props.parent.props.id === 'bank') {\n            const confirm = window.confirm('delete this list?');\n            if (confirm) {\n              const subtasks = window.selected.props.parent.state.subtasks;\n              window.undoData = localStorage.getItem('data');\n              subtasks.splice(\n                subtasks.findIndex(x => x === window.selected.props.id), 1);\n              window.selected.props.parent.setState({ subtasks: subtasks });\n            }\n          }\n        }}>\n          delete <span className='rightAlign'>(ctrl-delete)</span></p>\n        <p  className='centerAlign' style={{marginTop:'5px'}}><b>move</b></p>\n        <p onClick={() => edit.moveTask(1)}>\n          move down <span className='rightAlign'>(ctrl-s)</span></p>\n        <p onClick={() => edit.moveTask(-1)}>\n          move up <span className='rightAlign'>(ctrl-w)</span></p>\n        <p onClick={() => display.switchView(1)}>\n          following week/lists <span className='rightAlign'>(ctrl-d)</span></p>\n        <p onClick={() => display.switchView(-1)}>\n          previous week/lists <span className='rightAlign'>(ctrl-a)</span></p>\n        <p onClick={() => edit.listEdit('migrate')}>\n          migrate date</p>\n        <p onClick={() => edit.listEdit('clear')}>\n          clear list</p>\n        <p onClick={() => display.displayTable()}>\n          display as table</p>\n      </div>\n    )\n  } \n}\n\nclass TableDisplay extends React.Component {\n  render() {\n    return (\n      <table className='table'>\n        <thead></thead>\n        <tbody>\n          {window.data.tasks[util.stripR(window.selected.props.id)].subtasks.map(x => (\n            <tr key={x}>\n              <td>{\n                window.data.tasks[util.stripR(x)].title\n              }</td>\n              {window.data.tasks[x].subtasks.map(y => (\n                <td key={y}>\n                  {window.data.tasks[util.stripR(y)].title\n                  }\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}