{"ast":null,"code":"import _objectSpread from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import $ from'jquery';import*as edit from'../edit/edit';import*as util from'../util/util';import Task from'../../components/Task/Task';export function checkTimes(){var today=new Date();var now=[today.getHours(),today.getMinutes()];var dateString=today.toDateString();var list=window.data.tasks[Object.keys(window.data.tasks).find(function(x){return window.data.tasks[x].title===dateString;})];if(!list)return;var todayList=list.subtasks;var _iterator=_createForOfIteratorHelper(todayList),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var task=_step.value;var taskEntry=window.data.tasks[util.stripR(task)];if(taskEntry.info.type==='event'&&taskEntry.info.complete!=='complete'&&!taskEntry.info.startDate.includes('--')){if(taskEntry.info.startDate[0]===now[0]&&taskEntry.info.startDate[1]===now[1]){Notification.requestPermission();new Notification('Event: '+taskEntry.title);break;}else{var newDate=new Date();newDate.setHours(taskEntry.info.startDate[0]);newDate.setMinutes(taskEntry.info.startDate[1]);newDate.setMinutes(newDate.getMinutes()-15);if(taskEntry.info.type==='event'&&newDate.getHours()===now[0]&&newDate.getMinutes()===now[1]){Notification.requestPermission();new Notification('in 15: '+taskEntry.title);}}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}export function switchView(direction){if(!window.selected)return;var parent=window.selected;while(parent instanceof Task){parent=parent.props.parent;}parent.props.parent.changeIndex(direction);updateAllSizes();}export function toggleMode(){if(window.data.settings.mode==='night'){window.data.settings.mode='day';}else{window.data.settings.mode='night';}setTheme(window.data.settings.theme);localStorage.setItem('data',JSON.stringify(window.data));}export function toggleSounds(){if(window.data.settings.sounds==='false'){window.data.settings.sounds='true';alert('sounds on');}else{window.data.settings.sounds='false';alert('sounds off');}}export function focus(set){var focusSet;if(set!==undefined){focusSet=set;}else{if(window.app.current.state.bank.current.state.info.focused==='focused'){focusSet='';}else{focusSet='focused';}}if(window.selected){// set the index of the focused list to the window.selected list\nvar focusView=window.selected;while(focusView instanceof Task){focusView=focusView.props.parent;}focusView.props.parent.changeIndex(focusView.props.parent.frames.findIndex(function(x){return x.current.props.id===focusView.props.id;}));}window.app.current.state.bank.current.setState(function(prevState){return{info:_objectSpread(_objectSpread({},prevState.info),{},{focused:focusSet}),width:processWidth(focusSet)};});window.app.current.state.river.current.setState(function(prevState){return{info:_objectSpread(_objectSpread({},prevState.info),{},{focused:focusSet}),width:processWidth(focusSet)};});edit.saveSetting('focused',focusSet);updateAllSizes();}export function updateAllSizes(){function update(list){if(list.current instanceof Task){list.current.updateHeight();}var _iterator2=_createForOfIteratorHelper(list.current.taskList.current.subtaskObjects),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var task=_step2.value;update(task);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}var riverLists=window.app.current.state.river.current.frames;var bankLists=window.app.current.state.bank.current.frames;var _iterator3=_createForOfIteratorHelper(riverLists.concat(bankLists)),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var list=_step3.value;update(list);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}export function setTheme(theme){var newTheme=window.themes[theme+'-'+window.data.settings.mode];for(var _i=0,_Object$keys=Object.keys(newTheme);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];document.documentElement.style.setProperty(key,newTheme[key]);}window.data.settings.theme=theme;localStorage.setItem('data',JSON.stringify(window.data));setTimeout(updateAllSizes,100);}export function displayTable(){if(window.app.current.state.displayTable==='none'&&window.selected){window.app.current.setState({displayTable:'true'});}else{window.app.current.setState({displayTable:'none'});}}export function playSound(sound){if(window.data.settings.sounds==='true'){sound.play();}}export function processWidth(focused){var width;if(focused!=='focused'){width=Math.floor(window.innerWidth/250);$(':root').css('--frameWidth',(window.innerWidth-40)/width+'px');}else{// focus mode\nwidth=1;$(':root').css('--frameWidth','calc(100% - 24px)');}return width;}export function goToToday(){searchDate(new Date().toDateString());}export function searchDate(text,type){setTimeout(function(){window.app.current.statusBar.current.search({target:{value:text}});window.app.current.statusBar.current.goToFirst();},100);}export function zoom(){// zoom everything upwards\nvar zoomedSetting;if(window.app.current.state.zoomed==='zoomed'){zoomedSetting='';}else{zoomedSetting='zoomed';if(!window.selected){return;};// no zoomie\n}var zoomFrame=util.getFrame(window.selected);zoomFrame.setState({zoomed:zoomedSetting});window.app.current.setState({zoomed:zoomedSetting});if(!window.zoomed){// unzoom\nwindow.zoomed=window.selected;}else{window.zoomed=undefined;}setTimeout(updateAllSizes,200);}","map":{"version":3,"sources":["/Users/frederic/Documents/big-projects/2021-11-01_riverbank-2/riverbank-2/src/services/display/display.js"],"names":["$","edit","util","Task","checkTimes","today","Date","now","getHours","getMinutes","dateString","toDateString","list","window","data","tasks","Object","keys","find","x","title","todayList","subtasks","task","taskEntry","stripR","info","type","complete","startDate","includes","Notification","requestPermission","newDate","setHours","setMinutes","switchView","direction","selected","parent","props","changeIndex","updateAllSizes","toggleMode","settings","mode","setTheme","theme","localStorage","setItem","JSON","stringify","toggleSounds","sounds","alert","focus","set","focusSet","undefined","app","current","state","bank","focused","focusView","frames","findIndex","id","setState","prevState","width","processWidth","river","saveSetting","update","updateHeight","taskList","subtaskObjects","riverLists","bankLists","concat","newTheme","themes","key","document","documentElement","style","setProperty","setTimeout","displayTable","playSound","sound","play","Math","floor","innerWidth","css","goToToday","searchDate","text","statusBar","search","target","value","goToFirst","zoom","zoomedSetting","zoomed","zoomFrame","getFrame"],"mappings":"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","sourcesContent":["import $ from 'jquery';\nimport * as edit from '../edit/edit';\nimport * as util from '../util/util';\nimport Task from '../../components/Task/Task';\n\nexport function checkTimes() {\n  const today = new Date();\n  const now = [today.getHours(), today.getMinutes()];\n  const dateString = today.toDateString();\n  const list = window.data.tasks[Object.keys(window.data.tasks)\n    .find(x => window.data.tasks[x].title === dateString)];\n  if (!list) return;\n  const todayList = list.subtasks;\n  for (let task of todayList) {\n    const taskEntry = window.data.tasks[util.stripR(task)];\n    if (taskEntry.info.type === 'event' &&\n      taskEntry.info.complete !== 'complete' &&\n      !taskEntry.info.startDate.includes('--')) {\n      if (\n        taskEntry.info.startDate[0] === now[0] &&\n        taskEntry.info.startDate[1] === now[1]\n      ) {\n        Notification.requestPermission();\n        new Notification('Event: ' + taskEntry.title);\n        break;\n      } else {\n        const newDate = new Date();\n        newDate.setHours(taskEntry.info.startDate[0]);\n        newDate.setMinutes(taskEntry.info.startDate[1]);\n        newDate.setMinutes(newDate.getMinutes() - 15);\n        if (\n          taskEntry.info.type === 'event' && \n          newDate.getHours() === now[0] &&\n          newDate.getMinutes() === now[1]\n        ) {\n          Notification.requestPermission();\n          new Notification('in 15: ' + taskEntry.title);\n        }\n      }\n    }\n  }\n}\n\nexport function switchView(direction) {\n  if (!window.selected) return;\n  let parent = window.selected;\n  while (parent instanceof Task) {\n    parent = parent.props.parent;\n  }\n  parent.props.parent.changeIndex(direction);\n  updateAllSizes();\n}\n\nexport function toggleMode() {\n  if (window.data.settings.mode === 'night') {\n    window.data.settings.mode = 'day';\n  } else {\n    window.data.settings.mode = 'night';\n  }\n  setTheme(window.data.settings.theme);\n  localStorage.setItem('data', JSON.stringify(window.data));\n}\n\nexport function toggleSounds() {\n  if (window.data.settings.sounds === 'false') {\n    window.data.settings.sounds = 'true';\n    alert('sounds on');\n  } else {\n    window.data.settings.sounds = 'false';\n    alert('sounds off');\n  }\n}\n\nexport function focus(set) {\n  var focusSet;\n  if (set !== undefined) {\n    focusSet = set;\n  } else {\n    if (window.app.current.state.bank.current.state.info.focused === 'focused') {\n      focusSet = '';\n    } else {\n      focusSet = 'focused';\n    }\n  }\n  if (window.selected) {\n    // set the index of the focused list to the window.selected list\n    let focusView = window.selected\n    while (focusView instanceof Task) {\n      focusView = focusView.props.parent;\n    }\n    focusView.props.parent.changeIndex(focusView.props.parent.frames\n      .findIndex(x => x.current.props.id === focusView.props.id));\n  }\n  window.app.current.state.bank.current.setState(prevState => (\n    {\n      info: {\n        ...prevState.info,\n        focused: focusSet,\n      },\n      width: processWidth(focusSet)\n    }));\n  window.app.current.state.river.current.setState(prevState => (\n    {\n      info: {\n        ...prevState.info,\n        focused: focusSet,\n      },\n      width: processWidth(focusSet),\n    }));\n  edit.saveSetting('focused', focusSet);\n  updateAllSizes();\n}\n\nexport function updateAllSizes() {\n  function update(list) {\n    if (list.current instanceof Task) { list.current.updateHeight(); }\n    for (let task of list.current.taskList.current.subtaskObjects) {\n      update(task);\n    }\n  }\n  const riverLists = window.app.current.state.river.current.frames;\n  const bankLists = window.app.current.state.bank.current.frames;\n  for (let list of riverLists.concat(bankLists)) {\n    update(list);\n  }\n}\n\nexport function setTheme(theme) {\n  const newTheme = window.themes[theme + '-' +\n    window.data.settings.mode];\n  for (let key of Object.keys(newTheme)) {\n    document.documentElement.style.setProperty(\n      key, newTheme[key]\n    );\n  }\n  window.data.settings.theme = theme;\n  localStorage.setItem('data', JSON.stringify(window.data));\n  setTimeout(updateAllSizes, 100);\n}\n\nexport function displayTable() {\n  if (window.app.current.state.displayTable === 'none' && window.selected) {\n    window.app.current.setState({displayTable: 'true'});\n  } else {\n    window.app.current.setState({displayTable: 'none'});\n  }\n}\n\nexport function playSound(sound) {\n  if (window.data.settings.sounds === 'true') {\n    sound.play();\n  }\n}\n\nexport function processWidth(focused) {\n  var width;\n  if (focused !== 'focused') {\n    width = Math.floor(window.innerWidth / 250);\n    $(':root').css('--frameWidth',\n      ((window.innerWidth - 40) / width) + 'px');\n  } else {\n    // focus mode\n    width = 1;\n    $(':root').css('--frameWidth', 'calc(100% - 24px)');\n  }\n  return width;\n}\n\nexport function goToToday() {\n  searchDate(new Date().toDateString());\n}\n\nexport function searchDate(text, type) {\n  setTimeout(() => {\n    window.app.current.statusBar.current.search({ target: { value: text } });\n    window.app.current.statusBar.current.goToFirst();\n  }, 100);\n}\n\nexport function zoom() {\n  // zoom everything upwards\n  var zoomedSetting;\n  if (window.app.current.state.zoomed === 'zoomed') {\n    zoomedSetting = '';\n  } else {\n    zoomedSetting = 'zoomed';\n    if (!window.selected) { return }; // no zoomie\n  }\n  var zoomFrame = util.getFrame(window.selected);\n  zoomFrame.setState({ zoomed: zoomedSetting });\n  window.app.current.setState({ zoomed: zoomedSetting });\n  if (!window.zoomed) {\n    // unzoom\n    window.zoomed = window.selected;\n  } else {\n    window.zoomed = undefined;\n  }\n  setTimeout(\n    updateAllSizes, 200\n  )\n}"]},"metadata":{},"sourceType":"module"}